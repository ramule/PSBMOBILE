(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{A3gm:function(e,t,i){"use strict";i.r(t),i.d(t,"RegisterNewBillerModule",(function(){return I}));var r=i("3Pt+"),c=i("PCNd"),o=i("ofXK"),l=i("fXoL"),s=i("tyNb"),a=i("EnSQ"),n=i("5IsW"),d=i("Qco3"),m=i("H9Rt"),b=i("L7Xq"),g=i("au7T"),p=i("fHQ/");let u=(()=>{class e{constructor(e,t,i,r,c){this.constant=e,this.encryptDecryptService=t,this.dataService=i,this.commonMethod=r,this.storage=c,this.inputData={[this.constant.key_entityId]:"PSB",[this.constant.key_mobPlatform]:this.constant.val_mobPlatform,[this.constant.key_mobileAppVersion]:this.constant.val_mobileAppVersion,[this.constant.key_clientAppVersion]:this.constant.val_mobileAppVersion,[this.constant.key_deviceId]:this.storage.getLocalStorage(this.constant.storage_deviceId)}}registerNewBiller(e,t,i){var r={[this.constant.key_entityId]:"PSB",[this.constant.key_mobPlatform]:this.constant.val_mobPlatform,[this.constant.key_mobileAppVersion]:this.constant.val_mobileAppVersion,[this.constant.key_clientAppVersion]:this.constant.val_mobileAppVersion,[this.constant.key_deviceId]:this.storage.getLocalStorage(this.constant.storage_deviceId),[this.constant.key_service_name]:this.constant.serviceName_CreateBillerAccountWithoutAutopayService,customerId:this.dataService.customerID,short_name:i.shortName,billerid:i.boardname,consumerIdKey:e.consumerKey,consumerIdValue:i.consumerNumber,firstName:this.dataService.userName.split(" ")[0],lastName:this.dataService.userName.split(" ")[this.dataService.userName.split(" ").length-1],mobile:this.storage.getLocalStorage(this.constant.storage_mobileNo),email:this.dataService.profileDetails[0].emailId.toLowerCase(),init_channel:t,deviceIp:this.dataService.ipAddress,mac:"11-AC-58-21-1B-AA"};return console.log("getbillerlist ==>"+JSON.stringify(r)),console.log("this.storage.getSessionStorage(this.constant.val_sessionKey)",this.storage.getSessionStorage(this.constant.val_sessionKey)),this.encryptDecryptService.encryptText(this.storage.getSessionStorage(this.constant.val_sessionKey),JSON.stringify(r))}}return e.\u0275fac=function(t){return new(t||e)(l.ic(n.a),l.ic(p.a),l.ic(a.a),l.ic(g.a),l.ic(m.a))},e.\u0275prov=l.Ub({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=i("Eioz");function v(e,t){if(1&e){const e=l.fc();l.ec(0,"li"),l.ec(1,"a",62),l.lc("click",(function(){l.Hc(e);const i=t.$implicit;return l.pc().DataService.breadcrumroute(i.routeName)})),l.Sc(2),l.qc(3,"translate"),l.dc(),l.dc()}if(2&e){const e=t.$implicit;l.Mb(2),l.Tc(l.rc(3,1,e.currentRoute))}}function S(e,t){if(1&e&&(l.ec(0,"option",63),l.Sc(1),l.dc()),2&e){const e=t.$implicit;l.uc("value",e),l.Mb(1),l.Tc(e)}}function f(e,t){1&e&&(l.ec(0,"p",64),l.Sc(1),l.qc(2,"translate"),l.dc()),2&e&&(l.Mb(1),l.Uc(" ",l.rc(2,1,"SELECT_CATEGORY")," "))}function B(e,t){if(1&e&&(l.ec(0,"option",63),l.Sc(1),l.dc()),2&e){const e=t.$implicit;l.uc("value",e),l.Mb(1),l.Tc(e)}}function y(e,t){1&e&&(l.ec(0,"p",64),l.Sc(1),l.qc(2,"translate"),l.dc()),2&e&&(l.Mb(1),l.Uc(" ",l.rc(2,1,"SELETC_STATE")," "))}function N(e,t){if(1&e&&l.Zb(0,"img",65),2&e){const e=l.pc();l.vc("src",e.selectedBoard.biller_logo,l.Jc)}}function _(e,t){if(1&e){const e=l.fc();l.ec(0,"li",66),l.lc("click",(function(){l.Hc(e);const i=t.$implicit;return l.pc().boardTypeSelection(i)})),l.Zb(1,"img",65),l.ec(2,"span",67),l.Sc(3),l.dc(),l.Zb(4,"img",68),l.dc()}if(2&e){const e=t.$implicit;l.Mb(1),l.vc("src",e.biller_logo,l.Jc),l.Mb(2),l.Uc(" ",e.biller_legal_name," ")}}function k(e,t){1&e&&(l.ec(0,"p",64),l.Sc(1),l.qc(2,"translate"),l.dc()),2&e&&(l.Mb(1),l.Uc(" ",l.rc(2,1,"REQUIRED_MSG")," "))}function L(e,t){1&e&&(l.ec(0,"p",64),l.Sc(1),l.qc(2,"translate"),l.dc()),2&e&&(l.Mb(1),l.Uc(" ",l.rc(2,1,"REQUIRED_MSG")," "))}function C(e,t){if(1&e){const e=l.fc();l.ec(0,"div",27),l.ec(1,"div",28),l.ec(2,"label"),l.Sc(3),l.dc(),l.Zb(4,"input",69),l.ec(5,"p",70),l.ec(6,"a",71),l.lc("click",(function(){return l.Hc(e),l.pc().commonMethods.openPopup(".sampleBill")})),l.Sc(7,"View Sample Bill"),l.dc(),l.dc(),l.dc(),l.dc()}if(2&e){const e=l.pc();l.Mb(3),l.Tc(e.consumerLabel),l.Mb(1),l.wc("placeholder","Enter ",e.consumerLabel,"")}}const P=[{path:"",component:(()=>{class e{constructor(e,t,i,r,c,o,l,s){this.router=e,this.DataService=t,this.constant=i,this.bbpsService=r,this.storage=c,this.http=o,this.commonMethods=l,this.registerNewBillerService=s,this.consumerLabel="",this.submitClicked=!1,this.finalBillerList=[],this.selectedBoard={biller_legal_name:"Select Board",billerid:"",biller_logo:""},this.platformtype=""}ngOnInit(){this.buildForm(),this.DataService.setPageSettings("Register New Biller"),this.DataService.setShowThemeObservable(!0),this.DataService.setShowsideNavObservable(!0),this.DataService.setShowNotificationObservable(!0),this.DataService.getBreadcrumb("REGISTER_NEW_BILLER",this.router.url),this.platformtype="web"==this.constant.getPlatform()?"InternetBanking":"MobileBanking",this.getBillerCategory()}goToPage(e){this.router.navigateByUrl("/"+e)}buildForm(){this.registerBillerForm=new r.j({billerCategory:new r.g("",[r.G.required]),billerLocation:new r.g("",[r.G.required]),boardname:new r.g(""),consumerNumber:new r.g("",[r.G.required]),shortName:new r.g("",[r.G.required])})}validateForm(){if(this.registerBillerForm.invalid)return this.registerBillerForm.get("billerCategory").markAsTouched(),this.registerBillerForm.get("billerLocation").markAsTouched(),this.registerBillerForm.get("boardname").markAsTouched(),this.registerBillerForm.get("consumerNumber").markAsTouched(),void this.registerBillerForm.get("shortName").markAsTouched()}registerBillerSubmit(){this.submitClicked=!0,this.registerBillerForm.valid?(console.log(this.registerBillerForm.value),this.createNewBiler(this.registerBillerForm.value)):this.validateForm()}onCategorySelect(e){this.selectedBoard={biller_legal_name:"Select Board",billerid:"",biller_logo:""},this.finalBillerList=[],this.stateList=[],this.registerBillerForm.get("billerLocation").reset(),$("#board-name").slideUp(),$("#board-name").parent().removeClass("active");let t=this.bbpsService.getLocationList(e);this.http.callBankingAPIService(t,this.storage.getLocalStorage(this.constant.storage_deviceId),this.constant.serviceName_BBPSSERVICES).subscribe(e=>{console.log(JSON.parse(e.responseParameter.bbpsResponse));var t=e.responseParameter;"00"==t.opstatus?(console.log(e.responseParameter),this.stateList=JSON.parse(e.responseParameter.bbpsResponse).responseParameter.billerLocationList,console.log("State List: ",this.stateList)):this.errorCallBack(e.subActionId,t)})}onStateSelect(e){this.selectedBoard={biller_legal_name:"Select Board",billerid:"",biller_logo:""},this.finalBillerList=[],$("#board-name").slideUp(),$("#board-name").parent().removeClass("active"),console.log("selected state ===> "+e);var t=this.bbpsService.getbillerlist(e,this.registerBillerForm.value.billerCategory);this.http.callBankingAPIService(t,this.storage.getLocalStorage(this.constant.storage_deviceId),this.constant.serviceName_BBPSSERVICES).subscribe(e=>{console.log(e);var t=e.responseParameter;if("00"==t.opstatus){console.log(e.responseParameter),this.boardNameValue=JSON.parse(e.responseParameter.bbpsResponse).responseParameter.billerList,console.log("billerList: "+JSON.stringify(this.boardNameValue)),console.log("billerListlength: "+this.boardNameValue[0].billerData);for(var i=0;i<this.boardNameValue.length;i++)this.finalBillerList.push(JSON.parse(this.boardNameValue[i].billerData));console.log("this.finalBillerList: "+JSON.stringify(this.finalBillerList))}else this.errorCallBack(e.subActionId,t)})}onSelectOption(){$("#board-name").slideToggle(),$("#board-name").parent().toggleClass("active")}boardTypeSelection(e){this.onSelectOption(),this.selectedBoard=e,this.registerBillerForm.get("boardname").setValue(e.billerid),this.selectedBillerName=e.billerName,$("#board-name").slideUp(),$("#board-name").parent().removeClass("active"),this.consumerLabel=e.authenticators[0].parameter_name,this.errorMsg=e.authenticators[0].error_message,this.billSampleURL=e.biller_bill_copy,this.registerBillerForm.get("consumerNumber").updateValueAndValidity(),this.registerBillerForm.get("boardname").updateValueAndValidity()}errorCallBack(e,t){}getBillerCategory(){let e=this.bbpsService.getBillerCategories();this.http.callBankingAPIService(e,this.storage.getLocalStorage(this.constant.storage_deviceId),this.constant.serviceName_BBPSSERVICES).subscribe(e=>{console.log("sanal ==> "+JSON.parse(e.responseParameter.bbpsResponse)),"00"==e.responseParameter.opstatus&&(console.log(e.responseParameter),this.selectedBoard={biller_legal_name:"Select Board",billerid:"",biller_logo:""},this.billerCategory=JSON.parse(e.responseParameter.bbpsResponse).responseParameter.categoryList,console.log("  this.existingBillerDetails ===> "+this.billerCategory))})}createNewBiler(e){let t=this.registerNewBillerService.registerNewBiller({consumerKey:this.consumerLabel},this.platformtype,e);this.http.callBankingAPIService(t,this.storage.getLocalStorage(this.constant.storage_deviceId),this.constant.serviceName_BBPSSERVICES).subscribe(e=>{console.log("sanal ==> "+JSON.parse(e.responseParameter.bbpsResponse)),"00"==e.responseParameter.opstatus&&(console.log(e.responseParameter),this.billerCategory=JSON.parse(e.responseParameter.bbpsResponse).responseParameter.categoryList,console.log("  this.existingBillerDetails ===> "+this.billerCategory),this.commonMethods.openPopup(".successpopup"),this.registerBillerForm.reset())})}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(s.c),l.Yb(a.a),l.Yb(n.a),l.Yb(d.a),l.Yb(m.a),l.Yb(b.a),l.Yb(g.a),l.Yb(u))},e.\u0275cmp=l.Sb({type:e,selectors:[["app-register-new-biller"]],decls:112,vars:14,consts:[[1,"main","bg-m"],[1,"right-main-column"],[1,"right-col-container","pad-b","full-width"],[1,"body-page-container","main-dashborad","bill-wrapper"],[1,"container-fluid"],[1,"row"],[1,"col-12","p-0"],[1,"breadcrumb"],[1,"lst-breadcrumb"],[4,"ngFor","ngForOf"],[1,"vspacer15","customize","d-none","d-md-block","d-lg-block","d-xl-block"],[1,"row","no-gutters"],[1,"col-12"],[1,"row1"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-9"],[1,"greencard2"],[1,"row1","hide-m"],[1,"col-md-10","col-12"],[1,"col-md-2","col-12"],[1,"header-actions"],["src","assets/images/icons/billpay.png","alt","billpay-img",1,"small-img"],[3,"formGroup","ngSubmit"],[1,"col-sm-12","col-12","col-md-12"],[1,"widget-box5","mb-3",2,"overflow","visible"],[1,"bg-white1","pad-custom"],[1,"flex-container2"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-12","full-info"],[1,"col-12","col-md-6","col-lg-4","col-xl-4"],[1,"ux-input"],["formControlName","billerCategory",1,"biller",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["formControlName","billerLocation",3,"change"],[1,"col-12","col-md-12","col-lg-8","col-xl-8"],[1,"ux-input","biller-custom-selectbox"],[1,"custom-dropdown-dummy"],[1,"dispayblock",3,"click"],["class","boardlogo","alt","",3,"src",4,"ngIf"],["type","hidden","formControlName","boardname",3,"value"],["id","board-name",1,"list"],["class","init",3,"click",4,"ngFor","ngForOf"],["type","text","placeholder","Enter Short Name","name","shortName","formControlName","shortName"],["class","col-12 col-md-6 col-lg-4 col-xl-4",4,"ngIf"],[1,"col-12","col-md-12"],[1,"bottom-footer1"],[1,"btn-div","hide-m"],["type","button",1,"ux-button","secondary","sm-mob","proceed1",3,"click"],[1,"btn-div","w100"],["type","submit",1,"ux-button","primary","sm-mob","proceed1"],[1,"col-12","col-md-12","col-lg-12","col-xl-3","d-none","d-xl-block"],[1,"right-ads"],["src","assets/images/banner/my-card-banner.jpg"],[1,"popup-bottom","sm-popup","sampleBill"],[1,"text-center"],["src","./assets/images/svg/information.svg","alt","error-icon"],[1,"col-12","mb-4"],["alt","Sample Bill",2,"display","block","margin","0 auto",3,"src"],[1,"row1","mt-2"],[1,"col-12","text-center"],[1,"ux-button","primary","submit-btn",3,"click"],[1,"popup-bottom","sm-popup","successpopup"],[3,"click"],[3,"value"],[1,"error-message"],["alt","",1,"boardlogo",3,"src"],[1,"init",3,"click"],[1,"board-display"],["src","assets/images/svg/BBPS_Logo.svg","alt","",2,"display","none"],["type","text","name","consumerNumber","formControlName","consumerNumber",3,"placeholder"],[1,"text-right"],[1,"link-txt",3,"click"]],template:function(e,t){1&e&&(l.ec(0,"div",0),l.ec(1,"div",1),l.ec(2,"div",2),l.ec(3,"div",3),l.ec(4,"div",4),l.ec(5,"div",5),l.ec(6,"div",6),l.ec(7,"div",7),l.ec(8,"ul",8),l.Rc(9,v,4,3,"li",9),l.dc(),l.dc(),l.dc(),l.dc(),l.Zb(10,"div",10),l.ec(11,"div",11),l.ec(12,"div",12),l.ec(13,"div",13),l.ec(14,"div",14),l.ec(15,"div",15),l.ec(16,"div",16),l.ec(17,"div",17),l.ec(18,"h4"),l.Sc(19,"Register New Biller "),l.dc(),l.dc(),l.ec(20,"div",18),l.ec(21,"div",19),l.Zb(22,"img",20),l.dc(),l.dc(),l.dc(),l.ec(23,"div",12),l.ec(24,"form",21),l.lc("ngSubmit",(function(){return t.registerBillerSubmit()})),l.ec(25,"div",13),l.ec(26,"div",22),l.ec(27,"div",23),l.ec(28,"div",24),l.ec(29,"div",13),l.ec(30,"div",25),l.ec(31,"div",26),l.ec(32,"div",13),l.ec(33,"div",27),l.ec(34,"div",28),l.ec(35,"label"),l.Sc(36,"Biller Category"),l.dc(),l.ec(37,"select",29),l.lc("change",(function(e){return t.onCategorySelect(e.target.value)})),l.ec(38,"option",30),l.Sc(39,"Select Biller"),l.dc(),l.Rc(40,S,2,2,"option",31),l.dc(),l.Rc(41,f,3,3,"p",32),l.dc(),l.dc(),l.ec(42,"div",27),l.ec(43,"div",28),l.ec(44,"label"),l.Sc(45,"Biller Location"),l.dc(),l.ec(46,"select",33),l.lc("change",(function(e){return t.onStateSelect(e.target.value)})),l.ec(47,"option",30),l.Sc(48,"Select Location"),l.dc(),l.Rc(49,B,2,2,"option",31),l.dc(),l.Rc(50,y,3,3,"p",32),l.dc(),l.dc(),l.dc(),l.ec(51,"div",13),l.ec(52,"div",34),l.ec(53,"div",35),l.ec(54,"label"),l.Sc(55,"Billers"),l.dc(),l.ec(56,"div",36),l.ec(57,"span",37),l.lc("click",(function(){return t.onSelectOption()})),l.Rc(58,N,1,1,"img",38),l.Sc(59),l.dc(),l.Zb(60,"input",39),l.ec(61,"ul",40),l.Rc(62,_,5,2,"li",41),l.dc(),l.dc(),l.Rc(63,k,3,3,"p",32),l.dc(),l.dc(),l.dc(),l.ec(64,"div",13),l.ec(65,"div",27),l.ec(66,"div",28),l.ec(67,"label"),l.Sc(68,"Short Name"),l.dc(),l.Zb(69,"input",42),l.Rc(70,L,3,3,"p",32),l.dc(),l.dc(),l.Rc(71,C,8,2,"div",43),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.ec(72,"div",44),l.ec(73,"ul",45),l.ec(74,"li"),l.ec(75,"div",46),l.ec(76,"button",47),l.lc("click",(function(){return t.goToPage("rechargeBillPay")})),l.Sc(77,"Cancel"),l.dc(),l.dc(),l.ec(78,"div",48),l.ec(79,"button",49),l.Sc(80,"Proceed"),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.ec(81,"div",50),l.ec(82,"div",51),l.ec(83,"a"),l.Zb(84,"img",52),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.dc(),l.ec(85,"div",53),l.ec(86,"div",13),l.ec(87,"div",12),l.ec(88,"h4",54),l.Zb(89,"img",55),l.Sc(90," Sample Bill "),l.dc(),l.dc(),l.dc(),l.ec(91,"div",13),l.ec(92,"div",56),l.Zb(93,"img",57),l.dc(),l.dc(),l.ec(94,"div",58),l.ec(95,"div",59),l.ec(96,"button",60),l.lc("click",(function(){return t.commonMethods.closeAllPopup()})),l.Sc(97,"Close"),l.dc(),l.dc(),l.dc(),l.dc(),l.ec(98,"div",61),l.ec(99,"div",13),l.ec(100,"div",12),l.ec(101,"h4",54),l.Zb(102,"img",55),l.Sc(103,"Information "),l.dc(),l.dc(),l.dc(),l.ec(104,"div",13),l.ec(105,"div",56),l.ec(106,"p"),l.Sc(107,"Biller has been Added Successfully"),l.dc(),l.dc(),l.dc(),l.ec(108,"div",58),l.ec(109,"div",59),l.ec(110,"button",60),l.lc("click",(function(){return t.commonMethods.closeAllPopup()})),l.Sc(111,"Close"),l.dc(),l.dc(),l.dc(),l.dc()),2&e&&(l.Mb(9),l.uc("ngForOf",t.DataService.breadcrumblist),l.Mb(15),l.uc("formGroup",t.registerBillerForm),l.Mb(16),l.uc("ngForOf",t.billerCategory),l.Mb(1),l.uc("ngIf",t.registerBillerForm.controls.billerCategory.hasError("required")&&(t.registerBillerForm.controls.billerCategory.dirty||t.registerBillerForm.controls.billerCategory.touched)),l.Mb(8),l.uc("ngForOf",t.stateList),l.Mb(1),l.uc("ngIf",t.registerBillerForm.controls.billerLocation.hasError("required")&&(t.registerBillerForm.controls.billerLocation.dirty||t.registerBillerForm.controls.billerLocation.touched)),l.Mb(8),l.uc("ngIf",""!=t.selectedBoard.biller_logo),l.Mb(1),l.Uc(" ",t.selectedBoard.biller_legal_name,""),l.Mb(1),l.uc("value",t.selectedBoard.billerid),l.Mb(2),l.uc("ngForOf",t.finalBillerList),l.Mb(1),l.uc("ngIf",""==t.selectedBoard.billerid&&t.submitClicked),l.Mb(7),l.uc("ngIf",t.registerBillerForm.controls.shortName.hasError("required")&&(t.registerBillerForm.controls.shortName.dirty||t.registerBillerForm.controls.shortName.touched)),l.Mb(1),l.uc("ngIf",""!=t.selectedBoard.billerid),l.Mb(22),l.vc("src",t.billSampleURL,l.Jc))},directives:[o.s,r.I,r.t,r.k,r.E,r.s,r.i,r.x,r.H,o.t,r.c],pipes:[h.a],styles:[""]}),e})()}];let w=(()=>{class e{}return e.\u0275mod=l.Wb({type:e}),e.\u0275inj=l.Vb({factory:function(t){return new(t||e)},imports:[[s.g.forChild(P)],s.g]}),e})(),I=(()=>{class e{}return e.\u0275mod=l.Wb({type:e}),e.\u0275inj=l.Vb({factory:function(t){return new(t||e)},imports:[[o.c,w,c.a,r.C,r.m]]}),e})()}}]);