(window.webpackJsonp=window.webpackJsonp||[]).push([[333],{"6Hm5":function(e,c,i){"use strict";i.r(c),i.d(c,"PendingRequestConfirmationModule",(function(){return E}));var t=i("ofXK"),n=i("XNiG"),o=i("fXoL"),s=i("tyNb"),a=i("EnSQ"),d=i("8vSS"),r=i("L7Xq"),l=i("5IsW"),p=i("H9Rt"),h=i("TiA8"),v=i("Ygbc"),u=i("Eioz"),g=i("au7T"),b=i("4bKs"),S=i("3Pt+"),A=i("fUdP");function M(e,c){1&e&&(o.ec(0,"h6"),o.Sc(1),o.qc(2,"translate"),o.dc()),2&e&&(o.Mb(1),o.Tc(o.rc(2,1,"FROM_UPI_ID")))}function f(e,c){1&e&&(o.ec(0,"h6"),o.Sc(1),o.qc(2,"translate"),o.dc()),2&e&&(o.Mb(1),o.Uc(" ",o.rc(2,1,"TO_BE_RECEIVED_FROM"),""))}function m(e,c){1&e&&(o.ec(0,"h6"),o.Sc(1),o.qc(2,"translate"),o.dc()),2&e&&(o.Mb(1),o.Tc(o.rc(2,1,"TO_PAYEE")))}function I(e,c){1&e&&(o.ec(0,"h6"),o.Sc(1),o.qc(2,"translate"),o.dc()),2&e&&(o.Mb(1),o.Tc(o.rc(2,1,"TO_BE_SENT_TO")))}function C(e,c){if(1&e&&(o.ec(0,"li",12),o.ec(1,"div",13),o.ec(2,"div",8),o.ec(3,"div",7),o.ec(4,"div",14),o.ec(5,"h6"),o.Sc(6),o.qc(7,"translate"),o.dc(),o.ec(8,"h5"),o.Sc(9),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc()),2&e){const e=o.pc();o.Mb(6),o.Tc(o.rc(7,2,"INVOICE_NAME")),o.Mb(3),o.Tc(e.pendingWithMe.invoiceName)}}function N(e,c){if(1&e&&(o.ec(0,"li",12),o.ec(1,"div",13),o.ec(2,"div",8),o.ec(3,"div",7),o.ec(4,"div",14),o.ec(5,"h6"),o.Sc(6),o.qc(7,"translate"),o.dc(),o.ec(8,"h5"),o.Sc(9),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc()),2&e){const e=o.pc();o.Mb(6),o.Tc(o.rc(7,2,"INVOICE_NUMBER")),o.Mb(3),o.Tc(e.pendingWithMe.invoiceNumber)}}function T(e,c){if(1&e&&(o.ec(0,"li",12),o.ec(1,"div",13),o.ec(2,"div",8),o.ec(3,"div",7),o.ec(4,"div",14),o.ec(5,"h6"),o.Sc(6),o.qc(7,"translate"),o.dc(),o.ec(8,"h5"),o.Sc(9),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc()),2&e){const e=o.pc();o.Mb(6),o.Tc(o.rc(7,2,"INVOICE_DATE")),o.Mb(3),o.Tc(e.pendingWithMe.invoiceDate?e.pendingWithMe.invoiceDate:"-")}}function D(e,c){if(1&e){const e=o.fc();o.ec(0,"li",12),o.ec(1,"div",13),o.ec(2,"div",8),o.ec(3,"div",7),o.ec(4,"div",14),o.ec(5,"h6"),o.Sc(6),o.qc(7,"translate"),o.dc(),o.ec(8,"h5",34),o.lc("click",(function(){return o.Hc(e),o.pc().viewInvoice()})),o.Sc(9),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc()}if(2&e){const e=o.pc();o.Mb(6),o.Tc(o.rc(7,2,"INVOICE_URL")),o.Mb(3),o.Tc(e.pendingWithMe.refUrl)}}const P=function(){return{standalone:!0}};function y(e,c){if(1&e){const e=o.fc();o.ec(0,"div",35),o.ec(1,"div",36),o.ec(2,"div"),o.ec(3,"div",37),o.ec(4,"label",38),o.Sc(5),o.qc(6,"translate"),o.ec(7,"input",39),o.lc("ngModelChange",(function(c){return o.Hc(e),o.pc().consentFlag=c})),o.dc(),o.Zb(8,"span",40),o.dc(),o.dc(),o.dc(),o.dc(),o.dc()}if(2&e){const e=o.pc();o.Mb(5),o.Uc("",o.rc(6,3,"I_AGREE_TO_SHARE_MY_PAN_AADHAR_DETAILS_MSG")," "),o.Mb(2),o.uc("ngModel",e.consentFlag)("ngModelOptions",o.xc(5,P))}}const _=[{path:"",component:(()=>{class e{constructor(e,c,i,t,n,o,s,a,d,r,l,p,h,v){this.router=e,this.DataService=c,this.pendingReqService=i,this.http=t,this.constant=n,this.localStorage=o,this.location=s,this.npciAndroidService=a,this.npciIosService=d,this.translatePipe=r,this.commonMethod=l,this.loaderService=p,this.ngZone=h,this.translate=v,this.headerdata={headerType:"TitleClose",titleName:"CONFIRMATION",footertype:"none"},this.consentFlag=!1}ngOnInit(){this.DataService.changeMessage(this.headerdata),createGlobalNavMore(),this.pendingWithMe=this.DataService.pendingWithMe,this.DataService.backURLCollectVPAList=this.router.url,history.pushState({},this.DataService.isAcceptClicked?"pendingRequestUpi":"pendingDetailView",this.location.prepareExternalUrl(this.DataService.isAcceptClicked?"pendingRequestUpi":"pendingDetailView")),history.pushState({},"self",this.location.prepareExternalUrl(this.router.url));let e=JSON.parse(JSON.stringify(this.DataService.vpaAddressList));0==this.DataService.upiCollectVpaList.length&&(this.DataService.upiCollectVpaList=e.map(e=>(e.isSelected=!(!e.isSelected&&e.paymentAddress.toLowerCase()!=this.pendingWithMe.payerAddress.toLowerCase()),e.accounts.map(e=>(e.isSelected=!(!e.isSelected&&"Y"!=e.isDefaultAccount),e)),e))),this.getLinkedAccount()}goToPage(e){this.router.navigateByUrl("/"+e)}acceptReq(){if("N"==this.VPAAccountDetails.mbeba)this.ngZone.run(()=>{this.DataService.information=this.translatePipe.transform("UPI_PIN_NOT_SET"),this.DataService.informationLabel=this.translatePipe.transform("INFORMATION"),this.DataService.primaryBtnText=this.translatePipe.transform("OK"),this.commonMethod.openPopup("div.popup-bottom.show-common-info")});else{let e=this.VPAAccountDetails;console.log("ACCEPT accountDetails => ",this.pendingWithMe),e.ifsc.includes("PSIB")?(this.DataService.preApprovedFlowIdentifier="collectAccept",this.DataService.preApprovedBankName=e.bankName,this.DataService.preApprovedAccNo=e.maskedAccountNumber,this.DataService.preApprovedAmount=this.pendingWithMe.amount,this.DataService.preApprovedPreviousPageUrl=this.router.url,this.router.navigateByUrl("/transactionPin")):this.callNpciLibrary(e)}}callNpciLibrary(e){if(this.loaderService.showLoader(),console.log("calling npci library..."),console.log("accountData",e),window.hasOwnProperty("cordova")){var c=new n.a;this.DataService.platform.toLowerCase()==this.constant.val_android?(console.log("Calling NPCI Android service..."),this.npciAndroidService.initData(),this.npciAndroidService.androidStartCLLibrary(e,this.constant.val_npci_flow_acceptPendingRequest,c).subscribe(e=>{if(console.log("Android StartCLLibrary Success => ",e),e.hasOwnProperty("status")&&"00"==e.status){var c=this.pendingReqService.setAcceptCollectReq(this.pendingWithMe,e,this.consentFlag);this.UpiApiCall(c)}},e=>{console.log("Android StartCLLibrary error => ",e)})):this.DataService.platform.toLowerCase()==this.constant.val_ios?(console.log("Calling NPCI iOS service..."),this.npciIosService.initData(),this.npciIosService.selectedFlow=this.constant.val_npci_pendingRequest,this.npciIosService.getTransactionId().subscribe(i=>{console.log("transactionId Received => ",i),this.npciIosService.txnId=i,this.npciIosService.iosStartCLLibrary(e,this.constant.val_npci_flow_sendMoney_ios,c).subscribe(e=>{if(console.log("iOS StartCLLibrary Success => ",e),e&&e.credkey){var c=this.pendingReqService.setAcceptCollectReq(this.pendingWithMe,e,this.consentFlag);this.UpiApiCall(c)}else console.log("NPCI flow cancelled...")},e=>{console.log("iOS StartCLLibrary error => ",e)})})):console.log("unknown platform = ",this.DataService.platform)}else console.log("Cordova not available... unable to start NPCI Library on web")}UpiApiCall(e){this.http.callBankingAPIService(e,this.localStorage.getLocalStorage(this.constant.storage_deviceId),this.constant.upiserviceName_PROCESSUPISERVICESESSION,!0).subscribe(e=>{let c=e.responseParameter.upiResponse;if(this.DataService.upiCallTransactionHistoryApi=!0,"00"==c.status)switch(c.subActionId){case this.constant.upiserviceName_ACCEPTNOTIFICATION:this.DataService.pendindReqResp=c,this.DataService.pendingBlockSuccessURL="pendingRequestUpi",console.log("upiserviceName_ACCEPTNOTIFICATION ",JSON.stringify(c)),this.ngZone.run(()=>{this.goToPage("pendingSuccess")})}},e=>{console.log("ERROR!",e)})}getLinkedAccount(){this.DataService.upiCollectVpaList.length>0&&(this.VPADetails=this.DataService.upiCollectVpaList.find(e=>1==e.isSelected),this.VPAAccountDetails=this.VPADetails.accounts.find(e=>1==e.isSelected),this.DataService.collectAcceptVPADetails=this.VPAAccountDetails,this.DataService.collectAcceptVPADetails.paymentAddress=this.VPADetails.paymentAddress)}routePage(e){"collectUpiIdList"==e?this.DataService.checkIfUPIIdExists(this.pendingWithMe.payerAddress)?this.router.navigateByUrl(e):this.openPopup("pendingReq-NoVPA"):this.router.navigateByUrl(e)}ngOnDestroy(){this.DataService.isAcceptClicked=!1}viewInvoice(){cordova.InAppBrowser.open(this.pendingWithMe.refUrl,"_blank","location=no")}openPopup(e){this.commonMethod.openPopup("div.popup-bottom."+e)}closePopup(e){this.commonMethod.closePopup("div.popup-bottom."+e)}}return e.\u0275fac=function(c){return new(c||e)(o.Yb(s.c),o.Yb(a.a),o.Yb(d.a),o.Yb(r.a),o.Yb(l.a),o.Yb(p.a),o.Yb(t.n),o.Yb(h.a),o.Yb(v.a),o.Yb(u.a),o.Yb(g.a),o.Yb(b.a),o.Yb(o.H),o.Yb(u.a))},e.\u0275cmp=o.Sb({type:e,selectors:[["app-pending-request-confirmation"]],decls:116,vars:51,consts:[[1,"main"],[1,"right-main-column","minus-rt-col","mar-custom"],[1,"right-col-container"],[1,"body-page-container"],[1,"container-fluid"],[1,"row"],[1,"bg-section"],[1,"col-12"],[1,"row1"],[1,"col-sm-12","col-12","col-md-12"],[1,"white-box2","pad-customise"],[1,"payment-list"],[1,"bor-n"],[1,"full-container"],[1,"left-info1"],[4,"ngIf"],[1,"col-12","col-md-12"],[1,"set",3,"click"],["class","bor-n",4,"ngIf"],[1,"full-info"],[1,"custom-t"],["class","col-12 mt-4",4,"ngIf"],[1,"footer-container","sticky-actions"],[1,"footer-inactions","minus-rt-col"],[1,"col-12","col-md-12","col-lg-12","text-center"],[1,"ux-button","primary","md",3,"click"],[1,"powered-logo"],["src","assets/images/logo/powered-upi-logo.svg","alt","powered-upi-logo"],[1,"popup-bottom","pendingReq-NoVPA"],[1,"text-center"],["src","./assets/images/svg/information.svg","alt","information-icon"],[1,"row1","mt-2"],[1,"col-12","text-center"],["type","button",1,"ux-button","primary","submit-btn",3,"click"],[3,"click"],[1,"col-12","mt-4"],[1,"text-left"],[1,"ux-selection1","mar-rcustom"],[1,"fsmall"],["type","checkbox","name","consentFlag",3,"ngModel","ngModelOptions","ngModelChange"],[1,"checkmark"]],template:function(e,c){1&e&&(o.ec(0,"div",0),o.ec(1,"div",1),o.ec(2,"div",2),o.ec(3,"div",3),o.ec(4,"div",4),o.ec(5,"div",5),o.ec(6,"div",6),o.ec(7,"div",7),o.ec(8,"div",8),o.ec(9,"div",9),o.ec(10,"div",8),o.ec(11,"div",9),o.ec(12,"div",10),o.ec(13,"ul",11),o.ec(14,"li",12),o.ec(15,"div",13),o.ec(16,"div",8),o.ec(17,"div",7),o.ec(18,"div",14),o.Rc(19,M,3,3,"h6",15),o.Rc(20,f,3,3,"h6",15),o.ec(21,"h5"),o.Sc(22),o.qc(23,"translate"),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.ec(24,"li",12),o.ec(25,"div",13),o.ec(26,"div",8),o.ec(27,"div",7),o.ec(28,"div",14),o.ec(29,"h6"),o.Sc(30),o.qc(31,"translate"),o.dc(),o.ec(32,"h5"),o.Sc(33),o.dc(),o.dc(),o.dc(),o.dc(),o.ec(34,"div",8),o.ec(35,"div",16),o.ec(36,"div",14),o.ec(37,"h5"),o.ec(38,"a",17),o.lc("click",(function(){return c.routePage("collectUpiIdList")})),o.Sc(39),o.qc(40,"translate"),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.ec(41,"li",12),o.ec(42,"div",13),o.ec(43,"div",8),o.ec(44,"div",7),o.ec(45,"div",14),o.ec(46,"h6"),o.Sc(47),o.qc(48,"translate"),o.dc(),o.ec(49,"h5"),o.Sc(50),o.qc(51,"customcurrency"),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.ec(52,"li",12),o.ec(53,"div",13),o.ec(54,"div",8),o.ec(55,"div",7),o.ec(56,"div",14),o.Rc(57,m,3,3,"h6",15),o.Rc(58,I,3,3,"h6",15),o.ec(59,"h5"),o.Sc(60),o.qc(61,"translate"),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.ec(62,"li",12),o.ec(63,"div",13),o.ec(64,"div",8),o.ec(65,"div",7),o.ec(66,"div",14),o.ec(67,"h6"),o.Sc(68),o.qc(69,"translate"),o.dc(),o.ec(70,"h5"),o.Sc(71),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.Rc(72,C,10,4,"li",18),o.Rc(73,N,10,4,"li",18),o.Rc(74,T,10,4,"li",18),o.Rc(75,D,10,4,"li",18),o.ec(76,"li",12),o.ec(77,"div",13),o.ec(78,"div",8),o.ec(79,"div",7),o.ec(80,"div",19),o.ec(81,"em",20),o.ec(82,"span"),o.Sc(83,"*"),o.dc(),o.Sc(84),o.qc(85,"translate"),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.Rc(86,y,9,6,"div",21),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.ec(87,"div",22),o.ec(88,"div",23),o.ec(89,"div",4),o.ec(90,"div",5),o.ec(91,"div",24),o.ec(92,"button",25),o.lc("click",(function(){return c.acceptReq()})),o.Sc(93),o.qc(94,"translate"),o.dc(),o.dc(),o.dc(),o.ec(95,"div",5),o.ec(96,"div",24),o.ec(97,"div",26),o.Zb(98,"img",27),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.dc(),o.ec(99,"div",28),o.ec(100,"div",8),o.ec(101,"div",7),o.ec(102,"h4",29),o.Zb(103,"img",30),o.Sc(104),o.qc(105,"translate"),o.dc(),o.dc(),o.dc(),o.ec(106,"div",8),o.ec(107,"div",7),o.ec(108,"p"),o.Sc(109),o.qc(110,"translate"),o.dc(),o.dc(),o.dc(),o.ec(111,"div",31),o.ec(112,"div",32),o.ec(113,"button",33),o.lc("click",(function(){return c.closePopup("pendingReq-NoVPA")})),o.Sc(114),o.qc(115,"translate"),o.dc(),o.dc(),o.dc(),o.dc()),2&e&&(o.Mb(19),o.uc("ngIf","MANDATE_NOTIFICATION"!=c.pendingWithMe.notificationType),o.Mb(1),o.uc("ngIf","MANDATE_NOTIFICATION"==(null==c.pendingWithMe?null:c.pendingWithMe.notificationType)),o.Mb(2),o.Vc("",o.rc(23,26,"UPI_ID")," : ",c.pendingWithMe.payerAddress,""),o.Mb(8),o.Tc(o.rc(31,28,"LINKED_ACCOUNT")),o.Mb(3),o.Vc("",c.VPAAccountDetails.accType," ",c.VPAAccountDetails.maskedAccountNumber,""),o.Mb(6),o.Uc(" ",o.rc(40,30,"CHANGE_AC")," "),o.Mb(8),o.Tc(o.rc(48,32,"AMOUNT")),o.Mb(3),o.Uc(" ",o.sc(51,34,c.pendingWithMe.amount,"symbol"),""),o.Mb(7),o.uc("ngIf","MANDATE_NOTIFICATION"!=c.pendingWithMe.notificationType),o.Mb(1),o.uc("ngIf","MANDATE_NOTIFICATION"==c.pendingWithMe.notificationType),o.Mb(2),o.Vc("",o.rc(61,37,"UPI_ID")," : ",c.pendingWithMe.payeeAddress,""),o.Mb(8),o.Tc(o.rc(69,39,"PAYEE_NAME")),o.Mb(3),o.Tc(c.pendingWithMe.payeeName),o.Mb(1),o.uc("ngIf","Y"==c.pendingWithMe.isGstEnable||"0000"!=c.pendingWithMe.payeeCode),o.Mb(1),o.uc("ngIf","Y"==c.pendingWithMe.isGstEnable||"0000"!=c.pendingWithMe.payeeCode),o.Mb(1),o.uc("ngIf","Y"==c.pendingWithMe.isGstEnable||"0000"!=c.pendingWithMe.payeeCode),o.Mb(1),o.uc("ngIf","0000"!=c.pendingWithMe.payeeCode),o.Mb(9),o.Uc(" ",o.rc(85,41,"NPCI_CIRCULAR_COLLECT_MSG"),""),o.Mb(2),o.uc("ngIf","Y"==c.pendingWithMe.isGstEnable),o.Mb(7),o.Tc(o.rc(94,43,"CONFIRM")),o.Mb(11),o.Uc(" ",o.rc(105,45,"INFORMATION")," "),o.Mb(5),o.Uc(" ",o.rc(110,47,"VPA_DOES_NOT_EXISTS")," "),o.Mb(5),o.Tc(o.rc(115,49,"OK")))},directives:[t.t,S.a,S.s,S.v],pipes:[u.a,A.a],styles:[""]}),e})()}];let O=(()=>{class e{}return e.\u0275mod=o.Wb({type:e}),e.\u0275inj=o.Vb({factory:function(c){return new(c||e)},imports:[[s.g.forChild(_)],s.g]}),e})();var R=i("PCNd");let E=(()=>{class e{}return e.\u0275mod=o.Wb({type:e}),e.\u0275inj=o.Vb({factory:function(c){return new(c||e)},imports:[[t.c,S.m,S.C,R.a,O]]}),e})()}}]);