(window.webpackJsonp=window.webpackJsonp||[]).push([[67,349],{"4JLI":function(t,e,a){"use strict";a.r(e),a.d(e,"RaiseComplaintModule",(function(){return k}));var r=a("ofXK"),i=a("tyNb"),c=a("3Pt+"),o=a("xgUN"),s=a("1vMV"),n=a("fXoL"),l=a("EnSQ"),m=a("L7Xq"),u=a("H9Rt"),d=a("5IsW"),p=a("TaOT"),h=a("TiA8"),v=a("Ygbc"),S=a("RgTW"),f=a("Geda"),C=a("kpqM"),b=a("Eioz");function g(t,e){1&t&&(n.ec(0,"p",35),n.Sc(1),n.qc(2,"translate"),n.dc()),2&t&&(n.Mb(1),n.Tc(n.rc(2,1,"ENTER_ALPHABET_NUMBER_ERROR")))}function R(t,e){if(1&t){const t=n.fc();n.ec(0,"div",12),n.ec(1,"a",36),n.lc("click",(function(){return n.Hc(t),n.pc().selectTransaction()})),n.Sc(2),n.qc(3,"translate"),n.dc(),n.dc()}2&t&&(n.Mb(2),n.Tc(n.rc(3,1,"SELECT_TRANSACTION")))}function E(t,e){1&t&&(n.ec(0,"p",37),n.Sc(1),n.qc(2,"translate"),n.dc()),2&t&&(n.Mb(1),n.Uc(" ",n.rc(2,1,"ENTER_EMAIL_ID_ERROR")," "))}function T(t,e){1&t&&(n.ec(0,"p",37),n.Sc(1),n.qc(2,"translate"),n.dc()),2&t&&(n.Mb(1),n.Uc(" ",n.rc(2,1,"INVALID_EMAIL_ID_ERROR")," "))}function D(t,e){1&t&&(n.ec(0,"p",35),n.Sc(1),n.qc(2,"translate"),n.dc()),2&t&&(n.Mb(1),n.Tc(n.rc(2,1,"ENTER_ALPHABET_NUMBER_ERROR")))}function I(t,e){1&t&&(n.ec(0,"p",37),n.Sc(1),n.qc(2,"translate"),n.dc()),2&t&&(n.Mb(1),n.Uc(" ",n.rc(2,1,"ENTER_AMOUNT_ERROR")," "))}function A(t,e){1&t&&(n.ec(0,"p",35),n.Sc(1),n.qc(2,"translate"),n.dc()),2&t&&(n.Mb(1),n.Tc(n.rc(2,1,"ENTER_NUMBER_ERROR")))}function M(t,e){1&t&&(n.ec(0,"p",37),n.Sc(1),n.qc(2,"translate"),n.dc()),2&t&&(n.Mb(1),n.Uc(" ",n.rc(2,1,"ENTER_SUBJECT_ERROR")," "))}function y(t,e){1&t&&(n.ec(0,"p",35),n.Sc(1),n.qc(2,"translate"),n.dc()),2&t&&(n.Mb(1),n.Tc(n.rc(2,1,"ENTER_DESCRIPTION_CHARACTOR_ERROR")))}function N(t,e){1&t&&(n.ec(0,"p",37),n.Sc(1),n.qc(2,"translate"),n.dc()),2&t&&(n.Mb(1),n.Uc(" ",n.rc(2,1,"ENTER_DESCRIPTION_ERROR")," "))}function _(t,e){1&t&&(n.ec(0,"p",35),n.Sc(1),n.qc(2,"translate"),n.dc()),2&t&&(n.Mb(1),n.Tc(n.rc(2,1,"ENTER_DESCRIPTION_CHARACTOR_ERROR")))}const q=function(t){return{"ux-disabled":t}},O=[{path:"",component:(()=>{class t{constructor(t,e,a,r,i,c,o,s,n,l){this.router=t,this.DataService=e,this.http=a,this.localStorage=r,this.constant=i,this.location=c,this.formValidation=o,this.npciAndroidService=s,this.npciIosService=n,this.trackStatusService=l,this.headerdata={headerType:"CloseNewHeader",titleName:"RAISE_COMPLAINT",footertype:"none"}}ngOnInit(){$("#amt").autoNumeric("init",{aSign:"\u20b9 "}),this.DataService.changeMessage(this.headerdata),raiseComplaintDetails(),console.log("this.upiTrans",this.upiTrans),history.pushState({},"raiseComplaintConfirmation"==this.DataService.previousPageUrl||this.DataService.isRaiseComplaint?"upiDashboard":this.DataService.previousPageUrl,this.location.prepareExternalUrl("raiseComplaintConfirmation"==this.DataService.previousPageUrl||this.DataService.isRaiseComplaint?"upiDashboard":this.DataService.previousPageUrl)),history.pushState({},"self",this.location.prepareExternalUrl(this.router.url)),this.buildForm(),this.setModel()}setModel(){}goToPage(t){this.router.navigateByUrl("/"+t)}buildForm(){this.raiseComplaintForm=new c.j({transactionID:new c.g("",[c.G.required,c.G.pattern(/(^[a-z0-9A-Z]*$)/)]),customerEmail:new c.g(this.DataService.upiUserEmailAdress,[c.G.pattern(this.constant.email_regex),c.G.required]),rrn:new c.g("",[c.G.required,c.G.pattern(/(^[a-z0-9A-Z]*$)/)]),subject:new c.g("",[c.G.required,c.G.pattern(/(^[a-z0-9A-Z.',\- ]*$)/)]),amount:new c.g("",[c.G.required,c.G.pattern(/(^[0-9.\u20b9, ]*$)/)]),description:new c.g("",[c.G.required,c.G.pattern(/(^[a-z0-9A-Z.',\- ]*$)/)])}),this.DataService.isRaiseComplaint&&(this.raiseComplaintForm.get("amount").disable(),this.raiseComplaintForm.patchValue({transactionID:this.DataService.raiseComplaint.transactionID,customerEmail:this.DataService.raiseComplaint.customerEmail,rrn:this.DataService.raiseComplaint.rrn,amount:this.DataService.raiseComplaint.txnAmount,subject:this.DataService.raiseComplaint.subject,description:this.DataService.raiseComplaint.description}))}raiseRequest(){if(this.raiseComplaintForm.markAllAsTouched(),this.raiseComplaintForm.valid){let{customerEmail:t,subject:e,description:a,rrn:r,transactionID:i,amount:c}=this.raiseComplaintForm.value;this.DataService.raiseComplaint?(this.DataService.raiseComplaint.customerEmail=t||this.DataService.raiseComplaint.customerEmail,this.DataService.raiseComplaint.subject=e||this.DataService.raiseComplaint.subject,this.DataService.raiseComplaint.description=a||this.DataService.raiseComplaint.description):this.DataService.raiseComplaint=(new o.a).deserialize({rrn:r,transactionID:i,complaintType:"Transaction",txnAmount:c.replace(/[^.0-9]+/g,""),payerAddress:this.getDefaultVPA().paymentAddress,subject:e,description:a,customerEmail:t}),console.log("dataService RaiseComplaint ",this.DataService.raiseComplaint),0==this.DataService.isTrackStatus?this.trackStatus():this.goToPage("raiseComplaintConfirmation")}}trackStatus(){this.DataService.trackStatus=(new s.a).deserialize({rrn:this.DataService.raiseComplaint.rrn,transactionID:this.DataService.raiseComplaint.transactionID,complaintType:this.DataService.raiseComplaint.complaintType,txnAmount:this.DataService.raiseComplaint.txnAmount.replace(/[^.0-9]+/g,""),payerAddress:this.getDefaultVPA().paymentAddress,payeeAddress:this.DataService.raiseComplaint.payeeAddress,transactionDate:this.DataService.raiseComplaint.transactionDate,refID:this.DataService.raiseComplaint.refID,initiationMode:this.DataService.raiseComplaint.initiationMode,txnStatus:"",transactionType:"",payeeCode:""}),this.DataService.platform.toLowerCase()==this.constant.val_android?this.npciAndroidService.getTransactionId().subscribe(t=>{console.log("Android transactionId Received => ",t),this.transactionId=t;var e=this.trackStatusService.getTrackStatusReq(this.DataService.trackStatus,this.transactionId);this.UpiApiCall(e)}):this.DataService.platform.toLowerCase()==this.constant.val_ios&&this.npciIosService.getTransactionId().subscribe(t=>{console.log("IOS transactionId Received => ",t),this.transactionId=t;var e=this.trackStatusService.getTrackStatusReq(this.DataService.trackStatus,this.transactionId);this.UpiApiCall(e)})}UpiApiCall(t){this.http.callBankingAPIService(t,this.localStorage.getLocalStorage(this.constant.storage_deviceId),this.constant.upiserviceName_PROCESSUPISERVICESESSION,!0).subscribe(t=>{let e=t.responseParameter.upiResponse;if("00"==e.status)switch(e.subActionId){case this.constant.upiserviceName_TRACKSTATUS:this.DataService.trackStatusRes=e.responseParameter,this.router.navigateByUrl("trackStatus")}},t=>{console.log("ERROR!",t)})}ngOnDestroy(){}getDefaultVPA(){return this.DataService.vpaAddressList.find(t=>"Y"==t.default)}selectTransaction(){this.DataService.isRaiseComplaint=!0,this.DataService.navigationFromDashboard=!0,this.router.navigateByUrl("/transactionList")}formatCurrency(t){this.formValidation.formatDynamicCurrency("amt",this.raiseComplaintForm)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(i.c),n.Yb(l.a),n.Yb(m.a),n.Yb(u.a),n.Yb(d.a),n.Yb(r.n),n.Yb(p.a),n.Yb(h.a),n.Yb(v.a),n.Yb(S.a))},t.\u0275cmp=n.Sb({type:t,selectors:[["app-raise-complaint"]],decls:76,vars:63,consts:[[1,"main"],[3,"formGroup","ngSubmit"],[1,"right-main-column","minus-rt-col","mar-custom"],[1,"right-col-container"],[1,"body-page-container"],[1,"container-fluid"],[1,"row"],[1,"bg-section"],[1,"col-12"],[1,"row1"],[1,"col-sm-12","col-12","col-md-12"],[1,"white-bg1"],[1,"col-12","col-sm-12","col-md-12"],[1,"ux-input",3,"ngClass"],["for","transactionID"],["type","text","name","transactionID","formControlName","transactionID",3,"placeholder","readonly"],["class","text-center error-message",4,"ngIf"],["class","col-12 col-sm-12 col-md-12",4,"ngIf"],[1,"ux-input"],["for","email"],["type","email","maxlength","100","formControlName","customerEmail","name","email",3,"placeholder"],["class","error-message",4,"ngIf"],["for","refeId"],["type","text","formControlName","rrn","name","refenId",3,"placeholder","readonly"],["for","transactionAmt"],["id","amt","type","text","inputmode","decimal","autocomplete","off","formControlName","amount","limit-to","12",3,"placeholder","blur"],["for","subject"],["type","text","alphaNumericAllowedSpecialChars","","formControlName","subject","name","subject","limit-to","60",3,"placeholder"],["for","description"],["limit-to","250","alphaNumericAllowedSpecialChars","","type","text","formControlName","description","name","description",3,"placeholder"],[1,"footer-container","sticky-actions"],[1,"footer-inactions","minus-rt-col"],[1,"col-12","col-md-12","col-lg-12","text-center"],["type","submit",1,"ux-button","primary","md",3,"disabled"],[1,"sticky-actions-spacer"],[1,"text-center","error-message"],[1,"show-link2",3,"click"],[1,"error-message"]],template:function(t,e){1&t&&(n.ec(0,"div",0),n.ec(1,"form",1),n.lc("ngSubmit",(function(){return e.raiseRequest()})),n.ec(2,"div",2),n.ec(3,"div",3),n.ec(4,"div",4),n.ec(5,"div",5),n.ec(6,"div",6),n.ec(7,"div",7),n.ec(8,"div",8),n.ec(9,"div",9),n.ec(10,"div",10),n.ec(11,"div",11),n.ec(12,"div",9),n.ec(13,"div",12),n.ec(14,"div",13),n.ec(15,"label",14),n.Sc(16),n.qc(17,"translate"),n.dc(),n.Zb(18,"input",15),n.qc(19,"translate"),n.Zb(20,"p"),n.Rc(21,g,3,3,"p",16),n.dc(),n.dc(),n.Rc(22,R,4,3,"div",17),n.ec(23,"div",12),n.ec(24,"div",18),n.ec(25,"label",19),n.Sc(26),n.qc(27,"translate"),n.dc(),n.Zb(28,"input",20),n.qc(29,"translate"),n.Rc(30,E,3,3,"p",21),n.Rc(31,T,3,3,"p",21),n.dc(),n.dc(),n.ec(32,"div",12),n.ec(33,"div",13),n.ec(34,"label",22),n.Sc(35),n.qc(36,"translate"),n.dc(),n.Zb(37,"input",23),n.qc(38,"translate"),n.Rc(39,D,3,3,"p",16),n.dc(),n.dc(),n.ec(40,"div",12),n.ec(41,"div",13),n.ec(42,"label",24),n.Sc(43),n.qc(44,"translate"),n.dc(),n.ec(45,"input",25),n.lc("blur",(function(t){return e.formatCurrency(t.target.value)})),n.qc(46,"translate"),n.dc(),n.Rc(47,I,3,3,"p",21),n.Rc(48,A,3,3,"p",16),n.dc(),n.dc(),n.ec(49,"div",12),n.ec(50,"div",18),n.ec(51,"label",26),n.Sc(52),n.qc(53,"translate"),n.dc(),n.Zb(54,"input",27),n.qc(55,"translate"),n.Rc(56,M,3,3,"p",21),n.Rc(57,y,3,3,"p",16),n.dc(),n.dc(),n.ec(58,"div",12),n.ec(59,"div",18),n.ec(60,"label",28),n.Sc(61),n.qc(62,"translate"),n.dc(),n.Zb(63,"input",29),n.qc(64,"translate"),n.Rc(65,N,3,3,"p",21),n.Rc(66,_,3,3,"p",16),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.ec(67,"div",30),n.ec(68,"div",31),n.ec(69,"div",5),n.ec(70,"div",6),n.ec(71,"div",32),n.ec(72,"button",33),n.Sc(73),n.qc(74,"translate"),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.Zb(75,"div",34),n.dc(),n.dc(),n.dc(),n.dc()),2&t&&(n.Mb(1),n.uc("formGroup",e.raiseComplaintForm),n.Mb(13),n.uc("ngClass",n.yc(57,q,e.DataService.isRaiseComplaint)),n.Mb(2),n.Tc(n.rc(17,31,"TRANSACTION_ID")),n.Mb(2),n.vc("placeholder",n.rc(19,33,"ENTER_TRANSACTION_ID")),n.uc("readonly",e.DataService.isRaiseComplaint),n.Mb(3),n.uc("ngIf",e.raiseComplaintForm.controls.transactionID.hasError("pattern")),n.Mb(1),n.uc("ngIf",!e.DataService.isTrackStatus),n.Mb(4),n.Tc(n.rc(27,35,"EMAIL_ID")),n.Mb(2),n.vc("placeholder",n.rc(29,37,"ENTER_EMAIL")),n.Mb(2),n.uc("ngIf",e.raiseComplaintForm.controls.customerEmail.hasError("required")&&e.raiseComplaintForm.controls.customerEmail.touched),n.Mb(1),n.uc("ngIf",!e.raiseComplaintForm.controls.customerEmail.hasError("required")&&e.raiseComplaintForm.controls.customerEmail.touched&&e.raiseComplaintForm.controls.customerEmail.hasError("email")),n.Mb(2),n.uc("ngClass",n.yc(59,q,e.DataService.isRaiseComplaint)),n.Mb(2),n.Tc(n.rc(36,39,"RRN_NO_REFERENCE_ID")),n.Mb(2),n.vc("placeholder",n.rc(38,41,"ENTER_RRN_NO_REFERENCE_ID")),n.uc("readonly",e.DataService.isRaiseComplaint),n.Mb(2),n.uc("ngIf",e.raiseComplaintForm.controls.rrn.hasError("pattern")),n.Mb(2),n.uc("ngClass",n.yc(61,q,e.DataService.isRaiseComplaint)),n.Mb(2),n.Tc(n.rc(44,43,"TRANSACTION_AMOUNT")),n.Mb(2),n.vc("placeholder",n.rc(46,45,"ENTER_TRANSACTION_AMOUNT")),n.Mb(2),n.uc("ngIf",e.raiseComplaintForm.controls.amount.hasError("required")&&e.raiseComplaintForm.controls.amount.touched),n.Mb(1),n.uc("ngIf",e.raiseComplaintForm.controls.amount.hasError("pattern")),n.Mb(4),n.Tc(n.rc(53,47,"SUBJECT")),n.Mb(2),n.vc("placeholder",n.rc(55,49,"ENTER_SUBJECT")),n.Mb(2),n.uc("ngIf",e.raiseComplaintForm.controls.subject.hasError("required")&&e.raiseComplaintForm.controls.subject.touched),n.Mb(1),n.uc("ngIf",e.raiseComplaintForm.controls.subject.hasError("pattern")),n.Mb(4),n.Tc(n.rc(62,51,"DESCRIPTION")),n.Mb(2),n.vc("placeholder",n.rc(64,53,"ENTER_DESCRIPTION")),n.Mb(2),n.uc("ngIf",e.raiseComplaintForm.controls.description.hasError("required")&&e.raiseComplaintForm.controls.description.touched),n.Mb(1),n.uc("ngIf",e.raiseComplaintForm.controls.description.hasError("pattern")),n.Mb(6),n.uc("disabled",e.raiseComplaintForm.invalid),n.Mb(1),n.Tc(n.rc(74,55,"SUBMIT")))},directives:[c.I,c.t,c.k,r.q,c.c,c.s,c.i,r.t,c.n,f.a,C.a],pipes:[b.a],styles:[""]}),t})()}];let F=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},imports:[[i.g.forChild(O)],i.g]}),t})();var U=a("PCNd");let k=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},imports:[[r.c,U.a,c.m,c.C,F]]}),t})()},Geda:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var r=a("fXoL"),i=a("3Pt+"),c=a("au7T");let o=(()=>{class t{constructor(t,e){this.control=t,this.commonMethods=e,this.specialKeys=["Backspace","Tab"]}ngOnChanges(t){const e=+this.limitTo;if(-1===this.specialKeys.indexOf(t.key)&&!this.commonMethods.validateEmpty(this.control.value)&&this.control.value.length>=e){let t=this.control.value.substring(0,e);this.control.control.setValue(t)}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(i.r),r.Yb(c.a))},t.\u0275dir=r.Tb({type:t,selectors:[["","limit-to",""]],hostBindings:function(t,e){1&t&&r.lc("input",(function(t){return e.ngOnChanges(t)}))},inputs:{limitTo:["limit-to","limitTo"]},features:[r.Kb]}),t})()},TaOT:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var r=a("fXoL"),i=a("fUdP");let c=(()=>{class t{constructor(t){this.customCurrencyPipe=t}markFormGroupTouched(t){Object.values(t.controls).forEach(t=>{t.markAsTouched(),t.controls&&t.controls.forEach(t=>this.markFormGroupTouched(t))})}markFormGroupUntouched(t){Object.values(t.controls).forEach(t=>{t.markAsUntouched(),t.controls&&t.controls.forEach(t=>this.markFormGroupUntouched(t))})}validationMessages(){return{required:"* This field is required",email:"* This email address is invalid",minlength:"* Length is too short",maxlength:"* Length is too long",invalid_characters:t=>{let e=t;return e=e.reduce((t,a,r)=>{let i=t;return i+=a,e.length!==r+1&&(i+=", "),i},""),"These characters are not allowed: "+e}}}validateForm(t,e,a){const r=t;for(const i in e)if(i){e[i]="";const t=r.get(i),c=this.validationMessages();if(t&&!t.valid&&(!a||t.dirty||t.touched))for(const a in t.errors)console.log("======>inside",a),e[i]=a&&"invalid_characters"!==a?e[i]||c[a]:e[i]||c[a](t.errors[a])}return e}formatCurrency(t,e,a){if("0"!=t)if(""!=t){let a=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==a.trim().replace(/[^.0-9]+/g,"")?e.contains("amount")&&e.get("amount").reset():"0"==a.trim().replace(/[^.0-9]+/g,"")?e.get("amount").reset():(console.log(a),e.patchValue({amount:a}))}else e.get("amount").reset("");else e.contains("amount")&&e.get("amount").reset()}formatTransLimit(t,e){if("0"!=t)if(""!=t){let a=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==a?e.contains("transactionLimit")&&e.get("transactionLimit").reset():"0"==a.trim()?e.get("transactionLimit").reset():(console.log(a),e.patchValue({transactionLimit:a}))}else e.get("transactionLimit").reset("");else e.contains("transactionLimit")&&e.get("transactionLimit").reset()}formatDynamicCurrency(t,e){$("#"+t).val()&&"\u20b9 0.00"!=$("#"+t).val()?e.patchValue({amount:$("#"+t).val()}):e.get("amount").reset("")}deFormatValue(t,e){e.patchValue({amount:t.replace(/[^0-9.]+/g,"")})}formatAmtCurrency(t,e,a){if("0"!=t)if(""!=t){let r=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==r?e.contains(a)&&e.get(a).reset():"0"==r.trim()?e.get(a).reset():e.controls[a].patchValue("\u20b9"+r)}else e.get(a).reset("");else e.contains(a)&&e.get(a).reset()}}return t.\u0275fac=function(e){return new(e||t)(r.ic(i.a))},t.\u0275prov=r.Ub({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);