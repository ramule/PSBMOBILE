(window.webpackJsonp=window.webpackJsonp||[]).push([[327],{UNsA:function(e,c,i){"use strict";i.r(c),i.d(c,"PayUpiConfirmationModule",(function(){return P}));var a=i("ofXK"),t=i("tyNb"),s=i("XNiG"),r=i("fXoL"),d=i("EnSQ"),o=i("L7Xq"),n=i("5IsW"),p=i("H9Rt"),l=i("TiA8"),v=i("Ygbc"),h=i("jpYx"),y=i("4bKs"),S=i("au7T"),u=i("Eioz"),b=i("AIZJ");function m(e,c){if(1&e&&(r.ec(0,"div",17),r.ec(1,"ul",18),r.ec(2,"li",19),r.ec(3,"div",20),r.ec(4,"div",8),r.ec(5,"div",21),r.ec(6,"div",22),r.ec(7,"h6"),r.Sc(8),r.qc(9,"translate"),r.dc(),r.ec(10,"h5"),r.Sc(11),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(12,"li",19),r.ec(13,"div",20),r.ec(14,"div",8),r.ec(15,"div",21),r.ec(16,"div",22),r.ec(17,"h6"),r.Sc(18),r.qc(19,"translate"),r.dc(),r.ec(20,"h5"),r.Sc(21),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(22,"li",19),r.ec(23,"div",20),r.ec(24,"div",8),r.ec(25,"div",21),r.ec(26,"div",22),r.ec(27,"h6"),r.Sc(28),r.qc(29,"translate"),r.dc(),r.ec(30,"h5"),r.Sc(31),r.qc(32,"translate"),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(33,"li",19),r.ec(34,"div",20),r.ec(35,"div",8),r.ec(36,"div",21),r.ec(37,"div",22),r.ec(38,"h6"),r.Sc(39),r.qc(40,"translate"),r.dc(),r.ec(41,"h5"),r.Sc(42),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(43,"li",19),r.ec(44,"div",20),r.ec(45,"div",8),r.ec(46,"div",21),r.ec(47,"div",22),r.ec(48,"h6"),r.Sc(49),r.qc(50,"translate"),r.dc(),r.ec(51,"h5"),r.Zb(52,"img",23),r.Sc(53),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(54,"li",19),r.ec(55,"div",20),r.ec(56,"div",8),r.ec(57,"div",21),r.ec(58,"div",22),r.ec(59,"h6"),r.Sc(60),r.qc(61,"translate"),r.dc(),r.ec(62,"h5"),r.Sc(63),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc()),2&e){const e=r.pc();r.Mb(8),r.Tc(r.rc(9,13,"UPI_ID")),r.Mb(3),r.Uc("",e.DataService.selectedVpaDetailsPay.vpaDetails.paymentAddress," "),r.Mb(7),r.Tc(r.rc(19,15,"LINKED_ACCOUNT")),r.Mb(3),r.Uc("",e.DataService.selectedVpaDetailsPay.accountDetails.maskedAccountNumber," "),r.Mb(7),r.Tc(r.rc(29,17,"TO_PAYEE")),r.Mb(3),r.Vc("",r.rc(32,19,"UPI_ID")," : ",e.DataService.payeeObj.payeeUpiAddress,""),r.Mb(8),r.Tc(r.rc(40,21,"PAYEE_NAME")),r.Mb(3),r.Tc(e.DataService.payeeObj.payeeName),r.Mb(7),r.Tc(r.rc(50,23,"AMOUNT")),r.Mb(4),r.Uc(" ",e.payeeAmt," "),r.Mb(7),r.Tc(r.rc(61,25,"REMARKS")),r.Mb(3),r.Tc(e.DataService.upiPayRequest.remarks?e.DataService.upiPayRequest.remarks:"NA")}}function D(e,c){if(1&e&&(r.ec(0,"div",17),r.ec(1,"ul",18),r.ec(2,"li",19),r.ec(3,"div",20),r.ec(4,"div",8),r.ec(5,"div",21),r.ec(6,"div",22),r.ec(7,"h6"),r.Sc(8),r.qc(9,"translate"),r.dc(),r.ec(10,"h5"),r.Sc(11),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(12,"li",19),r.ec(13,"div",20),r.ec(14,"div",8),r.ec(15,"div",21),r.ec(16,"div",22),r.ec(17,"h6"),r.Sc(18),r.qc(19,"translate"),r.dc(),r.ec(20,"h5"),r.Sc(21),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(22,"li",19),r.ec(23,"div",20),r.ec(24,"div",8),r.ec(25,"div",21),r.ec(26,"div",22),r.ec(27,"h6"),r.Sc(28),r.qc(29,"translate"),r.dc(),r.ec(30,"h5"),r.Sc(31),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(32,"li",19),r.ec(33,"div",20),r.ec(34,"div",8),r.ec(35,"div",21),r.ec(36,"div",22),r.ec(37,"h6"),r.Sc(38),r.qc(39,"translate"),r.dc(),r.ec(40,"h5"),r.Sc(41),r.qc(42,"maskAccountNo"),r.dc(),r.ec(43,"h5"),r.Sc(44),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(45,"li",19),r.ec(46,"div",20),r.ec(47,"div",8),r.ec(48,"div",21),r.ec(49,"div",22),r.ec(50,"h6"),r.Sc(51),r.qc(52,"translate"),r.dc(),r.ec(53,"h5"),r.Sc(54),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(55,"li",19),r.ec(56,"div",20),r.ec(57,"div",8),r.ec(58,"div",21),r.ec(59,"div",22),r.ec(60,"h6"),r.Sc(61),r.qc(62,"translate"),r.dc(),r.ec(63,"h5"),r.Zb(64,"img",23),r.Sc(65),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(66,"li",19),r.ec(67,"div",20),r.ec(68,"div",8),r.ec(69,"div",21),r.ec(70,"div",22),r.ec(71,"h6"),r.Sc(72),r.qc(73,"translate"),r.dc(),r.ec(74,"h5"),r.Sc(75),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc()),2&e){const e=r.pc();r.Mb(8),r.Tc(r.rc(9,15,"UPI_ID")),r.Mb(3),r.Uc("",e.DataService.selectedVpaDetailsPay.vpaDetails.paymentAddress," "),r.Mb(7),r.Tc(r.rc(19,17,"LINKED_ACCOUNT")),r.Mb(3),r.Uc("",e.DataService.selectedVpaDetailsPay.accountDetails.maskedAccountNumber," "),r.Mb(7),r.Tc(r.rc(29,19,"PAYEE_NAME")),r.Mb(3),r.Tc(e.DataService.payeeObj.payeeName),r.Mb(7),r.Tc(r.rc(39,21,"PAYEE_ACCOUNT")),r.Mb(3),r.Tc(r.rc(42,23,e.DataService.payeeObj.payeeActNo)),r.Mb(3),r.Tc(e.DataService.payeeObj.payeeIfsc),r.Mb(7),r.Tc(r.rc(52,25,"PAYEE_BANK")),r.Mb(3),r.Tc(e.DataService.payeeObj.payeeBankName),r.Mb(7),r.Tc(r.rc(62,27,"AMOUNT")),r.Mb(4),r.Uc(" ",e.payeeAmt," "),r.Mb(7),r.Tc(r.rc(73,29,"REMARKS")),r.Mb(3),r.Tc(e.DataService.upiPayRequest.remarks?e.DataService.upiPayRequest.remarks:"-")}}const A=[{path:"",component:(()=>{class e{constructor(e,c,i,a,t,s,r,d,o,n,p,l){this.router=e,this.DataService=c,this.http=i,this.constant=a,this.localStorage=t,this.npciAndroidService=s,this.npciIosService=r,this.location=d,this.payAmtService=o,this.ngZone=n,this.loaderService=p,this.commonMethods=l,this.headerdata={headerType:"TitleClose",titleName:"CONFIRMATION",footertype:"none"},this.payErrorMsg=""}ngOnInit(){this.DataService.changeMessage(this.headerdata),history.pushState({},"payUpiPayment",this.location.prepareExternalUrl("payUpiPayment")),history.pushState({},"self",this.location.prepareExternalUrl(this.router.url)),this.payeeAmt=this.DataService.upiPayRequest.amount.trim().replace(/[^.0-9]+/g,"")}onClickPayAmount(){this.payAmtService.payeeObj=this.DataService.payeeObj;let e=this.DataService.selectedVpaDetailsPay.accountDetails;if(this.DataService.verifyAddressResp.payAmount=this.DataService.upiPayRequest.amount.trim().replace(/[^.0-9]+/g,""),this.DataService.upiPayModelObj.payerAddr=this.DataService.selectedVpaDetailsPay.vpaDetails.paymentAddress?this.DataService.selectedVpaDetailsPay.vpaDetails.paymentAddress:"",this.DataService.upiPayModelObj.payeeAddr=this.DataService.payeeObj.payeeUpiAddress,this.DataService.upiPayModelObj.txnAmount=this.DataService.upiPayRequest.amount.trim().replace(/[^.0-9]+/g,""),this.DataService.upiPayModelObj.payeeName=this.DataService.payeeObj.payeeName?this.DataService.payeeObj.payeeName:"",$("div.popup-bottom.show-common-error").removeClass("popup-active"),$("div.ios-nav-overlay").fadeOut(400),e.isSelected&&e.ifsc.includes("PSIB")){let c=this.DataService.upiPayRequest.amount.trim().replace(/[^.0-9]+/g,"");this.DataService.preApprovedBankName=e.bankName,this.DataService.preApprovedAccNo=e.maskedAccountNumber,this.DataService.preApprovedAmount=c,this.DataService.preApprovedPreviousPageUrl=this.router.url,this.DataService.preApprovedFlowIdentifier="pay",this.router.navigateByUrl("/transactionPin")}else this.callNpciLibrary(e,this.DataService.selectedFlow)}callNpciLibrary(e,c){if(console.log("calling npci library..."),this.loaderService.showLoader(),window.hasOwnProperty("cordova"))if(this.DataService.platform.toLowerCase()==this.constant.val_android){console.log("Calling NPCI Android service..."),this.npciAndroidService.initData(),this.npciAndroidService.selectedFlow=c;let i=new s.a;this.npciAndroidService.getTransactionId().subscribe(c=>{this.npciAndroidService.transactionId=c,this.DataService.payReceiptTransId=c,this.npciAndroidService.androidStartCLLibrary(e,this.constant.val_npci_flow_sendMoney_android,i).subscribe(e=>{console.log("Android StartCLLibrary Success => ",e),e.hasOwnProperty("status")&&"00"==e.status&&(this.commonMethods.closePopup("div.popup-bottom.retryMsg"),this.payAmtService.fundTransferApiCall(e).subscribe(e=>{console.log("fundTransferApiCall success",e),e.isPaymentSuccessful?this.DataService.routeWithNgZone("payUpiSuccess"):this.ngZone.run(()=>{this.payErrorMsg=e.errorMsg,this.DataService.routeWithNgZone("payUpiSuccess")})}))},e=>{console.log("Android StartCLLibrary error => ",e)})})}else if(this.DataService.platform.toLowerCase()==this.constant.val_ios){console.log("Calling NPCI iOS service..."),this.npciIosService.initData(),this.npciIosService.selectedFlow=c;let i=new s.a;this.npciIosService.getTransactionId().subscribe(c=>{console.log("transactionId Received => ",c),this.npciIosService.txnId=c,this.npciIosService.iosStartCLLibrary(e,this.constant.val_npci_flow_sendMoney_ios,i).subscribe(e=>{console.log("iOS StartCLLibrary Success => ",e),e&&(e&&e.credkey?(this.commonMethods.closePopup("div.popup-bottom.retryMsg"),this.payAmtService.fundTransferApiCall(e).subscribe(e=>{this.commonMethods.closePopup("div.popup-bottom.show-common-error"),console.log("fundTransferApiCall success",e),e.isPaymentSuccessful?this.DataService.routeWithNgZone("payUpiSuccess"):this.ngZone.run(()=>{this.payErrorMsg=e.errorMsg,this.DataService.routeWithNgZone("payUpiSuccess")})})):console.log("NPCI Flow cancelled..."))},e=>{console.log("iOS StartCLLibrary error => ",e)})})}else console.log("unknown platform = ",this.DataService.platform);else console.log("Cordova not available... unable to start NPCI Library on web")}UpiApiCall(e){this.http.callBankingAPIService(e,this.localStorage.getLocalStorage(this.constant.storage_deviceId),this.constant.upiserviceName_PROCESSUPISERVICESESSION,!0).subscribe(e=>{let c=e.responseParameter.upiResponse;if("00"==c.status)switch(c.subActionId){case this.constant.upiserviceName_FUNDSTRANSFER:this.DataService.payReceiptObj=c,this.DataService.payReceiptObj.remarks=this.DataService.upiPayRequest.remarks,this.DataService.payReceiptObj.amount=this.DataService.upiPayRequest.amount,this.DataService.payReceiptObj.payType=this.DataService.verifyAddressResp.payType,this.DataService.payReceiptObj.payeeName=this.DataService.payeeObj.payeeName,this.DataService.payReceiptObj.payeeUpiAddress=this.DataService.payeeObj.payeeUpiAddress,this.DataService.payReceiptObj.payeeBankName=this.DataService.payeeObj.payeeBankName,this.DataService.payReceiptObj.payeeIfsc=this.DataService.payeeObj.payeeIfsc,this.DataService.payReceiptObj.payeeActNo=this.DataService.payeeObj.payeeActNo,this.DataService.payReceiptObj.selectedVpa=this.DataService.selectedVpaDetailsPay,this.DataService.payReceiptObj.payReceiptTransId=this.npciAndroidService.transactionId,this.DataService.routeWithNgZone("payUpiSuccess")}},e=>{console.log("ERROR!",e)})}routePage(e){this.router.navigateByUrl(e)}}return e.\u0275fac=function(c){return new(c||e)(r.Yb(t.c),r.Yb(d.a),r.Yb(o.a),r.Yb(n.a),r.Yb(p.a),r.Yb(l.a),r.Yb(v.a),r.Yb(a.n),r.Yb(h.a),r.Yb(r.H),r.Yb(y.a),r.Yb(S.a))},e.\u0275cmp=r.Sb({type:e,selectors:[["app-pay-upi-confirmation"]],decls:24,vars:5,consts:[[1,"main"],[1,"right-main-column","minus-rt-col","mar-custom"],[1,"right-col-container","cust-pb"],[1,"body-page-container"],[1,"container-fluid"],[1,"row"],[1,"bg-section"],[1,"col-12"],[1,"row1"],[1,"col-sm-12","col-12","col-md-12"],["class","white-bg1 pad-custom",4,"ngIf"],[1,"footer-container","sticky-actions"],[1,"footer-inactions","minus-rt-col"],[1,"col-12","col-md-12","col-lg-12","text-center"],[1,"ux-button","primary","md",3,"click"],[1,"powered-logo"],["src","assets/images/logo/powered-upi-logo.svg","alt","powered-upi-logo"],[1,"white-bg1","pad-custom"],[1,"complaint-list"],[1,"bor-n"],[1,"full-container"],[1,"col-12","col-md-12"],[1,"left-info"],["src","assets/images/svg/rupee-bl.svg","alt","rupees-icon"]],template:function(e,c){1&e&&(r.ec(0,"div",0),r.ec(1,"div",1),r.ec(2,"div",2),r.ec(3,"div",3),r.ec(4,"div",4),r.ec(5,"div",5),r.ec(6,"div",6),r.ec(7,"div",7),r.ec(8,"div",8),r.ec(9,"div",9),r.Rc(10,m,64,27,"div",10),r.Rc(11,D,76,31,"div",10),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(12,"div",11),r.ec(13,"div",12),r.ec(14,"div",4),r.ec(15,"div",5),r.ec(16,"div",13),r.ec(17,"button",14),r.lc("click",(function(){return c.onClickPayAmount()})),r.Sc(18),r.qc(19,"translate"),r.dc(),r.dc(),r.dc(),r.ec(20,"div",5),r.ec(21,"div",13),r.ec(22,"div",15),r.Zb(23,"img",16),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc()),2&e&&(r.Mb(10),r.uc("ngIf","UPI_ID"==c.DataService.verifyAddressResp.payType||"VPA"==c.DataService.verifyAddressResp.payType),r.Mb(1),r.uc("ngIf","BNK_ACT"==c.DataService.verifyAddressResp.payType||"ACCOUNT"==c.DataService.verifyAddressResp.payType),r.Mb(7),r.Tc(r.rc(19,3,"PAY_NOW")))},directives:[a.t],pipes:[u.a,b.a],styles:[""]}),e})()}];let g=(()=>{class e{}return e.\u0275mod=r.Wb({type:e}),e.\u0275inj=r.Vb({factory:function(c){return new(c||e)},imports:[[t.g.forChild(A)],t.g]}),e})();var f=i("PCNd");let P=(()=>{class e{}return e.\u0275mod=r.Wb({type:e}),e.\u0275inj=r.Vb({factory:function(c){return new(c||e)},imports:[[a.c,f.a,g]]}),e})()}}]);