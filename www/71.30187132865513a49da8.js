(window.webpackJsonp=window.webpackJsonp||[]).push([[71,349],{Geda:function(t,e,c){"use strict";c.d(e,"a",(function(){return r}));var i=c("fXoL"),a=c("3Pt+"),o=c("au7T");let r=(()=>{class t{constructor(t,e){this.control=t,this.commonMethods=e,this.specialKeys=["Backspace","Tab"]}ngOnChanges(t){const e=+this.limitTo;if(-1===this.specialKeys.indexOf(t.key)&&!this.commonMethods.validateEmpty(this.control.value)&&this.control.value.length>=e){let t=this.control.value.substring(0,e);this.control.control.setValue(t)}}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(a.r),i.Yb(o.a))},t.\u0275dir=i.Tb({type:t,selectors:[["","limit-to",""]],hostBindings:function(t,e){1&t&&i.lc("input",(function(t){return e.ngOnChanges(t)}))},inputs:{limitTo:["limit-to","limitTo"]},features:[i.Kb]}),t})()},TaOT:function(t,e,c){"use strict";c.d(e,"a",(function(){return o}));var i=c("fXoL"),a=c("fUdP");let o=(()=>{class t{constructor(t){this.customCurrencyPipe=t}markFormGroupTouched(t){Object.values(t.controls).forEach(t=>{t.markAsTouched(),t.controls&&t.controls.forEach(t=>this.markFormGroupTouched(t))})}markFormGroupUntouched(t){Object.values(t.controls).forEach(t=>{t.markAsUntouched(),t.controls&&t.controls.forEach(t=>this.markFormGroupUntouched(t))})}validationMessages(){return{required:"* This field is required",email:"* This email address is invalid",minlength:"* Length is too short",maxlength:"* Length is too long",invalid_characters:t=>{let e=t;return e=e.reduce((t,c,i)=>{let a=t;return a+=c,e.length!==i+1&&(a+=", "),a},""),"These characters are not allowed: "+e}}}validateForm(t,e,c){const i=t;for(const a in e)if(a){e[a]="";const t=i.get(a),o=this.validationMessages();if(t&&!t.valid&&(!c||t.dirty||t.touched))for(const c in t.errors)console.log("======>inside",c),e[a]=c&&"invalid_characters"!==c?e[a]||o[c]:e[a]||o[c](t.errors[c])}return e}formatCurrency(t,e,c){if("0"!=t)if(""!=t){let c=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==c.trim().replace(/[^.0-9]+/g,"")?e.contains("amount")&&e.get("amount").reset():"0"==c.trim().replace(/[^.0-9]+/g,"")?e.get("amount").reset():(console.log(c),e.patchValue({amount:c}))}else e.get("amount").reset("");else e.contains("amount")&&e.get("amount").reset()}formatTransLimit(t,e){if("0"!=t)if(""!=t){let c=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==c?e.contains("transactionLimit")&&e.get("transactionLimit").reset():"0"==c.trim()?e.get("transactionLimit").reset():(console.log(c),e.patchValue({transactionLimit:c}))}else e.get("transactionLimit").reset("");else e.contains("transactionLimit")&&e.get("transactionLimit").reset()}formatDynamicCurrency(t,e){$("#"+t).val()&&"\u20b9 0.00"!=$("#"+t).val()?e.patchValue({amount:$("#"+t).val()}):e.get("amount").reset("")}deFormatValue(t,e){e.patchValue({amount:t.replace(/[^0-9.]+/g,"")})}formatAmtCurrency(t,e,c){if("0"!=t)if(""!=t){let i=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==i?e.contains(c)&&e.get(c).reset():"0"==i.trim()?e.get(c).reset():e.controls[c].patchValue("\u20b9"+i)}else e.get(c).reset("");else e.contains(c)&&e.get(c).reset()}}return t.\u0275fac=function(e){return new(e||t)(i.ic(a.a))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},opR2:function(t,e,c){"use strict";c.r(e),c.d(e,"CollectEnterAmountModule",(function(){return V}));var i=c("ofXK"),a=c("tyNb"),o=c("3Pt+"),r=c("wd/R"),s=c("fXoL"),n=c("EnSQ"),l=c("5IsW"),u=c("L7Xq"),d=c("H9Rt"),m=c("TaOT"),h=c("fUdP"),p=c("DiTM"),v=c("Eioz"),f=c("oBZJ"),g=c("au7T"),S=c("Geda"),b=c("RZqO");function D(t,e){1&t&&(s.ec(0,"p",35),s.Sc(1),s.qc(2,"translate"),s.dc()),2&t&&(s.Mb(1),s.Uc(" ",s.rc(2,1,"ENTER_AMOUNT_ERROR")," "))}function R(t,e){1&t&&(s.ec(0,"p",28),s.Sc(1),s.qc(2,"translate"),s.dc()),2&t&&(s.Mb(1),s.Uc(" ",s.rc(2,1,"ENTER_NUMBER_ERROR"),""))}function A(t,e){1&t&&(s.ec(0,"p",28),s.Sc(1),s.qc(2,"translate"),s.dc()),2&t&&(s.Mb(1),s.Uc(" ",s.rc(2,1,"ENTER_SPECIAL_CHARACTOR_ERROR"),""))}function M(t,e){if(1&t){const t=s.fc();s.ec(0,"div",45),s.ec(1,"div",9),s.ec(2,"h5"),s.Sc(3),s.qc(4,"translate"),s.dc(),s.ec(5,"h6"),s.Sc(6),s.dc(),s.ec(7,"em"),s.Sc(8),s.dc(),s.Zb(9,"br"),s.dc(),s.ec(10,"div",46),s.ec(11,"div"),s.ec(12,"a",33),s.lc("click",(function(){return s.Hc(t),s.pc(4).routePage("collectUpiIdList")})),s.Sc(13),s.qc(14,"translate"),s.dc(),s.dc(),s.dc(),s.dc()}if(2&t){const t=e.$implicit,c=s.pc(2).$implicit;s.uc("hidden",!(null!=t&&t.isSelected)),s.Mb(3),s.Vc("",s.rc(4,7,"UPI_ID")," : ",c.paymentAddress,""),s.Mb(3),s.Vc("",t.accType," ",t.maskedAccountNumber,""),s.Mb(2),s.Tc(t.bankName),s.Mb(5),s.Tc(s.rc(14,9,"CHANGE_AC"))}}function T(t,e){if(1&t&&(s.ec(0,"div"),s.Rc(1,M,15,11,"div",44),s.dc()),2&t){const t=s.pc().$implicit;s.Mb(1),s.uc("ngForOf",t.accounts)}}function C(t,e){if(1&t&&(s.ec(0,"div",37),s.ec(1,"div",10),s.ec(2,"div",9),s.ec(3,"h4"),s.Sc(4),s.qc(5,"translate"),s.dc(),s.dc(),s.dc(),s.Rc(6,T,2,1,"div",34),s.ec(7,"div",38),s.ec(8,"div",39),s.ec(9,"button",40),s.Sc(10),s.qc(11,"translate"),s.dc(),s.dc(),s.dc(),s.ec(12,"div",10),s.ec(13,"div",41),s.ec(14,"div",42),s.Zb(15,"img",43),s.dc(),s.dc(),s.dc(),s.dc()),2&t){const t=e.$implicit,c=s.pc(2);s.uc("hidden",!(null!=t&&t.isSelected)),s.Mb(4),s.Uc("",s.rc(5,5,"DEPOSIT_TO_ACCOUNT")," "),s.Mb(2),s.uc("ngIf",t.isSelected),s.Mb(3),s.uc("disabled",c.collectAmountForm.invalid),s.Mb(1),s.Tc(s.rc(11,7,"COLLECT_NOW"))}}function y(t,e){if(1&t&&(s.ec(0,"div"),s.Rc(1,C,16,9,"div",36),s.dc()),2&t){const t=s.pc();s.Mb(1),s.uc("ngForOf",t.DataService.upiCollectVpaList)}}const E=[{path:"",component:(()=>{class t{constructor(t,e,c,i,a,o,s,n,l,u,d,m,h){this.router=t,this.DataService=e,this.constant=c,this.http=i,this.localStorage=a,this.formValidation=o,this.customCurrencyPipe=s,this.collectAmtService=n,this.translate=l,this.pluginService=u,this.location=d,this.commonMethod=m,this.ngZone=h,this.vpaAddressList=[],this.showDetails=!1,this.information="",this.currentDate=r().format("YYYY-MM-DD"),this.currentTime=r.duration(r().format("hh:mm"),"minutes"),this.headerdata={headerType:"backUpiIdHeader",titleName:"COLLECT",footertype:"none"}}ngOnInit(){$("#amt").autoNumeric("init",{aSign:"\u20b9 "}),this.DataService.changeMessage(this.headerdata),this.DataService.backURLCollectVPAList=this.router.url,createGlobalNavMore(),this.initialize()}initialize(){this.buildForm(),this.collectDate=r(this.DataService.upiCollectRequest.date).format("DD/MM/yyyy"),this.collectTime=r(this.DataService.upiCollectRequest.time).format("hh:mm A");let t="";t="transactionDetails"==this.DataService.previousPageUrl&&"recentTransaction"==this.DataService.baseStartUrl?"recentTransaction":"transactionDetails"==this.DataService.previousPageUrl?"transactionList":"recentTransaction"==this.DataService.previousPageUrl?"recentTransaction":"collectRecentRequest",history.pushState({},t,this.location.prepareExternalUrl(t)),history.pushState({},"self",this.location.prepareExternalUrl(this.router.url));let e=JSON.parse(JSON.stringify(this.DataService.vpaAddressList));if(0==this.DataService.upiCollectVpaList.length&&(this.DataService.upiCollectVpaList=e.map(t=>(t.isSelected=!(!t.isSelected&&"Y"!=t.default),t.accounts.map(t=>(t.isSelected=!(!t.isSelected&&"Y"!=t.isDefaultAccount),t)),t))),this.DataService.selectedVpaDetailsCollect=this.getSelectedVpaAccountDetails(),this.DataService.upiCollectRequest.remarks&&this.collectAmountForm.get("remarks").setValue(this.DataService.upiCollectRequest.remarks),this.DataService.upiCollectRequest.amount){let t=this.customCurrencyPipe.transform(this.DataService.upiCollectRequest.amount,"decimal").replace(/[^.0-9]+/g,"");this.collectAmountForm.get("amount").setValue(t)}if(this.DataService.fromRecentTransaction&&this.DataService.upiTransactionSelected){let t=this.customCurrencyPipe.transform(this.DataService.upiTransactionSelected.AMOUNT,"decimal").replace(/[^.0-9]+/g,"");this.collectAmountForm.get("amount").setValue(t)}this.mbebaFlag=this.DataService.selectedVpaDetailsCollect.accountDetails.mbeba}buildForm(){this.collectAmountForm=new o.j({amount:new o.g("",[o.G.required,o.G.pattern(/(^[0-9.\u20b9, ]*$)/)]),remarks:new o.g("",o.G.pattern(/(^[a-z0-9A-Z.',\- ]*$)/))})}formatCurrency(t){this.formValidation.formatDynamicCurrency("amt",this.collectAmountForm)}collectAmount(t){if(t.target[1].blur(),this.formValidation.markFormGroupTouched(this.collectAmountForm),this.collectAmountForm.valid){let t=this.collectAmountForm.get("amount").value.trim().replace(/[^.0-9]+/g,"");if(Number(t)>2e3)return void this.ngZone.run(()=>{this.DataService.information=this.translate.transform("AMOUNT_LIMIT_EXCEEDED_UPI"),this.DataService.informationLabel=this.translate.transform("INFORMATION"),this.DataService.primaryBtnText=this.translate.transform("OK"),this.commonMethod.openPopup("div.popup-bottom.show-common-info")});var e=r().format("YYYY-MM-DD"),c=r(new Date,"DD/MM/YYYY HH:mm:ss"),i=r(this.DataService.upiCollectRequest.time,"DD/MM/YYYY HH:mm:ss"),a=r(this.DataService.upiCollectRequest.date).format("YYYY-MM-DD"),o=r(a).diff(e,"minutes")+n,s=i.diff(c),n=r.duration(s).minutes();if(this.DataService.upiCollectRequest.expiryTime=o.toString(),o<1)return void this.ngZone.run(()=>{this.DataService.information=this.translate.transform("EXPIRY_TIME_ERROR"),this.DataService.informationLabel=this.translate.transform("INFORMATION"),this.DataService.primaryBtnText=this.translate.transform("OK"),this.commonMethod.openPopup("div.popup-bottom.show-common-info")});if(o>64800)return void this.ngZone.run(()=>{this.DataService.information=this.translate.transform("EXPIRY_MAX_VALUE_EXCEEDED_ERROR"),this.DataService.informationLabel=this.translate.transform("INFORMATION"),this.DataService.primaryBtnText=this.translate.transform("OK"),this.commonMethod.openPopup("div.popup-bottom.show-common-info")});let l=this.getSelectedVpaAccountDetails();this.pluginService.getTransactionId().subscribe(t=>{var e=this.collectAmtService.setCollectRequest(this.collectAmountForm.value,this.DataService.upiCollectRequest,l,t,!1);this.UpiApiCall(e)})}}UpiApiCall(t){this.http.callBankingAPIService(t,this.localStorage.getLocalStorage(this.constant.storage_deviceId),this.constant.upiserviceName_PROCESSUPISERVICESESSION,!0).subscribe(t=>{let e=t.responseParameter.upiResponse;if(this.DataService.upiCallTransactionHistoryApi=!0,"00"==e.status)switch(e.subActionId){case this.constant.upiserviceName_FUNDSTRANSFER:this.DataService.collectReceiptObj=e;let{remarks:t,amount:c}=this.collectAmountForm.value;this.DataService.collectReceiptObj.remarks=t,this.DataService.collectReceiptObj.amount=c,this.DataService.collectReceiptObj.collectFrom=this.DataService.validateAddressResp.MASKNAME,this.DataService.collectReceiptObj.vpaAddress=this.DataService.validateAddressResp.validatedVpa,this.DataService.collectReceiptObj.selectedVpa=this.DataService.selectedVpaDetailsCollect,this.DataService.routeWithNgZone("collectSuccess")}},t=>{console.log("ERROR!",t)})}routePage(t){this.DataService.upiCollectRequest.amount=this.collectAmountForm.get("amount").value,this.DataService.upiCollectRequest.remarks=this.collectAmountForm.get("remarks").value,this.router.navigateByUrl(t)}getSelectedVpaAccountDetails(){let t=this.DataService.upiCollectVpaList.find(t=>1==t.isSelected);if(t)return{vpaDetails:t,accountDetails:this.getSelectedAccountNoByVpa(t.accounts)}}getSelectedAccountNoByVpa(t){if(t.length>0)return t.find(t=>1==t.isSelected)}showCommonToastMsgWithKey(t,e){showToastMessage(this.translate.transform(t),e)}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(a.c),s.Yb(n.a),s.Yb(l.a),s.Yb(u.a),s.Yb(d.a),s.Yb(m.a),s.Yb(h.a),s.Yb(p.a),s.Yb(v.a),s.Yb(f.a),s.Yb(i.n),s.Yb(g.a),s.Yb(s.H))},t.\u0275cmp=s.Sb({type:t,selectors:[["app-collect-enter-amount"]],decls:66,vars:30,consts:[[1,"main","main-bg2"],[1,"right-main-column","mar-custom"],[1,"right-col-container","pad-b","pb-0"],[1,"body-page-container"],[1,"vspacer5","d-sm-block","d-none"],[1,"container-fluid"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"bg-section2"],[1,"col-12"],[1,"row1"],[1,"payee-info1"],[1,"info-inner"],[1,"info-lft"],[1,"yellow"],[1,"info-center"],["href","javascript:;"],["src","assets/images/svg/double-left-arrows.svg","alt","double-left-arrows-icon"],[1,"info-rit"],[1,"col-12","col-md-12"],[1,"col-sm-5","col-8","col-md-3","m-auto"],[1,"ux-input","white-input","mar-tb"],["type","text","inputmode","decimal","placeholder","\u20b9 0","autocomplete","off","formControlName","amount","limit-to","12","id","amt","data-a-sign","Rs.",3,"blur"],["class","text-center error-message","style","color: #c51523;",4,"ngIf"],["class","text-center error-message",4,"ngIf"],[1,"col-sm-5","col-5","col-md-3","m-auto"],[1,"ux-input","dark-input","mar-tb"],["type","text","formControlName","remarks","autocomplete","off","limit-to","100",3,"placeholder"],[1,"text-center","error-message"],[1,"info-bottom-container"],[1,"col-sm-12","col-12","col-md-12","m-auto"],[1,"info-section2"],[1,"col-6","col-xl-6","col-lg-6","col-md-6"],[1,"reg-txt",3,"click"],[4,"ngIf"],[1,"text-center","error-message",2,"color","#c51523"],["class","bottom-info deposit focusCloseable",3,"hidden",4,"ngFor","ngForOf"],[1,"bottom-info","deposit","focusCloseable",3,"hidden"],[1,"row1","mt-2"],[1,"col-12","text-center"],["type","submit",1,"ux-button","primary","submit","md",3,"disabled"],[1,"col-12","text-center","mt-4"],[1,"powered-logo"],["src","assets/images/logo/powered-upi-logo.svg","alt","powered-upi-logo"],["class","row1 mt-2",3,"hidden",4,"ngFor","ngForOf"],[1,"row1","mt-2",3,"hidden"],[1,"col-12","mt-1"]],template:function(t,e){1&t&&(s.ec(0,"div",0),s.ec(1,"div",1),s.ec(2,"div",2),s.ec(3,"div",3),s.Zb(4,"div",4),s.ec(5,"div",5),s.ec(6,"form",6),s.lc("ngSubmit",(function(t){return e.collectAmount(t)})),s.ec(7,"div",7),s.ec(8,"div",8),s.ec(9,"div",9),s.ec(10,"div",10),s.ec(11,"div",11),s.ec(12,"div",7),s.ec(13,"div",12),s.ec(14,"div",13),s.ec(15,"span",14),s.ec(16,"h6"),s.Sc(17),s.qc(18,"firstLastChar"),s.dc(),s.dc(),s.dc(),s.ec(19,"div",15),s.ec(20,"a",16),s.Zb(21,"img",17),s.dc(),s.dc(),s.ec(22,"div",18),s.ec(23,"span",14),s.ec(24,"h6"),s.Sc(25),s.qc(26,"firstLastChar"),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.ec(27,"div",7),s.ec(28,"div",19),s.ec(29,"h5"),s.Sc(30),s.qc(31,"translate"),s.dc(),s.ec(32,"h6"),s.Sc(33),s.qc(34,"translate"),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.ec(35,"div",10),s.ec(36,"div",20),s.ec(37,"div",21),s.ec(38,"input",22),s.lc("blur",(function(t){return e.formatCurrency(t.target.value)})),s.dc(),s.Rc(39,D,3,3,"p",23),s.Rc(40,R,3,3,"p",24),s.dc(),s.dc(),s.dc(),s.ec(41,"div",10),s.ec(42,"div",25),s.ec(43,"div",26),s.Zb(44,"input",27),s.qc(45,"translate"),s.Rc(46,A,3,3,"p",24),s.Zb(47,"p",28),s.dc(),s.dc(),s.dc(),s.ec(48,"div",29),s.ec(49,"div",10),s.ec(50,"div",30),s.ec(51,"div",31),s.ec(52,"div",10),s.ec(53,"div",32),s.ec(54,"h6"),s.Sc(55),s.qc(56,"translate"),s.dc(),s.ec(57,"h6"),s.Sc(58),s.dc(),s.dc(),s.ec(59,"div",32),s.ec(60,"a",33),s.lc("click",(function(){return e.routePage("collectSetValidity")})),s.Sc(61),s.qc(62,"translate"),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.ec(63,"div",10),s.ec(64,"div",30),s.Rc(65,y,2,1,"div",34),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc()),2&t&&(s.Mb(6),s.uc("formGroup",e.collectAmountForm),s.Mb(11),s.Tc(s.rc(18,16,e.DataService.selectedVpaDetailsCollect.accountDetails.custName)),s.Mb(8),s.Tc(s.rc(26,18,e.DataService.validateAddressResp.MASKNAME)),s.Mb(5),s.Vc("",s.rc(31,20,"COLLECT_FROM")," ",e.DataService.validateAddressResp.MASKNAME,""),s.Mb(3),s.Vc("",s.rc(34,22,"UPI_ID")," : ",e.DataService.validateAddressResp.validatedVpa,""),s.Mb(6),s.uc("ngIf",e.collectAmountForm.controls.amount.hasError("required")&&e.collectAmountForm.controls.amount.touched),s.Mb(1),s.uc("ngIf",e.collectAmountForm.controls.amount.hasError("pattern")),s.Mb(4),s.vc("placeholder",s.rc(45,24,"REMARKS")),s.Mb(2),s.uc("ngIf",e.collectAmountForm.controls.remarks.hasError("pattern")),s.Mb(9),s.Tc(s.rc(56,26,"VALIDITY_SET")),s.Mb(3),s.Vc("",e.collectDate,", ",e.collectTime,""),s.Mb(3),s.Tc(s.rc(62,28,"EDIT_VALIDITY")),s.Mb(4),s.uc("ngIf",e.DataService.upiCollectVpaList.length>0))},directives:[o.I,o.t,o.k,o.c,o.s,o.i,S.a,i.t,i.s],pipes:[b.a,v.a],styles:[""]}),t})()}];let O=(()=>{class t{}return t.\u0275mod=s.Wb({type:t}),t.\u0275inj=s.Vb({factory:function(e){return new(e||t)},imports:[[a.g.forChild(E)],a.g]}),t})();var I=c("PCNd");let V=(()=>{class t{}return t.\u0275mod=s.Wb({type:t}),t.\u0275inj=s.Vb({factory:function(e){return new(e||t)},imports:[[i.c,I.a,o.m,o.C,O]]}),t})()}}]);