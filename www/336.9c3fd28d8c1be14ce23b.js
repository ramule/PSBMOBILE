(window.webpackJsonp=window.webpackJsonp||[]).push([[336],{iY69:function(e,o,t){"use strict";t.r(o),t.d(o,"PersonalDetailsModule",(function(){return U}));var c=t("ofXK"),i=t("fXoL"),a=t("tyNb"),s=t("EnSQ"),r=t("Eioz"),l=t("H9Rt"),n=t("5IsW"),d=t("oBZJ"),p=t("98hj"),g=t("YeyI"),m=t("L7Xq"),u=t("jhN1"),v=t("au7T"),h=t("RZqO");function S(e,o){if(1&e&&i.Zb(0,"img",44),2&e){const e=i.pc();i.uc("src",e.dataService.profileImage,i.Jc)}}function f(e,o){if(1&e&&(i.ec(0,"h3"),i.Sc(1),i.qc(2,"firstLastChar"),i.dc()),2&e){const e=i.pc();i.Mb(1),i.Tc(i.rc(2,1,e.dataService.userName))}}const b=[{path:"",component:(()=>{class e{constructor(e,o,t,c,i,a,s,r,l,n,d,p){this.router=e,this.dataService=o,this.translate=t,this.localStorageService=c,this.constant=i,this.ngZone=a,this.pluginService=s,this.profileDtlsService=r,this.profileService=l,this.http=n,this.domSanitizer=d,this.commonMethod=p,this.mobileNumber="NA",this.changeType="",this.saveProfileImg="",this.headerdata={headerType:"CloseNewHeader",titleName:"PERSONAL_DETAILS",footertype:"none"},this.croppedImageBase64="",this.information=""}ngOnInit(){this.dataService.changeMessage(this.headerdata),personalDetails(),this.mobileNumber=this.commonMethod.processPhoneNo(this.localStorageService.getLocalStorage(this.constant.storage_mobileNo))}goToPage(e){this.router.navigateByUrl("/"+e)}selectImageFromGallery(e){console.log("selectImageFromGallery"),console.log("changeType",e),this.changeType=e;var o=this;o.closePopup("div.popup-bottom.profile1"),this.dataService.platform.toLowerCase()==this.constant.val_android?cordova.plugins.diagnostic.requestExternalStorageAuthorization((function(e){switch(e){case cordova.plugins.diagnostic.permissionStatus.GRANTED:o.pluginService.checkImagePickerReadPermission().subscribe(e=>{e&&o.pluginService.pickImage().subscribe(e=>{o.pluginService.cropImage(e).then(e=>{console.log("fileUri",e),e&&o.commonMethod._getResizeBase64(e).then(e=>{var t="";null!=e.split(",")[1]&&(t=e.split(",")[1]),o.localStorageService.setLocalStorage(o.constant.storage_profileImage,t),o.localStorageService.setLocalStorage(o.constant.storage_profImgUploadFlag,"N"),o.saveProfileImg=o.dataService.profileImage,o.dataService.profileImage=o.croppedImageBase64=e,console.log("selectImageFromGallery base64 ",e),o.setUpdateProfile()})},e=>{console.log(e)})})});break;case cordova.plugins.diagnostic.permissionStatus.DENIED_ALWAYS:o.ngZone.run(()=>{o.information="ENABLE_STORAGE_PERMISSION_MSG",o.commonMethod.openPopup("div.popup-bottom.header-info")})}}),(function(e){console.error(e)})):this.dataService.platform.toLowerCase()==this.constant.val_ios?(console.log("requesting gallery access..."),this.getGalleryAccessStatusIos()):console.log("unknown platform..")}getGalleryAccessStatusIos(){let e=this;cordova.plugins.diagnostic.getCameraRollAuthorizationStatus((function(o){switch(console.log("getCameraRollAuthorizationStatus = ",o),o){case cordova.plugins.diagnostic.permissionStatus.NOT_REQUESTED:console.log("Permission not requested"),e.requestCameraRollAccessIos();break;case cordova.plugins.diagnostic.permissionStatus.DENIED_ALWAYS:console.log("Permission denied"),e.ngZone.run(()=>{e.information="ENABLE_PHOTOS_PERMISSION_MSG",e.commonMethod.openPopup("div.popup-bottom.header-info")});break;case cordova.plugins.diagnostic.permissionStatus.GRANTED:console.log("Permission granted, opening gallery"),e.openGalleryIos();break;default:console.log("Default => ",o)}}),(function(e){console.error("The following error occurred: "+e)}))}requestCameraRollAccessIos(){let e=this;cordova.plugins.diagnostic.requestCameraRollAuthorization((function(o){console.log("Authorization request for camera roll was "+(o==cordova.plugins.diagnostic.permissionStatus.GRANTED?"granted":"denied")),o==cordova.plugins.diagnostic.permissionStatus.GRANTED?e.openGalleryIos():e.getGalleryAccessStatusIos()}),(function(e){console.error(e)}))}openGalleryIos(){console.log("Opening gallery 2...");let e=this;e.pluginService.openCameraGallery().then(o=>{e.dataService.imageUploadSelected=!0,console.log("ios fileUri"),e.pluginService.cropImage(o).then(o=>{o&&e.commonMethod._getResizeBase64(o).then(o=>{console.log("base64Image",o);var t="";null!=o.split(",")[1]&&(t=o.split(",")[1]),e.localStorageService.setLocalStorage(e.constant.storage_profileImage,t),e.localStorageService.setLocalStorage(e.constant.storage_profImgUploadFlag,"N"),e.saveProfileImg=e.dataService.profileImage,e.dataService.profileImage=e.croppedImageBase64=o,console.log("selectImageFromGallery base64 ",o),e.setUpdateProfile()})},e=>{console.log(e),this.dataService.imageUploadSelected=!0})},e=>{console.log(e),this.dataService.imageUploadSelected=!0})}setUpdateProfile(){var e;this.dataService.isUPILogin&&(e={address:"",email:this.dataService.upiUserEmailAdress,changeType:this.changeType});var o=this.profileService.getProfileUpdateParam(e,this.dataService.regUPICustData.customerName,this.croppedImageBase64,!0);this.http.callBankingAPIService(o,this.localStorageService.getLocalStorage(this.constant.storage_deviceId),this.constant.serviceName_CUSTPROFILEUPDATE).subscribe(e=>{var o=e.responseParameter;"00"==o.opstatus?(this.information=o.Result,this.dataService.fetchUPIProfileDetails=!0,this.localStorageService.setLocalStorage(this.constant.storage_profImgUploadFlag,"Y"),this.getProfileDetails(),console.log(e)):this.ngZone.run(()=>{this.dataService.profileImage=this.domSanitizer.bypassSecurityTrustUrl("data:image/jpg;base64,"+this.localStorageService.getLocalStorage(this.constant.storage_profileImage)),this.information=o.Result,this.commonMethod.openPopup("div.popup-bottom.header-info")})})}getProfileDetails(){let e=this.profileDtlsService.getProfileDetailsParam(!0);this.http.callBankingAPIService(e,this.localStorageService.getLocalStorage(this.constant.storage_deviceId),this.constant.serviceName_CUSTPROFILEDETAILS).subscribe(e=>{console.log(e);var o=e.responseParameter;"00"==o.opstatus&&this.ngZone.run(()=>{this.commonMethod.openPopup("div.popup-bottom.header-info"),this.dataService.profileImage=this.domSanitizer.bypassSecurityTrustUrl("data:image/jpg;base64,"+o.base64Image),this.dataService.setUPIDetails(o)})})}takePhoto(e){this.changeType=e;var o=this;o.closePopup("div.popup-bottom.profile1"),cordova.plugins.diagnostic.requestCameraAuthorization((function(e){switch(console.log("takePhoto => requestCameraAuthorization = ",e),e){case cordova.plugins.diagnostic.permissionStatus.GRANTED:o.pluginService.openCamera().then(e=>{o.dataService.imageUploadSelected=!0,console.log("open camera"),console.log(e),o.pluginService.cropImage(e).then(e=>{e&&(console.log("fileUri 2 ==>"+e),o.commonMethod._getResizeBase64(e).then(e=>{var t="";null!=e.split(",")[1]&&(t=e.split(",")[1]),o.localStorageService.setLocalStorage(o.constant.storage_profileImage,t),o.localStorageService.setLocalStorage(o.constant.storage_profImgUploadFlag,"N"),o.saveProfileImg=o.dataService.profileImage,o.dataService.profileImage=o.croppedImageBase64=e,console.log("takePhoto base64 ",e),o.setUpdateProfile()}))},e=>{console.log(e),o.dataService.imageUploadSelected=!0})},e=>{console.error("camera ",e),o.dataService.imageUploadSelected=!0});break;case cordova.plugins.diagnostic.permissionStatus.DENIED_ALWAYS:return void o.ngZone.run(()=>{o.information="ENABLE_CAMERA_PERMISSION_MSG",o.commonMethod.openPopup("div.popup-bottom.header-info")})}}),(function(e){console.error(e)}))}closeProfilePopUp(){this.closePopup("div.popup-bottom.profile1")}removeProfilePopUp(){this.closeProfilePopUp(),console.log("delete-profile-pic"),this.commonMethod.openPopup("div.popup-bottom.delete-profile-pic-1")}closePopup(e){this.commonMethod.closePopup(e)}closeRemoveProfilePopUp(){this.closePopup("div.popup-bottom.delete-profile-pic-1")}removeProfilePicture(e){this.changeType=e,this.croppedImageBase64="",this.closeRemoveProfilePopUp(),this.setUpdateProfile()}selectProfile(){}}return e.\u0275fac=function(o){return new(o||e)(i.Yb(a.c),i.Yb(s.a),i.Yb(r.a),i.Yb(l.a),i.Yb(n.a),i.Yb(i.H),i.Yb(d.a),i.Yb(p.a),i.Yb(g.a),i.Yb(m.a),i.Yb(u.b),i.Yb(v.a))},e.\u0275cmp=i.Sb({type:e,selectors:[["app-personal-details"]],decls:104,vars:47,consts:[[1,"main"],[1,"right-main-column","minus-rt-col","mar-custom"],[1,"right-col-container"],[1,"body-page-container"],[1,"container-fluid"],[1,"row"],[1,"bg-section"],[1,"col-12"],[1,"row1"],[1,"col-sm-12","col-12","col-md-12"],[1,"white-bg1"],[1,"profile-container"],[1,"profile-bg"],[1,"col-md-12","col-12"],[1,"profile1"],["onerror","this.src='./assets/images/svg/user-profile-w.svg'","class","img-responsive",3,"src",4,"ngIf"],[4,"ngIf"],[1,"cam-click"],[1,"btn-profile"],["src","assets/images/svg/camera.svg"],[1,"col-12","col-md-12"],[1,"col-12","col-md-12","mt-3"],[1,"popup-bottom","delete-profile-pic-1"],[1,"text-center"],[1,"row1","mt-2"],[1,"col-6","text-center"],[1,"ux-button","secondary","no","md","close-btn",3,"click"],[1,"logout-btn","ux-button","primary","md",3,"click"],[1,"popup-bottom","profile1"],[1,"col-10"],[1,"col-2"],[1,"ux-button-icon","close-btn"],["src","assets/images/svg/close-b.svg","alt","cross-icon",1,"img-vsmall"],[1,"profile-list"],[3,"click"],["href","javascript:;"],["src","assets/images/svg/gallery1.svg","alt","gallery-icon"],["src","assets/images/svg/photo-camera.svg","alt","camera-icon"],[1,"delete-btn"],["src","assets/images/svg/delete.svg","alt","remove-icon"],[1,"popup-bottom","header-info"],["src","assets/images/svg/information.svg","alt","information-icon"],[1,"col-12","text-center"],["type","button",1,"ux-button","primary","submit-btn",3,"click"],["onerror","this.src='./assets/images/svg/user-profile-w.svg'",1,"img-responsive",3,"src"]],template:function(e,o){1&e&&(i.ec(0,"div",0),i.ec(1,"div",1),i.ec(2,"div",2),i.ec(3,"div",3),i.ec(4,"div",4),i.ec(5,"div",5),i.ec(6,"div",6),i.ec(7,"div",7),i.ec(8,"div",8),i.ec(9,"div",9),i.ec(10,"div",10),i.ec(11,"div",11),i.ec(12,"div",12),i.ec(13,"div",5),i.ec(14,"div",13),i.ec(15,"div",14),i.Rc(16,S,1,1,"img",15),i.Rc(17,f,3,3,"h3",16),i.ec(18,"em",17),i.ec(19,"a",18),i.Zb(20,"img",19),i.dc(),i.dc(),i.dc(),i.dc(),i.ec(21,"div",8),i.ec(22,"div",20),i.ec(23,"h6"),i.Sc(24),i.qc(25,"translate"),i.dc(),i.ec(26,"h5"),i.Sc(27),i.dc(),i.dc(),i.ec(28,"div",21),i.ec(29,"h6"),i.Sc(30),i.qc(31,"translate"),i.dc(),i.ec(32,"h5"),i.Sc(33),i.dc(),i.dc(),i.ec(34,"div",21),i.ec(35,"h6"),i.Sc(36),i.qc(37,"translate"),i.dc(),i.ec(38,"h5"),i.Sc(39),i.dc(),i.dc(),i.dc(),i.dc(),i.dc(),i.dc(),i.dc(),i.dc(),i.dc(),i.dc(),i.dc(),i.dc(),i.dc(),i.dc(),i.dc(),i.dc(),i.dc(),i.ec(40,"div",22),i.ec(41,"div",5),i.ec(42,"div",7),i.ec(43,"h4",23),i.Sc(44),i.qc(45,"translate"),i.dc(),i.dc(),i.dc(),i.ec(46,"div",5),i.ec(47,"div",7),i.ec(48,"p"),i.Sc(49),i.qc(50,"translate"),i.dc(),i.dc(),i.dc(),i.ec(51,"div",24),i.ec(52,"div",25),i.ec(53,"button",26),i.lc("click",(function(){return o.closeRemoveProfilePopUp()})),i.Sc(54),i.qc(55,"translate"),i.dc(),i.dc(),i.ec(56,"div",25),i.ec(57,"button",27),i.lc("click",(function(){return o.removeProfilePicture("P")})),i.Sc(58),i.qc(59,"translate"),i.dc(),i.dc(),i.dc(),i.dc(),i.ec(60,"div",28),i.ec(61,"div",8),i.ec(62,"div",29),i.ec(63,"h4"),i.Sc(64),i.qc(65,"translate"),i.dc(),i.dc(),i.ec(66,"div",30),i.ec(67,"button",31),i.Zb(68,"img",32),i.dc(),i.dc(),i.dc(),i.ec(69,"div",8),i.ec(70,"div",7),i.ec(71,"ul",33),i.ec(72,"li",34),i.lc("click",(function(){return o.selectImageFromGallery("P")})),i.ec(73,"a",35),i.Zb(74,"img",36),i.Sc(75),i.qc(76,"translate"),i.dc(),i.dc(),i.ec(77,"li",34),i.lc("click",(function(){return o.takePhoto("P")})),i.ec(78,"a",35),i.Zb(79,"img",37),i.Sc(80),i.qc(81,"translate"),i.dc(),i.dc(),i.ec(82,"li",34),i.lc("click",(function(){return o.removeProfilePopUp()})),i.ec(83,"a",38),i.Zb(84,"img",39),i.Sc(85),i.qc(86,"translate"),i.dc(),i.dc(),i.dc(),i.dc(),i.dc(),i.dc(),i.ec(87,"div",40),i.ec(88,"div",8),i.ec(89,"div",7),i.ec(90,"h4",23),i.Zb(91,"img",41),i.Sc(92),i.qc(93,"translate"),i.dc(),i.dc(),i.dc(),i.ec(94,"div",8),i.ec(95,"div",7),i.ec(96,"p"),i.Sc(97),i.qc(98,"translate"),i.dc(),i.dc(),i.dc(),i.ec(99,"div",24),i.ec(100,"div",42),i.ec(101,"button",43),i.lc("click",(function(){return o.closePopup("div.popup-bottom.header-info")})),i.Sc(102),i.qc(103,"translate"),i.dc(),i.dc(),i.dc(),i.dc()),2&e&&(i.Mb(16),i.uc("ngIf",o.dataService.profileImage&&""!=o.dataService.profileImage),i.Mb(1),i.uc("ngIf",""==o.dataService.profileImage),i.Mb(7),i.Tc(i.rc(25,19,"NAME")),i.Mb(3),i.Tc(o.dataService.userName),i.Mb(3),i.Tc(i.rc(31,21,"EMAIL")),i.Mb(3),i.Tc(o.dataService.upiUserEmailAdress),i.Mb(3),i.Tc(i.rc(37,23,"MOBILE_NUMBER")),i.Mb(3),i.Tc(o.mobileNumber),i.Mb(5),i.Tc(i.rc(45,25,"DELETE_PROFILE_PICTURE")),i.Mb(5),i.Uc(" ",i.rc(50,27,"ARE_YOU_SURE_YOU_WANT_TO_DELETE")," "),i.Mb(5),i.Tc(i.rc(55,29,"NO")),i.Mb(4),i.Tc(i.rc(59,31,"YES")),i.Mb(6),i.Tc(i.rc(65,33,"UPLOAD_PROFILE_PICTURE")),i.Mb(11),i.Uc(" ",i.rc(76,35,"SELECT_FROM_GALLERY")," "),i.Mb(5),i.Uc(" ",i.rc(81,37,"TAKE_PHOTO")," "),i.Mb(5),i.Uc(" ",i.rc(86,39,"REMOVE_PROFILE_PICTURE")," "),i.Mb(7),i.Uc(" ",i.rc(93,41,"INFORMATION"),""),i.Mb(5),i.Tc(i.rc(98,43,o.information)),i.Mb(5),i.Tc(i.rc(103,45,"OK")))},directives:[c.t],pipes:[r.a,h.a],styles:[""]}),e})()}];let I=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(o){return new(o||e)},imports:[[a.g.forChild(b)],a.g]}),e})();var P=t("AvjH"),E=t("PCNd");let U=(()=>{class e{}return e.\u0275mod=i.Wb({type:e}),e.\u0275inj=i.Vb({factory:function(o){return new(o||e)},imports:[[c.c,I,E.a,P.a]]}),e})()}}]);