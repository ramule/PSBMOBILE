(window.webpackJsonp=window.webpackJsonp||[]).push([[72,349],{C7Rq:function(t,e,i){"use strict";i.r(e),i.d(e,"CollectSetValidityModule",(function(){return q}));var c=i("ofXK"),r=i("tyNb"),a=i("3Pt+"),o=i("wd/R"),s=i("fXoL"),n=i("EnSQ"),l=i("fUdP"),d=i("TaOT"),u=i("L7Xq"),m=i("5IsW"),p=i("H9Rt"),h=i("fHQ/");let f=(()=>{class t{constructor(t,e,i,c){this.constant=t,this.encryptDecryptService=e,this.storage=i,this.dataService=c}getSetValidityUpdateReq(){var t={[this.constant.key_entityId]:this.constant.getEntityId(this.constant.val_entityId_UMOB)};return console.log("getSetValidityUpdateReq",JSON.stringify(t)),this.encryptDecryptService.encryptText(this.storage.getSessionStorage(this.constant.val_sessionKey),JSON.stringify(t))}}return t.\u0275fac=function(e){return new(e||t)(s.ic(m.a),s.ic(h.a),s.ic(p.a),s.ic(n.a))},t.\u0275prov=s.Ub({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=i("au7T"),g=i("Eioz"),b=i("oBZJ"),y=i("Geda"),S=i("RZqO");function R(t,e){1&t&&(s.ec(0,"span",51),s.Sc(1),s.qc(2,"translate"),s.dc()),2&t&&(s.Mb(1),s.Uc(" ",s.rc(2,1,"ENTER_AMOUNT_ERROR")," "))}function D(t,e){1&t&&(s.ec(0,"p",52),s.Sc(1),s.qc(2,"translate"),s.dc()),2&t&&(s.Mb(1),s.Uc(" ",s.rc(2,1,"ENTER_NUMBER_ERROR"),""))}function M(t,e){1&t&&(s.ec(0,"p",52),s.Sc(1),s.qc(2,"translate"),s.dc()),2&t&&(s.Mb(1),s.Uc(" ",s.rc(2,1,"ENTER_SPECIAL_CHARACTOR_ERROR"),""))}function V(t,e){1&t&&(s.ec(0,"span",53),s.Sc(1),s.qc(2,"translate"),s.dc()),2&t&&(s.Mb(1),s.Uc(" ",s.rc(2,1,"ENTER_DATE_ERROR")," "))}function C(t,e){1&t&&(s.ec(0,"span",53),s.Sc(1),s.qc(2,"translate"),s.dc()),2&t&&(s.Mb(1),s.Uc(" ",s.rc(2,1,"ENTER_TIME_ERROR")," "))}const T=[{path:"",component:(()=>{class t{constructor(t,e,i,c,r,a,s,n,l,d,u,m){this.router=t,this.DataService=e,this.customCurrencyPipe=i,this.formValidation=c,this.http=r,this.constant=a,this.localStorage=s,this.setValidityService=n,this.commonMethod=l,this.translate=d,this.pluginService=u,this.location=m,this.disableTime=!1,this.currentDate=o().toDate(),this.currentTime=o.duration(o().format("hh:mm"),"minutes"),this.information=""}ngOnInit(){this.DataService.setPageSettings("COLLECT"),history.pushState({},"collectAmount",this.location.prepareExternalUrl("collectAmount")),history.pushState({},"self",this.location.prepareExternalUrl(this.router.url)),this.buildForm(),$("#amtValidity").autoNumeric("init",{aSign:"\u20b9 "})}buildForm(){if(this.setValidityForm=new a.j({amount:new a.g("",[a.G.required,a.G.pattern(/(^[0-9.\u20b9, ]*$)/)]),remarks:new a.g("",a.G.pattern(/(^[a-z0-9A-Z.',\- ]*$)/)),date:new a.g(this.DataService.upiCollectRequest.date,[a.G.required]),time:new a.g("",[a.G.required])}),this.minDate=o().toDate(),this.maxDate=o().add(45,"days").toDate(),this.setValidityForm.controls.date.setValue(o(this.DataService.upiCollectRequest.date).format("DD/MM/YYYY")),this.setValidityForm.controls.time.setValue(o(this.DataService.upiCollectRequest.time).format("hh:mm A")),this.DataService.upiCollectRequest.amount){let t=this.customCurrencyPipe.transform(this.DataService.upiCollectRequest.amount,"decimal").replace(/[^.0-9]+/g,"");this.setValidityForm.get("amount").setValue(t)}this.DataService.upiCollectRequest.remarks&&this.setValidityForm.get("remarks").setValue(this.DataService.upiCollectRequest.remarks)}formatCurrency(t){this.formValidation.formatDynamicCurrency("amtValidity",this.setValidityForm);let e=this.setValidityForm.get("amount").value;this.DataService.upiCollectRequest.amount=e}updateSetValidity(){if(this.formValidation.markFormGroupTouched(this.setValidityForm),this.setValidityForm.valid){var t=o().format("YYYY-MM-DD"),e=o(new Date,"DD/MM/YYYY HH:mm:ss"),i=o(this.DataService.upiCollectRequest.time,"DD/MM/YYYY HH:mm:ss"),c=o(this.DataService.upiCollectRequest.date).format("YYYY-MM-DD"),r=o(c).diff(t,"minutes"),a=i.diff(e),s=r+o.duration(a).minutes();if(this.DataService.upiCollectRequest.expiryTime=s.toString(),s<1)return this.information=this.translate.transform("EXPIRY_TIME_ERROR"),void this.commonMethod.openPopup("div.popup-bottom.collect-setValidity");if(s>64800)return this.information=this.translate.transform("EXPIRY_MAX_VALUE_EXCEEDED_ERROR"),void this.commonMethod.openPopup("div.popup-bottom.collect-setValidity");let{remarks:n,amount:l}=this.setValidityForm.value;this.DataService.upiCollectRequest.remarks=n,this.DataService.upiCollectRequest.amount=l,this.router.navigateByUrl("/collectAmount")}}disableTimeIfFutureDateSelected(){this.commonMethod.isToday(this.DataService.upiCollectRequest.date)?this.setValidityForm.get("time").enable():this.setValidityForm.get("time").disable()}openDatePicker(){this.pluginService.openDatePicker("date",this.DataService.upiCollectRequest.date,this.minDate,this.maxDate).subscribe(t=>{this.DataService.upiCollectRequest.date=t,this.setValidityForm.controls.date.setValue(o(this.DataService.upiCollectRequest.date).format("DD/MM/YYYY"))})}openTimePicker(){this.setValidityForm.get("time").disabled||this.pluginService.openDatePicker("time",this.currentDate).subscribe(t=>{this.DataService.upiCollectRequest.time=t,this.setValidityForm.controls.time.setValue(o(this.DataService.upiCollectRequest.time).format("hh:mm A"))})}showCommonToastMsgWithKey(t,e){showToastMessage(this.translate.transform(t),e)}OnChange(t){this.DataService.upiCollectRequest.remarks=t}closePopup(t){this.commonMethod.closePopup(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(r.c),s.Yb(n.a),s.Yb(l.a),s.Yb(d.a),s.Yb(u.a),s.Yb(m.a),s.Yb(p.a),s.Yb(f),s.Yb(v.a),s.Yb(g.a),s.Yb(b.a),s.Yb(c.n))},t.\u0275cmp=s.Sb({type:t,selectors:[["app-collect-set-validity"]],decls:107,vars:48,consts:[[1,"main","main-bg2"],[1,"right-main-column","mar-custom"],[1,"right-col-container","pad-b","pb-0"],[1,"body-page-container"],[1,"vspacer5","d-sm-block","d-none"],[1,"container-fluid"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"bg-section2"],[1,"col-12"],[1,"row1"],[1,"payee-info1"],[1,"info-inner"],[1,"info-lft"],[1,"yellow"],[1,"info-center"],["href","javascript:;"],["src","assets/images/svg/double-left-arrows.svg","alt","double-left-arrows-icon"],[1,"info-rit"],[1,"col-12","col-md-12"],[1,"col-sm-12","col-12","col-md-12"],[1,"ux-input","white-input","mar-tb"],["type","text","inputmode","decimal","placeholder","\u20b9 0","autocomplete","off","formControlName","amount","limit-to","12","id","amtValidity","data-a-sign","Rs.",1,"focusInput",3,"blur"],[1,"text-center"],["class","errormsg","style","top:48px;",4,"ngIf"],["class","text-center error-message",4,"ngIf"],[1,"col-sm-5","col-5","col-md-3","m-auto"],[1,"ux-input","dark-input","mar-tb"],["type","text","formControlName","remarks","autocomplete","off","limit-to","100",1,"focusInput",3,"placeholder","change"],[1,"text-center","col-w"],[1,"info-bottom-container"],[1,"row1","mt-5"],[1,"col-sm-12","col-12","col-md-12","m-auto"],[1,"bottom-info"],[1,"row1","mt-2"],[1,"col-6"],[1,"ux-input"],["type","text","formControlName","date","placeholder","DD/MM/YYYY","readonly","",1,"datepicker1",3,"click"],["class","errormsg",4,"ngIf"],[1,"calendar-ic","cal-top",3,"click"],["type","text","name","time","formControlName","time","readonly","",1,"timepicker",3,"placeholder","click"],[1,"clock-ic","cal-top",3,"click"],[1,"col-12","text-center"],["type","submit",1,"ux-button","primary","submit","md",3,"disabled"],[1,"col-12","text-center","mt-4"],[1,"powered-logo"],["src","assets/images/logo/powered-upi-logo.svg","alt","powered-upi-logo"],[1,"popup-bottom","collect-setValidity"],["src","./assets/images/svg/information.svg","alt","information-icon"],[1,"col-12","text-center",3,"click"],["type","button",1,"ux-button","primary","submit-btn"],[1,"errormsg",2,"top","48px"],[1,"text-center","error-message"],[1,"errormsg"]],template:function(t,e){1&t&&(s.ec(0,"div",0),s.ec(1,"div",1),s.ec(2,"div",2),s.ec(3,"div",3),s.Zb(4,"div",4),s.ec(5,"div",5),s.ec(6,"form",6),s.lc("ngSubmit",(function(){return e.updateSetValidity()})),s.ec(7,"div",7),s.ec(8,"div",8),s.ec(9,"div",9),s.ec(10,"div",10),s.ec(11,"div",11),s.ec(12,"div",7),s.ec(13,"div",12),s.ec(14,"div",13),s.ec(15,"span",14),s.ec(16,"h6"),s.Sc(17),s.qc(18,"firstLastChar"),s.dc(),s.dc(),s.dc(),s.ec(19,"div",15),s.ec(20,"a",16),s.Zb(21,"img",17),s.dc(),s.dc(),s.ec(22,"div",18),s.ec(23,"span",14),s.ec(24,"h6"),s.Sc(25),s.qc(26,"firstLastChar"),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.ec(27,"div",7),s.ec(28,"div",19),s.ec(29,"h5"),s.Sc(30),s.qc(31,"translate"),s.dc(),s.ec(32,"h6"),s.Sc(33),s.qc(34,"translate"),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.ec(35,"div",10),s.ec(36,"div",20),s.ec(37,"div",21),s.ec(38,"input",22),s.lc("blur",(function(t){return e.formatCurrency(t.target.value)})),s.dc(),s.ec(39,"div",23),s.Rc(40,R,3,3,"span",24),s.dc(),s.Rc(41,D,3,3,"p",25),s.Zb(42,"p"),s.dc(),s.dc(),s.dc(),s.ec(43,"div",10),s.ec(44,"div",26),s.ec(45,"div",27),s.ec(46,"input",28),s.lc("change",(function(t){return e.OnChange(t.target.value)})),s.qc(47,"translate"),s.dc(),s.Rc(48,M,3,3,"p",25),s.Zb(49,"p",29),s.dc(),s.dc(),s.dc(),s.ec(50,"div",30),s.ec(51,"div",31),s.ec(52,"div",32),s.ec(53,"div",33),s.ec(54,"div",10),s.ec(55,"div",9),s.ec(56,"h4"),s.Sc(57),s.qc(58,"translate"),s.dc(),s.dc(),s.dc(),s.ec(59,"div",34),s.ec(60,"div",35),s.ec(61,"div",36),s.ec(62,"label"),s.Sc(63),s.qc(64,"translate"),s.dc(),s.ec(65,"input",37),s.lc("click",(function(){return e.openDatePicker()})),s.dc(),s.ec(66,"div",23),s.Rc(67,V,3,3,"span",38),s.dc(),s.Zb(68,"p"),s.ec(69,"em",39),s.lc("click",(function(){return e.openDatePicker()})),s.dc(),s.dc(),s.dc(),s.ec(70,"div",35),s.ec(71,"div",36),s.ec(72,"label"),s.Sc(73),s.qc(74,"translate"),s.dc(),s.ec(75,"input",40),s.lc("click",(function(){return e.openTimePicker()})),s.qc(76,"translate"),s.dc(),s.ec(77,"div",23),s.Rc(78,C,3,3,"span",38),s.dc(),s.Zb(79,"p"),s.ec(80,"em",41),s.lc("click",(function(){return e.openTimePicker()})),s.dc(),s.dc(),s.dc(),s.dc(),s.ec(81,"div",34),s.ec(82,"div",42),s.ec(83,"button",43),s.Sc(84),s.qc(85,"translate"),s.dc(),s.dc(),s.dc(),s.ec(86,"div",10),s.ec(87,"div",44),s.ec(88,"div",45),s.Zb(89,"img",46),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.ec(90,"div",47),s.ec(91,"div",10),s.ec(92,"div",9),s.ec(93,"h4",23),s.Zb(94,"img",48),s.Sc(95),s.qc(96,"translate"),s.dc(),s.dc(),s.dc(),s.ec(97,"div",10),s.ec(98,"div",9),s.ec(99,"p"),s.Sc(100),s.qc(101,"translate"),s.dc(),s.dc(),s.dc(),s.ec(102,"div",34),s.ec(103,"div",49),s.lc("click",(function(){return e.closePopup("div.popup-bottom.collect-setValidity")})),s.ec(104,"button",50),s.Sc(105),s.qc(106,"translate"),s.dc(),s.dc(),s.dc(),s.dc()),2&t&&(s.Mb(6),s.uc("formGroup",e.setValidityForm),s.Mb(11),s.Tc(s.rc(18,22,e.DataService.selectedVpaDetailsCollect.accountDetails.custName)),s.Mb(8),s.Tc(s.rc(26,24,e.DataService.validateAddressResp.MASKNAME)),s.Mb(5),s.Vc("",s.rc(31,26,"COLLECT_FROM")," ",e.DataService.validateAddressResp.MASKNAME,""),s.Mb(3),s.Vc("",s.rc(34,28,"UPI_ID")," : ",e.DataService.validateAddressResp.validatedVpa,""),s.Mb(7),s.uc("ngIf",e.setValidityForm.controls.amount.hasError("required")&&e.setValidityForm.controls.amount.touched),s.Mb(1),s.uc("ngIf",e.setValidityForm.controls.amount.hasError("pattern")),s.Mb(5),s.vc("placeholder",s.rc(47,30,"REMARKS")),s.Mb(2),s.uc("ngIf",e.setValidityForm.controls.remarks.hasError("pattern")),s.Mb(9),s.Tc(s.rc(58,32,"SET_VALIDITY")),s.Mb(6),s.Tc(s.rc(64,34,"DATE")),s.Mb(4),s.uc("ngIf",e.setValidityForm.controls.date.hasError("required")&&e.setValidityForm.controls.date.touched),s.Mb(6),s.Tc(s.rc(74,36,"TIME")),s.Mb(2),s.vc("placeholder",s.rc(76,38,"SELECT_A_TIME")),s.Mb(3),s.uc("ngIf",e.setValidityForm.controls.time.hasError("required")&&e.setValidityForm.controls.time.touched),s.Mb(5),s.uc("disabled",e.setValidityForm.invalid),s.Mb(1),s.Tc(s.rc(85,40,"UPDATE")),s.Mb(11),s.Uc(" ",s.rc(96,42,"INFORMATION"),""),s.Mb(5),s.Tc(s.rc(101,44,e.information)),s.Mb(5),s.Tc(s.rc(106,46,"OK")))},directives:[a.I,a.t,a.k,a.c,a.s,a.i,y.a,c.t],pipes:[S.a,g.a],styles:["input[_ngcontent-%COMP%]::-webkit-calendar-picker-indicator, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none;-webkit-appearance:none}"]}),t})()}];let E=(()=>{class t{}return t.\u0275mod=s.Wb({type:t}),t.\u0275inj=s.Vb({factory:function(e){return new(e||t)},imports:[[r.g.forChild(T)],r.g]}),t})();var k=i("PCNd");let q=(()=>{class t{}return t.\u0275mod=s.Wb({type:t}),t.\u0275inj=s.Vb({factory:function(e){return new(e||t)},providers:[c.f],imports:[[c.c,k.a,a.m,a.C,E]]}),t})()},Geda:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var c=i("fXoL"),r=i("3Pt+"),a=i("au7T");let o=(()=>{class t{constructor(t,e){this.control=t,this.commonMethods=e,this.specialKeys=["Backspace","Tab"]}ngOnChanges(t){const e=+this.limitTo;if(-1===this.specialKeys.indexOf(t.key)&&!this.commonMethods.validateEmpty(this.control.value)&&this.control.value.length>=e){let t=this.control.value.substring(0,e);this.control.control.setValue(t)}}}return t.\u0275fac=function(e){return new(e||t)(c.Yb(r.r),c.Yb(a.a))},t.\u0275dir=c.Tb({type:t,selectors:[["","limit-to",""]],hostBindings:function(t,e){1&t&&c.lc("input",(function(t){return e.ngOnChanges(t)}))},inputs:{limitTo:["limit-to","limitTo"]},features:[c.Kb]}),t})()},TaOT:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var c=i("fXoL"),r=i("fUdP");let a=(()=>{class t{constructor(t){this.customCurrencyPipe=t}markFormGroupTouched(t){Object.values(t.controls).forEach(t=>{t.markAsTouched(),t.controls&&t.controls.forEach(t=>this.markFormGroupTouched(t))})}markFormGroupUntouched(t){Object.values(t.controls).forEach(t=>{t.markAsUntouched(),t.controls&&t.controls.forEach(t=>this.markFormGroupUntouched(t))})}validationMessages(){return{required:"* This field is required",email:"* This email address is invalid",minlength:"* Length is too short",maxlength:"* Length is too long",invalid_characters:t=>{let e=t;return e=e.reduce((t,i,c)=>{let r=t;return r+=i,e.length!==c+1&&(r+=", "),r},""),"These characters are not allowed: "+e}}}validateForm(t,e,i){const c=t;for(const r in e)if(r){e[r]="";const t=c.get(r),a=this.validationMessages();if(t&&!t.valid&&(!i||t.dirty||t.touched))for(const i in t.errors)console.log("======>inside",i),e[r]=i&&"invalid_characters"!==i?e[r]||a[i]:e[r]||a[i](t.errors[i])}return e}formatCurrency(t,e,i){if("0"!=t)if(""!=t){let i=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==i.trim().replace(/[^.0-9]+/g,"")?e.contains("amount")&&e.get("amount").reset():"0"==i.trim().replace(/[^.0-9]+/g,"")?e.get("amount").reset():(console.log(i),e.patchValue({amount:i}))}else e.get("amount").reset("");else e.contains("amount")&&e.get("amount").reset()}formatTransLimit(t,e){if("0"!=t)if(""!=t){let i=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==i?e.contains("transactionLimit")&&e.get("transactionLimit").reset():"0"==i.trim()?e.get("transactionLimit").reset():(console.log(i),e.patchValue({transactionLimit:i}))}else e.get("transactionLimit").reset("");else e.contains("transactionLimit")&&e.get("transactionLimit").reset()}formatDynamicCurrency(t,e){$("#"+t).val()&&"\u20b9 0.00"!=$("#"+t).val()?e.patchValue({amount:$("#"+t).val()}):e.get("amount").reset("")}deFormatValue(t,e){e.patchValue({amount:t.replace(/[^0-9.]+/g,"")})}formatAmtCurrency(t,e,i){if("0"!=t)if(""!=t){let c=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==c?e.contains(i)&&e.get(i).reset():"0"==c.trim()?e.get(i).reset():e.controls[i].patchValue("\u20b9"+c)}else e.get(i).reset("");else e.contains(i)&&e.get(i).reset()}}return t.\u0275fac=function(e){return new(e||t)(c.ic(r.a))},t.\u0275prov=c.Ub({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);