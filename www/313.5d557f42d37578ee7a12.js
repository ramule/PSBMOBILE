(window.webpackJsonp=window.webpackJsonp||[]).push([[313],{jE2U:function(e,c,t){"use strict";t.r(c),t.d(c,"CreateMandateConfirmationModule",(function(){return A}));var a=t("ofXK"),i=t("tyNb"),n=t("XNiG"),r=t("fXoL"),d=t("EnSQ"),o=t("L7Xq"),s=t("5IsW"),l=t("H9Rt"),h=t("38VJ"),p=t("oBZJ"),v=t("Ygbc"),u=t("TiA8"),S=t("4bKs"),m=t("Eioz"),M=t("fUdP");function y(e,c){if(1&e&&(r.ec(0,"li",12),r.ec(1,"div",13),r.ec(2,"div",8),r.ec(3,"div",14),r.ec(4,"div",15),r.ec(5,"h6"),r.Sc(6),r.qc(7,"translate"),r.dc(),r.ec(8,"h5"),r.Sc(9),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc()),2&e){const e=r.pc();r.Mb(6),r.Tc(r.rc(7,2,"DEBIT_DAY")),r.Mb(3),r.Tc(e.createMandatePayment.debitDay)}}const b=[{path:"",component:(()=>{class e{constructor(e,c,t,a,i,n,r,d,o,s,l,h){this.router=e,this.DataService=c,this.http=t,this.constant=a,this.localStorage=i,this.createMandateService=n,this.pluginService=r,this.location=d,this.npciIosService=o,this.npciAndroidService=s,this.ngZone=l,this.loaderService=h,this.headerdata={headerType:"TitleClose",titleName:"CONFIRMATION",footertype:"none"},this.createMandateTxnId=""}ngOnInit(){history.pushState({},"createMandatePayment",this.location.prepareExternalUrl("createMandatePayment")),history.pushState({},"self",this.location.prepareExternalUrl(this.router.url)),this.DataService.changeMessage(this.headerdata),this.createMandatePayment=this.DataService.createMandatePayment,this.getSelectedVpaAccountDetails(),this.npciAndroidService.upiCreateMandateModel={txnId:"",payerVPA:"",payeeVPA:"",txnAmount:"",payeeName:""},this.npciIosService.upiCreateMandateModel={txnId:"",payerVPA:"",payeeVPA:"",txnAmount:"",payeeName:""},this.QRScanData=this.DataService.ScanQrCodeData}goToPage(e){this.DataService.routeWithNgZone(e)}createMandate(){let e=this.defaultVPAAccount;console.log("Create Mandate accountDetails => ",e),this.createMandateTxnId=this.QRScanData.tid||this.QRScanData.qrReferenceNo?this.QRScanData.tid?this.QRScanData.tid:this.QRScanData.qrReferenceNo:"",e.ifsc.includes("PSIB")?(this.DataService.createMandateTxnId=this.createMandateTxnId,this.DataService.preApprovedFlowIdentifier="createMandate",this.DataService.preApprovedBankName=e.bankName,this.DataService.preApprovedAccNo=e.maskedAccountNumber,this.DataService.preApprovedAmount=this.createMandatePayment.amount,this.DataService.preApprovedPreviousPageUrl=this.router.url,this.DataService.routeWithNgZone("transactionPin")):this.callNpciLibrary(e)}callNpciLibrary(e){if(console.log("calling npci library..."),console.log("accountData",e),this.loaderService.showLoader(),window.hasOwnProperty("cordova"))if(this.DataService.platform.toLowerCase()==this.constant.val_android){console.log("Calling NPCI Android service..."),this.npciAndroidService.initData();let c=new n.a;this.npciAndroidService.getTransactionId().subscribe(t=>{this.npciAndroidService.transactionId=this.createMandateTxnId?this.createMandateTxnId:t,this.npciAndroidService.upiCreateMandateModel.payerVPA=this.createMandatePayment.fromUPIId,this.npciAndroidService.upiCreateMandateModel.payeeVPA=this.createMandatePayment.toPayee,this.npciAndroidService.upiCreateMandateModel.txnAmount=this.createMandatePayment.amount,this.npciAndroidService.upiCreateMandateModel.payeeName=this.createMandatePayment.payeeName,this.npciAndroidService.androidStartCLLibrary(e,this.constant.val_npci_flow_createMandate_android,c).subscribe(e=>{if(console.log("Android StartCLLibrary Success => ",e),e.hasOwnProperty("status")&&"00"==e.status){let c=this.createMandateService.createMandateReq(e);this.UpiApiCall(c)}},e=>{console.log("Android StartCLLibrary error => ",e)})})}else if(this.DataService.platform.toLowerCase()==this.constant.val_ios){console.log("Calling NPCI iOS service..."),this.npciIosService.initData();let c=new n.a;this.npciIosService.getTransactionId().subscribe(t=>{this.npciIosService.txnId=this.createMandateTxnId?this.createMandateTxnId:t,this.npciIosService.upiCreateMandateModel.payerVPA=this.createMandatePayment.fromUPIId,this.npciIosService.upiCreateMandateModel.payeeVPA=this.createMandatePayment.toPayee,this.npciIosService.upiCreateMandateModel.txnAmount=this.createMandatePayment.amount,this.npciIosService.upiCreateMandateModel.payeeName=this.createMandatePayment.payeeName,this.npciIosService.iosStartCLLibrary(e,this.constant.val_npci_flow_createMandate_ios,c).subscribe(e=>{if(console.log("iOS StartCLLibrary Success => "),console.log(e),e&&e.credkey){let c=this.createMandateService.createMandateReq(e);this.UpiApiCall(c)}else console.log("NPCI flow cancelled...")},e=>{console.log("iOS StartCLLibrary error => ",e)})})}else console.log("unknown platform = ",this.DataService.platform);else console.log("Cordova not available... unable to start NPCI Library on web")}UpiApiCall(e){this.http.callBankingAPIService(e,this.localStorage.getLocalStorage(this.constant.storage_deviceId),this.constant.upiserviceName_PROCESSUPISERVICESESSION,!0).subscribe(e=>{let c=e.responseParameter.upiResponse;if(this.DataService.createMandateResp=c,this.DataService.upiCallTransactionHistoryApi=!0,"00"==c.status)switch(c.subActionId){case this.constant.upiserviceName_PAYMANDATE:this.ngZone.run(()=>{this.goToPage("/createMandateSuccess")})}},e=>{console.log("ERROR!",e)})}getSelectedVpaAccountDetails(){let e=this.DataService.upiMandateVpaList.find(e=>1==(null==e?void 0:e.isSelected));e&&(this.defaultVPAAccount=this.DataService.getSelectedAccountNoByVpa(e.accounts))}}return e.\u0275fac=function(c){return new(c||e)(r.Yb(i.c),r.Yb(d.a),r.Yb(o.a),r.Yb(s.a),r.Yb(l.a),r.Yb(h.a),r.Yb(p.a),r.Yb(a.n),r.Yb(v.a),r.Yb(u.a),r.Yb(r.H),r.Yb(S.a))},e.\u0275cmp=r.Sb({type:e,selectors:[["app-create-mandate-confirmation"]],decls:113,vars:42,consts:[[1,"main"],[1,"right-main-column","minus-rt-col","mar-custom"],[1,"right-col-container","cust-pb"],[1,"body-page-container"],[1,"container-fluid"],[1,"row"],[1,"bg-section"],[1,"col-12"],[1,"row1"],[1,"col-sm-12","col-12","col-md-12"],[1,"white-bg1","pad-custom"],[1,"complaint-list"],[1,"bor-n"],[1,"full-container"],[1,"col-12","col-md-12"],[1,"left-info"],["class","bor-n",4,"ngIf"],[1,"footer-container","sticky-actions"],[1,"footer-inactions","minus-rt-col"],[1,"col-12","col-md-12","col-lg-12","text-center"],[1,"ux-button","primary","md",3,"click"],[1,"powered-logo"],["src","assets/images/logo/powered-upi-logo.svg","alt","powered-upi-logo"],[1,"popup-bottom","success"],["action","#","id","success-form"],[1,"row","mt-3"],[1,"success"],["src","assets/images/svg/check.svg","alt","success-icon"],["href","#"],[1,"row1","mt-3"],[1,"col-12","text-center"],[1,"ux-button","primary","md"]],template:function(e,c){1&e&&(r.ec(0,"div",0),r.ec(1,"div",1),r.ec(2,"div",2),r.ec(3,"div",3),r.ec(4,"div",4),r.ec(5,"div",5),r.ec(6,"div",6),r.ec(7,"div",7),r.ec(8,"div",8),r.ec(9,"div",9),r.ec(10,"div",10),r.ec(11,"ul",11),r.ec(12,"li",12),r.ec(13,"div",13),r.ec(14,"div",8),r.ec(15,"div",14),r.ec(16,"div",15),r.ec(17,"h6"),r.Sc(18),r.qc(19,"translate"),r.dc(),r.ec(20,"h5"),r.Sc(21),r.qc(22,"translate"),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(23,"li",12),r.ec(24,"div",13),r.ec(25,"div",8),r.ec(26,"div",14),r.ec(27,"div",15),r.ec(28,"h6"),r.Sc(29),r.qc(30,"translate"),r.dc(),r.ec(31,"h5"),r.Sc(32),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(33,"li",12),r.ec(34,"div",13),r.ec(35,"div",8),r.ec(36,"div",14),r.ec(37,"div",15),r.ec(38,"h6"),r.Sc(39),r.qc(40,"translate"),r.dc(),r.ec(41,"h5"),r.Sc(42),r.qc(43,"translate"),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(44,"li",12),r.ec(45,"div",13),r.ec(46,"div",8),r.ec(47,"div",14),r.ec(48,"div",15),r.ec(49,"h6"),r.Sc(50),r.qc(51,"translate"),r.dc(),r.ec(52,"h5"),r.Sc(53),r.qc(54,"customcurrency"),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(55,"li",12),r.ec(56,"div",13),r.ec(57,"div",8),r.ec(58,"div",14),r.ec(59,"div",15),r.ec(60,"h6"),r.Sc(61),r.qc(62,"translate"),r.dc(),r.ec(63,"h5"),r.Sc(64),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(65,"li",12),r.ec(66,"div",13),r.ec(67,"div",8),r.ec(68,"div",14),r.ec(69,"div",15),r.ec(70,"h6"),r.Sc(71),r.qc(72,"translate"),r.dc(),r.ec(73,"h5"),r.Sc(74),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.Rc(75,y,10,4,"li",16),r.ec(76,"li",12),r.ec(77,"div",13),r.ec(78,"div",8),r.ec(79,"div",14),r.ec(80,"div",15),r.ec(81,"h6"),r.Sc(82),r.qc(83,"translate"),r.dc(),r.ec(84,"h5"),r.Sc(85),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(86,"div",17),r.ec(87,"div",18),r.ec(88,"div",4),r.ec(89,"div",5),r.ec(90,"div",19),r.ec(91,"button",20),r.lc("click",(function(){return c.createMandate()})),r.Sc(92),r.qc(93,"translate"),r.dc(),r.dc(),r.dc(),r.ec(94,"div",5),r.ec(95,"div",19),r.ec(96,"div",21),r.Zb(97,"img",22),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(98,"div",23),r.ec(99,"form",24),r.ec(100,"div",25),r.ec(101,"div",26),r.Zb(102,"img",27),r.ec(103,"h3"),r.Sc(104,"Success"),r.dc(),r.ec(105,"h5"),r.Sc(106,"Your complaint has been successfully escalated and reported to "),r.ec(107,"a",28),r.Sc(108,"digitalsupport@psb.com"),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(109,"div",29),r.ec(110,"div",30),r.ec(111,"button",31),r.Sc(112,"Ok"),r.dc(),r.dc(),r.dc(),r.dc(),r.dc()),2&e&&(r.Mb(18),r.Tc(r.rc(19,19,"FROM_UPI_ID")),r.Mb(3),r.Vc("",r.rc(22,21,"UPI_ID")," : ",c.createMandatePayment.fromUPIId,""),r.Mb(8),r.Tc(r.rc(30,23,"PAYEE_NAME")),r.Mb(3),r.Tc(c.createMandatePayment.payeeName),r.Mb(7),r.Tc(r.rc(40,25,"TO_PAYEE")),r.Mb(3),r.Vc("",r.rc(43,27,"UPI_ID")," : ",c.createMandatePayment.toPayee,""),r.Mb(8),r.Tc(r.rc(51,29,"AMOUNT")),r.Mb(3),r.Uc(" ",r.sc(54,31,c.createMandatePayment.amount,"symbol")," "),r.Mb(8),r.Tc(r.rc(62,34,"FREQUENCY")),r.Mb(3),r.Tc(c.createMandatePayment.frequency),r.Mb(7),r.Tc(r.rc(72,36,"VALIDITY")),r.Mb(3),r.Vc(" ",c.createMandatePayment.validityStartDate,"-",c.createMandatePayment.validityEndDate," "),r.Mb(1),r.uc("ngIf","ONETIME"!=c.createMandatePayment.frequency&&"DAILY"!=c.createMandatePayment.frequency&&"ASPRESENTED"!=c.createMandatePayment.frequency),r.Mb(7),r.Tc(r.rc(83,38,"REMARKS")),r.Mb(3),r.Tc(c.createMandatePayment.remarks?c.createMandatePayment.remarks:"-"),r.Mb(7),r.Tc(r.rc(93,40,"CONFIRM")))},directives:[a.t],pipes:[m.a,M.a],styles:[""]}),e})()}];let P=(()=>{class e{}return e.\u0275mod=r.Wb({type:e}),e.\u0275inj=r.Vb({factory:function(c){return new(c||e)},imports:[[i.g.forChild(b)],i.g]}),e})();var g=t("PCNd");let A=(()=>{class e{}return e.\u0275mod=r.Wb({type:e}),e.\u0275inj=r.Vb({factory:function(c){return new(c||e)},imports:[[a.c,g.a,P]]}),e})()}}]);