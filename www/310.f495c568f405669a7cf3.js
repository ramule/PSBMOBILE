(window.webpackJsonp=window.webpackJsonp||[]).push([[310],{IxYY:function(e,c,a){"use strict";a.r(c),a.d(c,"ApproveMandateConfirmationModule",(function(){return g}));var t=a("ofXK"),i=a("tyNb"),r=a("XNiG"),d=a("fXoL"),o=a("EnSQ"),s=a("L7Xq"),n=a("5IsW"),l=a("H9Rt"),p=a("TiA8"),v=a("Ygbc"),h=a("0oYq"),u=a("4bKs"),S=a("Eioz"),D=a("fUdP");function M(e,c){if(1&e&&(d.ec(0,"li",12),d.ec(1,"div",13),d.ec(2,"div",8),d.ec(3,"div",14),d.ec(4,"div",15),d.ec(5,"h6"),d.Sc(6),d.qc(7,"translate"),d.dc(),d.ec(8,"h5"),d.Sc(9),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc()),2&e){const e=d.pc();d.Mb(6),d.Tc(d.rc(7,2,"DEBIT_DAY")),d.Mb(3),d.Tc(null==e.approveMandateDetail?null:e.approveMandateDetail.debitDay)}}const b=[{path:"",component:(()=>{class e{constructor(e,c,a,t,i,r,d,o,s,n){this.router=e,this.DataService=c,this.http=a,this.constant=t,this.localStorage=i,this.npciAndroidService=r,this.npciIosService=d,this.approveMandateService=o,this.loaderService=s,this.location=n,this.headerdata={headerType:"TitleClose",titleName:"CONFIRMATION",footertype:"none"}}ngOnInit(){this.DataService.changeMessage(this.headerdata),history.pushState({},"approveMandateViewDetails",this.location.prepareExternalUrl("approveMandateViewDetails")),history.pushState({},"self",this.location.prepareExternalUrl(this.router.url)),this.approveMandateDetail=this.DataService.approveMandateDetail,this.getLinkedAccount()}approveMandate(){let e=this.VPAAccountDetails;console.log("APPROVE => accountDetails",e),this.DataService.upiPayModelObj.payerAddr=this.approveMandateDetail.payerAddress,this.DataService.upiPayModelObj.payeeAddr=this.approveMandateDetail.payeeAddress,this.DataService.upiPayModelObj.txnAmount=this.approveMandateDetail.amount.trim().replace(/[^.0-9]+/g,""),this.DataService.upiPayModelObj.payeeName=this.approveMandateDetail.payeeName,e.ifsc.includes("PSIB")?(this.DataService.preApprovedFlowIdentifier="approveMandate",this.DataService.preApprovedBankName=e.bankName,this.DataService.preApprovedAccNo=e.maskedAccountNumber,this.DataService.preApprovedAmount=this.DataService.upiPayModelObj.txnAmount,this.DataService.preApprovedPreviousPageUrl=this.router.url,this.router.navigateByUrl("/transactionPin")):this.callNpciLibrary(e,this.DataService.selectedFlow)}goToPage(e){this.router.navigateByUrl("/"+e)}callNpciLibrary(e,c){if(console.log("calling npci library..."),console.log("accountData",e),this.loaderService.showLoader(),window.hasOwnProperty("cordova"))if(this.DataService.platform.toLowerCase()==this.constant.val_android){console.log("Calling NPCI Android service..."),this.npciAndroidService.initData(),this.npciAndroidService.selectedFlow=c;let a=new r.a;this.npciAndroidService.transactionId=this.approveMandateDetail.txnId,this.npciAndroidService.androidStartCLLibrary(e,this.constant.val_npci_flow_acceptMandate_android,a).subscribe(e=>{if(console.log("Android StartCLLibrary Success => ",e),e.hasOwnProperty("status")&&"00"==e.status){let c=this.approveMandateService.approveMandateRequest(this.approveMandateDetail,e);this.UpiApiCall(c)}},e=>{console.log("Android StartCLLibrary error => ",e)})}else if(this.DataService.platform.toLowerCase()==this.constant.val_ios){console.log("Calling NPCI iOS service..."),this.npciIosService.initData(),console.log("selectedFlow",c),this.npciIosService.selectedFlow=c;let a=new r.a;this.npciIosService.txnId=this.approveMandateDetail.txnId,this.npciIosService.iosStartCLLibrary(e,this.constant.val_npci_flow_acceptMandate,a).subscribe(e=>{console.log("iOS StartCLLibrary Success => ",e);let c=this.approveMandateService.approveMandateRequest(this.approveMandateDetail,e);e&&e.credkey?this.UpiApiCall(c):console.log("NPCI flow cancelled...")},e=>{console.log("iOS StartCLLibrary error => ",e)})}else console.log("unknown platform = ",this.DataService.platform);else console.log("Cordova not available... unable to start NPCI Library on web")}UpiApiCall(e){this.http.callBankingAPIService(e,this.localStorage.getLocalStorage(this.constant.storage_deviceId),this.constant.upiserviceName_PROCESSUPISERVICESESSION,!0).subscribe(e=>{let c=e.responseParameter.upiResponse;if(this.DataService.approveMandateResp=c,this.DataService.upiCallTransactionHistoryApi=!0,"00"==c.status)switch(c.subActionId){case this.constant.upiserviceName_ACCEPTMANDATE:console.log("upiserviceName_ACCEPTMANDATE ",JSON.stringify(c)),this.DataService.routeWithNgZone("approveMandateSuccess")}else this.goToPage("upiMandate")},e=>{console.log("ERROR!",e)})}getLinkedAccount(){this.DataService.vpaAddressList.length>0&&(this.DataService.checkIfUPIIdExists(this.approveMandateDetail.payerAddress)?(this.VPADetails=this.DataService.vpaAddressList.find(e=>e.paymentAddress==this.approveMandateDetail.payerAddress),this.VPAAccountDetails=this.VPADetails.accounts.find(e=>"Y"==e.isDefaultAccount)):(this.VPADetails=this.DataService.vpaAddressList.find(e=>"Y"==e.default),this.VPAAccountDetails=this.VPADetails.accounts.find(e=>"Y"==e.isDefaultAccount)))}}return e.\u0275fac=function(c){return new(c||e)(d.Yb(i.c),d.Yb(o.a),d.Yb(s.a),d.Yb(n.a),d.Yb(l.a),d.Yb(p.a),d.Yb(v.a),d.Yb(h.a),d.Yb(u.a),d.Yb(t.n))},e.\u0275cmp=d.Sb({type:e,selectors:[["app-approve-mandate-confirmation"]],decls:118,vars:51,consts:[[1,"main"],[1,"right-main-column","minus-rt-col","mar-custom"],[1,"right-col-container","cust-pb"],[1,"body-page-container"],[1,"container-fluid"],[1,"row"],[1,"bg-section"],[1,"col-12"],[1,"row1"],[1,"col-sm-12","col-12","col-md-12"],[1,"white-bg1","pad-custom"],[1,"complaint-list"],[1,"bor-n"],[1,"full-container"],[1,"col-12","col-md-12"],[1,"left-info"],["class","bor-n",4,"ngIf"],[1,"footer-container","sticky-actions"],[1,"footer-inactions","minus-rt-col"],[1,"col-12","col-md-12","col-lg-12","text-center"],[1,"ux-button","primary","md",3,"click"],[1,"autoplay-logo"],["src","assets/images/svg/upi-autopay-small.svg","alt","upi-autoplay-logo"]],template:function(e,c){1&e&&(d.ec(0,"div",0),d.ec(1,"div",1),d.ec(2,"div",2),d.ec(3,"div",3),d.ec(4,"div",4),d.ec(5,"div",5),d.ec(6,"div",6),d.ec(7,"div",7),d.ec(8,"div",8),d.ec(9,"div",9),d.ec(10,"div",10),d.ec(11,"ul",11),d.ec(12,"li",12),d.ec(13,"div",13),d.ec(14,"div",8),d.ec(15,"div",14),d.ec(16,"div",15),d.ec(17,"h6"),d.Sc(18),d.qc(19,"translate"),d.dc(),d.ec(20,"h5"),d.Sc(21),d.qc(22,"translate"),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.ec(23,"li",12),d.ec(24,"div",13),d.ec(25,"div",8),d.ec(26,"div",14),d.ec(27,"div",15),d.ec(28,"h6"),d.Sc(29),d.qc(30,"translate"),d.dc(),d.ec(31,"h5"),d.Sc(32),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.ec(33,"li",12),d.ec(34,"div",13),d.ec(35,"div",8),d.ec(36,"div",14),d.ec(37,"div",15),d.ec(38,"h6"),d.Sc(39),d.qc(40,"translate"),d.dc(),d.ec(41,"h5"),d.Sc(42),d.qc(43,"translate"),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.ec(44,"li",12),d.ec(45,"div",13),d.ec(46,"div",8),d.ec(47,"div",14),d.ec(48,"div",15),d.ec(49,"h6"),d.Sc(50),d.qc(51,"translate"),d.dc(),d.ec(52,"h5"),d.Sc(53),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.ec(54,"li",12),d.ec(55,"div",13),d.ec(56,"div",8),d.ec(57,"div",14),d.ec(58,"div",15),d.ec(59,"h6"),d.Sc(60),d.qc(61,"translate"),d.dc(),d.ec(62,"h5"),d.Sc(63),d.qc(64,"customcurrency"),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.ec(65,"li",12),d.ec(66,"div",13),d.ec(67,"div",8),d.ec(68,"div",14),d.ec(69,"div",15),d.ec(70,"h6"),d.Sc(71),d.qc(72,"translate"),d.dc(),d.ec(73,"h5"),d.Sc(74),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.ec(75,"li",12),d.ec(76,"div",13),d.ec(77,"div",8),d.ec(78,"div",14),d.ec(79,"div",15),d.ec(80,"h6"),d.Sc(81),d.qc(82,"translate"),d.dc(),d.ec(83,"h5"),d.Sc(84),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.ec(85,"li",12),d.ec(86,"div",13),d.ec(87,"div",8),d.ec(88,"div",14),d.ec(89,"div",15),d.ec(90,"h6"),d.Sc(91),d.qc(92,"translate"),d.dc(),d.ec(93,"h5"),d.Sc(94),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.Rc(95,M,10,4,"li",16),d.ec(96,"li",12),d.ec(97,"div",13),d.ec(98,"div",8),d.ec(99,"div",14),d.ec(100,"div",15),d.ec(101,"h6"),d.Sc(102),d.qc(103,"translate"),d.dc(),d.ec(104,"h5"),d.Sc(105),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.ec(106,"div",17),d.ec(107,"div",18),d.ec(108,"div",4),d.ec(109,"div",5),d.ec(110,"div",19),d.ec(111,"button",20),d.lc("click",(function(){return c.approveMandate()})),d.Sc(112),d.qc(113,"translate"),d.dc(),d.dc(),d.dc(),d.ec(114,"div",5),d.ec(115,"div",19),d.ec(116,"div",21),d.Zb(117,"img",22),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc(),d.dc()),2&e&&(d.Mb(18),d.Tc(d.rc(19,24,"REQUEST_FROM_UPI_ID")),d.Mb(3),d.Vc("",d.rc(22,26,"UPI_ID")," : ",c.approveMandateDetail.payeeAddress,""),d.Mb(8),d.Tc(d.rc(30,28,"PAYEE_NAME")),d.Mb(3),d.Tc(c.approveMandateDetail.payeeName),d.Mb(7),d.Tc(d.rc(40,30,"DEBIT_FROM_UPI_ID")),d.Mb(3),d.Vc("",d.rc(43,32,"UPI_ID")," : ",c.approveMandateDetail.payerAddress,""),d.Mb(8),d.Tc(d.rc(51,34,"LINKED_ACCOUNT")),d.Mb(3),d.Vc(" ",c.VPAAccountDetails.accType," ",c.VPAAccountDetails.maskedAccountNumber,""),d.Mb(7),d.Tc(d.rc(61,36,"AMOUNT")),d.Mb(3),d.Uc(" ",d.sc(64,38,c.approveMandateDetail.amount,"symbol")," "),d.Mb(8),d.Tc(d.rc(72,41,"FREQUENCY")),d.Mb(3),d.Tc(c.approveMandateDetail.frequency),d.Mb(7),d.Tc(d.rc(82,43,"VALIDITY")),d.Mb(3),d.Vc("",c.approveMandateDetail.validityStart," - ",c.approveMandateDetail.validityEnd," "),d.Mb(7),d.Tc(d.rc(92,45,"EXPIRY_DATE_AND_TIME")),d.Mb(3),d.Uc("",c.approveMandateDetail.expiredDate," "),d.Mb(1),d.uc("ngIf","ONETIME"!=c.approveMandateDetail.frequency&&"DAILY"!=c.approveMandateDetail.frequency&&"ASPRESENTED"!=c.approveMandateDetail.frequency),d.Mb(7),d.Tc(d.rc(103,47,"REMARKS")),d.Mb(3),d.Tc(c.approveMandateDetail.remarks),d.Mb(7),d.Tc(d.rc(113,49,"CONFIRM")))},directives:[t.t],pipes:[S.a,D.a],styles:[""]}),e})()}];let A=(()=>{class e{}return e.\u0275mod=d.Wb({type:e}),e.\u0275inj=d.Vb({factory:function(c){return new(c||e)},imports:[[i.g.forChild(b)],i.g]}),e})();var y=a("PCNd");let g=(()=>{class e{}return e.\u0275mod=d.Wb({type:e}),e.\u0275inj=d.Vb({factory:function(c){return new(c||e)},imports:[[t.c,y.a,A]]}),e})()}}]);