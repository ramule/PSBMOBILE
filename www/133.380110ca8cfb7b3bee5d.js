(window.webpackJsonp=window.webpackJsonp||[]).push([[133,349],{TaOT:function(t,e,o){"use strict";o.d(e,"a",(function(){return c}));var s=o("fXoL"),i=o("fUdP");let c=(()=>{class t{constructor(t){this.customCurrencyPipe=t}markFormGroupTouched(t){Object.values(t.controls).forEach(t=>{t.markAsTouched(),t.controls&&t.controls.forEach(t=>this.markFormGroupTouched(t))})}markFormGroupUntouched(t){Object.values(t.controls).forEach(t=>{t.markAsUntouched(),t.controls&&t.controls.forEach(t=>this.markFormGroupUntouched(t))})}validationMessages(){return{required:"* This field is required",email:"* This email address is invalid",minlength:"* Length is too short",maxlength:"* Length is too long",invalid_characters:t=>{let e=t;return e=e.reduce((t,o,s)=>{let i=t;return i+=o,e.length!==s+1&&(i+=", "),i},""),"These characters are not allowed: "+e}}}validateForm(t,e,o){const s=t;for(const i in e)if(i){e[i]="";const t=s.get(i),c=this.validationMessages();if(t&&!t.valid&&(!o||t.dirty||t.touched))for(const o in t.errors)console.log("======>inside",o),e[i]=o&&"invalid_characters"!==o?e[i]||c[o]:e[i]||c[o](t.errors[o])}return e}formatCurrency(t,e,o){if("0"!=t)if(""!=t){let o=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==o.trim().replace(/[^.0-9]+/g,"")?e.contains("amount")&&e.get("amount").reset():"0"==o.trim().replace(/[^.0-9]+/g,"")?e.get("amount").reset():(console.log(o),e.patchValue({amount:o}))}else e.get("amount").reset("");else e.contains("amount")&&e.get("amount").reset()}formatTransLimit(t,e){if("0"!=t)if(""!=t){let o=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==o?e.contains("transactionLimit")&&e.get("transactionLimit").reset():"0"==o.trim()?e.get("transactionLimit").reset():(console.log(o),e.patchValue({transactionLimit:o}))}else e.get("transactionLimit").reset("");else e.contains("transactionLimit")&&e.get("transactionLimit").reset()}formatDynamicCurrency(t,e){$("#"+t).val()&&"\u20b9 0.00"!=$("#"+t).val()?e.patchValue({amount:$("#"+t).val()}):e.get("amount").reset("")}deFormatValue(t,e){e.patchValue({amount:t.replace(/[^0-9.]+/g,"")})}formatAmtCurrency(t,e,o){if("0"!=t)if(""!=t){let s=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==s?e.contains(o)&&e.get(o).reset():"0"==s.trim()?e.get(o).reset():e.controls[o].patchValue("\u20b9"+s)}else e.get(o).reset("");else e.contains(o)&&e.get(o).reset()}}return t.\u0275fac=function(e){return new(e||t)(s.ic(i.a))},t.\u0275prov=s.Ub({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},aw9R:function(t,e,o){"use strict";o.r(e),o.d(e,"ReissueCardAuthorizationModule",(function(){return T}));var s=o("PCNd"),i=o("ofXK"),c=o("3Pt+"),r=o("PqYM"),n=o("fXoL"),a=o("tyNb"),d=o("EnSQ"),l=o("TaOT"),u=o("5IsW"),h=o("fHQ/"),m=o("H9Rt");let p=(()=>{class t{constructor(t,e,o,s,i,c){this.constant=t,this.encryptService=e,this.constants=o,this.localStorage=s,this.dataService=i,this.encryptDecryptService=c}getSendOTPSessionReq(t){var e;return e={[this.constants.key_entityId]:this.constant.getEntityId(),[this.constants.key_cbsType]:this.constants.val_cbsTypeTcs,[this.constants.key_mobPlatform]:this.constants.val_mobPlatform,[this.constants.key_mobileAppVersion]:this.constants.val_mobileAppVersion,[this.constant.key_deviceId]:this.localStorage.getLocalStorage(this.constant.storage_deviceId),[this.constant.key_clientAppVersion]:this.constants.val_clientAppVersion,[this.constant.key_MobileNo]:this.localStorage.getLocalStorage("mobileNo"),[this.constant.key_OTP]:t,[this.constant.key_latitude]:this.constant.val_latitude,[this.constant.key_longitude]:this.constant.val_longitude},console.log(e),this.encryptService.encryptText(this.localStorage.getSessionStorage(this.constant.val_sessionKey),JSON.stringify(e))}getResendOTPSessionReq(){var t;return t={[this.constants.key_entityId]:this.constant.getEntityId(),[this.constants.key_cbsType]:this.constants.val_cbsTypeTcs,[this.constants.key_mobPlatform]:this.constants.val_mobPlatform,[this.constants.key_mobileAppVersion]:this.constants.val_mobileAppVersion,[this.constant.key_deviceId]:this.localStorage.getLocalStorage(this.constant.storage_deviceId),[this.constant.key_clientAppVersion]:this.constants.val_clientAppVersion,[this.constant.key_MobileNo]:this.localStorage.getLocalStorage("mobileNo"),[this.constant.key_latitude]:this.constant.val_latitude,[this.constant.key_longitude]:this.constant.val_longitude},console.log("resend OTP",JSON.stringify(t)),this.encryptDecryptService.encryptText(this.localStorage.getSessionStorage(this.constant.val_sessionKey),JSON.stringify(t))}}return t.\u0275fac=function(e){return new(e||t)(n.ic(u.a),n.ic(h.a),n.ic(u.a),n.ic(m.a),n.ic(d.a),n.ic(h.a))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=o("L7Xq"),v=o("au7T"),b=o("Eioz"),S=o("goA9");function f(t,e){if(1&t){const t=n.fc();n.ec(0,"li"),n.ec(1,"a",60),n.lc("click",(function(){n.Hc(t);const o=e.$implicit;return n.pc().DataService.breadcrumroute(o.routeName)})),n.Sc(2),n.qc(3,"translate"),n.dc(),n.dc()}if(2&t){const t=e.$implicit;n.Mb(2),n.Tc(n.rc(3,1,t.currentRoute))}}function y(t,e){if(1&t&&(n.ec(0,"span",61),n.Sc(1),n.qc(2,"formatTimer"),n.dc()),2&t){const t=n.pc();n.Mb(1),n.Tc(n.rc(2,1,t.counter))}}const w=[{path:"",component:(()=>{class t{constructor(t,e,o,s,i,c,r,n,a){this.router=t,this.DataService=e,this.formValidation=o,this.reissueCardAuthorizationService=s,this.encryptDecryptService=i,this.storage=c,this.constant=r,this.http=n,this.commonMethod=a,this.formErrors={otp:""},this.mobNumber="",this.counter=120,this.tick=1e3}ngOnInit(){this.DataService.setPageSettings("OTP"),this.DataService.setShowThemeObservable(!0),this.DataService.setShowsideNavObservable(!0),this.DataService.setShowNotificationObservable(!0),this.DataService.getBreadcrumb("AUTHORIZATION",this.router.url),this.buildForm(),this.resendOTP(),this.mobNumber=this.commonMethod.maskMobileNumber(this.storage.getLocalStorage(this.constant.storage_mobileNo)),this.countDown=Object(r.a)(0,this.tick).subscribe(()=>--this.counter)}buildForm(){this.otpSessionForm=new c.j(4==this.DataService.otplength?{otp1:new c.g("",[c.G.required,c.G.minLength(1),c.G.maxLength(1)]),otp2:new c.g("",[c.G.required,c.G.minLength(1),c.G.maxLength(1)]),otp3:new c.g("",[c.G.required,c.G.minLength(1),c.G.maxLength(1)]),otp4:new c.g("",[c.G.required,c.G.minLength(1),c.G.maxLength(1)])}:{otp1:new c.g("",[c.G.required,c.G.minLength(1),c.G.maxLength(1)]),otp2:new c.g("",[c.G.required,c.G.minLength(1),c.G.maxLength(1)]),otp3:new c.g("",[c.G.required,c.G.minLength(1),c.G.maxLength(1)]),otp4:new c.g("",[c.G.required,c.G.minLength(1),c.G.maxLength(1)]),otp5:new c.g("",[c.G.required,c.G.minLength(1),c.G.maxLength(1)]),otp6:new c.g("",[c.G.required,c.G.minLength(1),c.G.maxLength(1)])})}validateForm(){if(this.otpSessionForm.invalid)return this.otpSessionForm.get("otp1").markAsTouched(),this.otpSessionForm.get("otp2").markAsTouched(),this.otpSessionForm.get("otp3").markAsTouched(),this.otpSessionForm.get("otp4").markAsTouched(),6==this.DataService.otplength&&(this.otpSessionForm.get("otp5").markAsTouched(),this.otpSessionForm.get("otp6").markAsTouched()),void(this.formErrors=this.formValidation.validateForm(this.otpSessionForm,this.formErrors,!0))}confirmOtpClick(){if(this.validateForm(),console.log(this.otpSessionForm.value),this.otpSessionForm.valid){var t=this.reissueCardAuthorizationService.getSendOTPSessionReq(4==this.DataService.otplength?this.otpSessionForm.value.otp1+this.otpSessionForm.value.otp2+this.otpSessionForm.value.otp3+this.otpSessionForm.value.otp4:this.otpSessionForm.value.otp1+this.otpSessionForm.value.otp2+this.otpSessionForm.value.otp3+this.otpSessionForm.value.otp4+this.otpSessionForm.value.otp5+this.otpSessionForm.value.otp6);this.submitOtpSession(t)}}submitOtpSession(t){console.log("this.dataService.request"+this.DataService.request),this.tempDecryptedReq=JSON.parse(this.encryptDecryptService.decryptText(this.storage.getSessionStorage(this.constant.val_sessionKey),this.DataService.request)),console.log(this.tempDecryptedReq),this.tempDecryptedReq.methodName=this.DataService.endPoint.split("/")[1],this.tempDecryptedReq.value=this.otpSessionForm.value.otp1+this.otpSessionForm.value.otp2+this.otpSessionForm.value.otp3+this.otpSessionForm.value.otp4+this.otpSessionForm.value.otp5+this.otpSessionForm.value.otp6,this.tempDecryptedReq.customerID=this.DataService.userDetails.customerId,console.log(this.tempDecryptedReq);let e=this.encryptDecryptService.encryptText(this.storage.getSessionStorage(this.constant.val_sessionKey),JSON.stringify(this.tempDecryptedReq));this.DataService.request=e,console.log(this.DataService.request),this.submitReq()}submitReq(){this.http.callBankingAPIService(this.DataService.request,this.storage.getLocalStorage(this.constant.storage_deviceId),this.DataService.endPoint).subscribe(t=>{"00"==t.responseParameter.opstatus?(console.log(t),this.DataService.reissuedCardObj.response="Successful"):this.DataService.reissuedCardObj.response="Failed",this.DataService.reissuedCardObj.msg=t.responseParameter.Result,this.DataService.reissuedCardObj.rrn=""==t.responseParameter.RRN?"-":t.responseParameter.RRN,this.router.navigate(["/reissueCardSuccess"])})}resendOTP(){this.otpSessionForm.reset();var t=this.reissueCardAuthorizationService.getResendOTPSessionReq();this.http.callBankingAPIService(t,this.storage.getLocalStorage(this.constant.storage_deviceId),this.constant.serviceName_RESENDOTPSESSION).subscribe(t=>{"00"==t.responseParameter.opstatus&&(this.startCounter(),showToastMessage(t.responseParameter.Result,"success"))})}onSearchChange(t,e){console.log(t),1==e?1==t.length&&document.getElementById("otppassword2").focus():2==e?1==t.length?document.getElementById("otppassword3").focus():document.getElementById("otppassword1").focus():3==e?1==t.length?document.getElementById("otppassword4").focus():document.getElementById("otppassword2").focus():4==e?1==t.length?document.getElementById("otppassword5").focus():document.getElementById("otppassword3").focus():5==e?1==t.length?document.getElementById("otppassword6").focus():document.getElementById("otppassword4").focus():6==e&&0==t.length&&document.getElementById("otppassword5").focus()}startCounter(){this.tick=1e3,this.counter=120,this.countDown&&!this.countDown.closed&&this.countDown.unsubscribe(),this.countDown=Object(r.a)(0,this.tick).subscribe(()=>{1==this.counter&&this.countDown.unsubscribe(),--this.counter})}cancel(){"web"==this.constant.getIsCordova()?this.router.navigateByUrl("/dashboard"):this.router.navigateByUrl("/dashboardMobile")}goToPage(t){this.router.navigateByUrl("/"+t)}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(a.c),n.Yb(d.a),n.Yb(l.a),n.Yb(p),n.Yb(h.a),n.Yb(m.a),n.Yb(u.a),n.Yb(g.a),n.Yb(v.a))},t.\u0275cmp=n.Sb({type:t,selectors:[["app-reissue-card-authorization"]],decls:100,vars:7,consts:[[1,"main","bg-m"],[1,"nav-overlay"],[1,"right-main-column"],[1,"right-col-container","pad-b","full-width"],[1,"body-page-container","main-dashborad","manage-payee"],[1,"container-fluid"],[1,"row"],[1,"col-12","p-0"],[1,"breadcrumb"],[1,"lst-breadcrumb"],[4,"ngFor","ngForOf"],[1,"vspacer15","customize","d-none","d-md-block","d-lg-block","d-xl-block"],[1,"row","no-gutters"],[1,"col-12"],[1,"row1"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-9"],[1,"greencard2"],[1,"row1","hide-m"],[1,"col-md-8","col-12"],[1,"col-md-4","col-12"],[1,"col-sm-12","col-12","col-md-12"],[1,"white-box2","mar-t","pad-custom","custom-bor"],[1,"col-12","col-md-8","col-lg-9","col-xl-9"],[3,"formGroup"],[1,"col-12","col-md-12"],[1,"ux-input"],[1,"info-message2"],[1,"col-12","col-md-8","col-lg-8","col-xl-7"],[1,"col-12","pl-2","pr-2"],[1,"row3"],[1,"col-sm-2","col-2","col-md-2"],[1,"ux-input","password1","mb-1"],["id","otppassword1","type","password","maxlength","1","placeholder","\u25cf","formControlName","otp1",3,"input"],["id","otppassword2","type","password","maxlength","1","placeholder","\u25cf","formControlName","otp2",3,"input"],["id","otppassword3","type","password","maxlength","1","placeholder","\u25cf","formControlName","otp3",3,"input"],["id","otppassword4","type","password","maxlength","1","placeholder","\u25cf","formControlName","otp4",3,"input"],["id","otppassword5","type","password","maxlength","1","placeholder","\u25cf","formControlName","otp5",3,"input"],["id","otppassword6","type","password","maxlength","1","placeholder","\u25cf","formControlName","otp6",3,"input"],[1,"ux-input","password1","mt-0","mb-0"],[1,"error-message"],[1,"col-6","col-md-6"],[1,"text-left"],["class","success-text",4,"ngIf"],[1,"text-right"],[1,"ux-linkbutton","default-underline","mt-3",3,"ngClass","click"],[1,"col-12","col-md-4","col-lg-3","col-xl-3","text-right","hide-m"],[1,"mobile-img"],["src","assets/images/icons/mobile.svg","alt","mobile-icon"],[1,"result-container1","mar-top"],[1,"info-bottom","pad-custom"],[1,"info-details","mt-3"],[1,"info-details"],[1,"bottom-footer1"],[1,"btn-div"],[1,"ux-button","secondary","sm-mob",3,"click"],[1,"ux-button","primary","sm-mob",3,"click"],[1,"col-12","col-md-12","col-lg-12","col-xl-3","d-none","d-xl-block"],[1,"right-ads"],["src","assets/images/banner/my-card-banner.jpg"],[1,"vspacer30"],[3,"click"],[1,"success-text"]],template:function(t,e){1&t&&(n.ec(0,"div",0),n.Zb(1,"div",1),n.ec(2,"div",2),n.ec(3,"div",3),n.ec(4,"div",4),n.ec(5,"div",5),n.ec(6,"div",6),n.ec(7,"div",7),n.ec(8,"div",8),n.ec(9,"ul",9),n.Rc(10,f,4,3,"li",10),n.dc(),n.dc(),n.dc(),n.dc(),n.Zb(11,"div",11),n.ec(12,"div",12),n.ec(13,"div",13),n.ec(14,"div",14),n.ec(15,"div",15),n.ec(16,"div",16),n.ec(17,"div",17),n.ec(18,"div",18),n.ec(19,"h4"),n.Sc(20,"Enter OTP"),n.dc(),n.dc(),n.Zb(21,"div",19),n.dc(),n.ec(22,"div",14),n.ec(23,"div",20),n.ec(24,"div",21),n.ec(25,"div",14),n.ec(26,"div",22),n.ec(27,"form",23),n.ec(28,"div",14),n.ec(29,"div",24),n.ec(30,"div",25),n.ec(31,"em",26),n.Sc(32),n.dc(),n.dc(),n.dc(),n.ec(33,"div",27),n.ec(34,"div",6),n.ec(35,"div",28),n.ec(36,"div",29),n.ec(37,"div",30),n.ec(38,"div",31),n.ec(39,"input",32),n.lc("input",(function(t){return e.onSearchChange(t.target.value,1)})),n.dc(),n.dc(),n.dc(),n.ec(40,"div",30),n.ec(41,"div",31),n.ec(42,"input",33),n.lc("input",(function(t){return e.onSearchChange(t.target.value,2)})),n.dc(),n.dc(),n.dc(),n.ec(43,"div",30),n.ec(44,"div",31),n.ec(45,"input",34),n.lc("input",(function(t){return e.onSearchChange(t.target.value,3)})),n.dc(),n.dc(),n.dc(),n.ec(46,"div",30),n.ec(47,"div",31),n.ec(48,"input",35),n.lc("input",(function(t){return e.onSearchChange(t.target.value,4)})),n.dc(),n.dc(),n.dc(),n.ec(49,"div",30),n.ec(50,"div",31),n.ec(51,"input",36),n.lc("input",(function(t){return e.onSearchChange(t.target.value,5)})),n.dc(),n.dc(),n.dc(),n.ec(52,"div",30),n.ec(53,"div",31),n.ec(54,"input",37),n.lc("input",(function(t){return e.onSearchChange(t.target.value,6)})),n.dc(),n.dc(),n.dc(),n.dc(),n.ec(55,"div",14),n.ec(56,"div",13),n.ec(57,"div",38),n.Zb(58,"p",39),n.dc(),n.dc(),n.dc(),n.ec(59,"div",29),n.ec(60,"div",40),n.ec(61,"div",41),n.ec(62,"p",41),n.Rc(63,y,3,3,"span",42),n.dc(),n.dc(),n.dc(),n.ec(64,"div",40),n.ec(65,"div",43),n.ec(66,"button",44),n.lc("click",(function(){return e.resendOTP()})),n.Sc(67,"Resend"),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.ec(68,"div",45),n.ec(69,"div",46),n.Zb(70,"img",47),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.ec(71,"div",20),n.ec(72,"div",48),n.ec(73,"div",49),n.ec(74,"div",50),n.ec(75,"div",6),n.ec(76,"h6"),n.Sc(77,"Debit Card Number"),n.dc(),n.ec(78,"h5"),n.Sc(79),n.dc(),n.dc(),n.dc(),n.ec(80,"div",51),n.ec(81,"div",6),n.ec(82,"h6"),n.Sc(83,"Linked Account"),n.dc(),n.ec(84,"h5"),n.Sc(85),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.ec(86,"div",24),n.ec(87,"ul",52),n.ec(88,"li"),n.ec(89,"div",53),n.ec(90,"button",54),n.lc("click",(function(){return e.cancel()})),n.Sc(91,"Cancel"),n.dc(),n.dc(),n.ec(92,"div",53),n.ec(93,"button",55),n.lc("click",(function(){return e.confirmOtpClick()})),n.Sc(94,"Confirm"),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.ec(95,"div",56),n.ec(96,"div",57),n.ec(97,"a"),n.Zb(98,"img",58),n.dc(),n.dc(),n.Zb(99,"div",59),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc(),n.dc()),2&t&&(n.Mb(10),n.uc("ngForOf",e.DataService.breadcrumblist),n.Mb(17),n.uc("formGroup",e.otpSessionForm),n.Mb(5),n.Uc("OTP sent on your registered Mobile number ending with ",e.mobNumber,""),n.Mb(31),n.uc("ngIf",e.counter>0),n.Mb(3),n.uc("ngClass",e.counter>0?"mydisabled":"resendActive"),n.Mb(13),n.Tc(e.DataService.reissuedCardObj.debitCardNumber),n.Mb(6),n.Tc(e.DataService.reissuedCardObj.accountNumber))},directives:[i.s,c.I,c.t,c.k,c.c,c.n,c.s,c.i,i.t,i.q],pipes:[b.a,S.c],styles:[""]}),t})()}];let k=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},imports:[[a.g.forChild(w)],a.g]}),t})(),T=(()=>{class t{}return t.\u0275mod=n.Wb({type:t}),t.\u0275inj=n.Vb({factory:function(e){return new(e||t)},imports:[[i.c,k,c.m,c.C,s.a]]}),t})()}}]);