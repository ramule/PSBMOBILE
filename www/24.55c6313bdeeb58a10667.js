(window.webpackJsonp=window.webpackJsonp||[]).push([[24,65,109,349],{Geda:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var n=o("fXoL"),i=o("3Pt+"),s=o("au7T");let r=(()=>{class t{constructor(t,e){this.control=t,this.commonMethods=e,this.specialKeys=["Backspace","Tab"]}ngOnChanges(t){const e=+this.limitTo;if(-1===this.specialKeys.indexOf(t.key)&&!this.commonMethods.validateEmpty(this.control.value)&&this.control.value.length>=e){let t=this.control.value.substring(0,e);this.control.control.setValue(t)}}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(i.r),n.Yb(s.a))},t.\u0275dir=n.Tb({type:t,selectors:[["","limit-to",""]],hostBindings:function(t,e){1&t&&n.lc("input",(function(t){return e.ngOnChanges(t)}))},inputs:{limitTo:["limit-to","limitTo"]},features:[n.Kb]}),t})()},OXpz:function(t,e,o){"use strict";o.d(e,"d",(function(){return s})),o.d(e,"b",(function(){return r})),o.d(e,"a",(function(){return a})),o.d(e,"c",(function(){return c}));var n=o("fXoL"),i=o("3Pt+");let s=(()=>{class t{constructor(t){this.control=t,this.specialKeys=["Backspace","Tab"]}ngOnChanges(t){if(-1===this.specialKeys.indexOf(t.key)&&!/^[0-9]*$/.test(this.control.value)){let t=this.control.value.replace(/[^0-9]/g,"");this.control.control.setValue(t)}}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(i.r))},t.\u0275dir=n.Tb({type:t,selectors:[["","numbersOnly",""]],hostBindings:function(t,e){1&t&&n.lc("input",(function(t){return e.ngOnChanges(t)}))},features:[n.Kb]}),t})(),r=(()=>{class t{constructor(t){this.control=t,this.specialKeys=["Backspace","Tab"]}ngOnChanges(t){if(-1===this.specialKeys.indexOf(t.key)&&this.control.value){let t=this.control.value.replace(/[^.0-9]+/g,"");this.control.control.setValue(t)}}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(i.r))},t.\u0275dir=n.Tb({type:t,selectors:[["","digitOnly",""]],hostBindings:function(t,e){1&t&&n.lc("input",(function(t){return e.ngOnChanges(t)}))},features:[n.Kb]}),t})(),a=(()=>{class t{constructor(t){this.el=t,this.regex=new RegExp(/^\d*\.?\d{0,2}$/g),this.specialKeys=["Backspace","Tab","End","Home","-","ArrowLeft","ArrowRight","Del","Delete"]}onKeyDown(t){if(console.log(this.el.nativeElement.value),-1!==this.specialKeys.indexOf(t.key))return;let e=this.el.nativeElement.value;const o=this.el.nativeElement.selectionStart,n=[e.slice(0,o),"Decimal"==t.key?".":t.key,e.slice(o)].join("");n&&!String(n).match(this.regex)&&t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.o))},t.\u0275dir=n.Tb({type:t,selectors:[["","amountOnly",""]],hostBindings:function(t,e){1&t&&n.lc("keydown",(function(t){return e.onKeyDown(t)}))}}),t})(),c=(()=>{class t{constructor(t){this._el=t}onInputChange(t){const e=this._el.nativeElement.value;this._el.nativeElement.value=e.replace(/[^0-9]*/g,""),e!==this._el.nativeElement.value&&t.stopPropagation()}}return t.\u0275fac=function(e){return new(e||t)(n.Yb(n.o))},t.\u0275dir=n.Tb({type:t,selectors:[["input","numericOnly",""]],hostBindings:function(t,e){1&t&&n.lc("input",(function(t){return e.onInputChange(t)}))}}),t})()},QrBj:function(t,e,o){"use strict";o.d(e,"a",(function(){return c}));var n=o("fXoL"),i=o("5IsW"),s=o("fHQ/"),r=o("H9Rt"),a=o("EnSQ");let c=(()=>{class t{constructor(t,e,o,n,i){this.constant=t,this.encryptService=e,this.constants=o,this.localStorage=n,this.dataService=i}getResendOTPReq(t){var e;return e={[this.constants.key_entityId]:this.constant.getEntityId(),[this.constants.key_cbsType]:this.constants.val_cbsTypeTcs,[this.constants.key_mobPlatform]:this.constants.val_mobPlatform,[this.constants.key_mobileAppVersion]:this.constants.val_mobileAppVersion,[this.constant.key_deviceId]:null==this.localStorage.getLocalStorage("deviceId")?this.constant.val_DeviceID:this.localStorage.getLocalStorage("deviceId"),[this.constant.key_clientAppVersion]:this.constants.val_clientAppVersion,[this.constant.key_latitude]:this.constant.val_latitude,[this.constant.key_longitude]:this.constant.val_longitude,[this.constant.key_service_Type]:"Login"},this.constant.getEntityId()==this.constant.val_Desktop&&"/login"==t?e[this.constant.key_UserID]=this.localStorage.getLocalStorage("username"):e[this.constant.key_MobileNo]=this.localStorage.getLocalStorage("mobileNo"),console.log("resend OTP",JSON.stringify(e)),console.log("mobStaticEncKey ",this.dataService.mobStaticEncKey),this.encryptService.encryptText(this.dataService.mobStaticEncKey,JSON.stringify(e))}getSendOTPReq(t,e){var o;return o={[this.constants.key_entityId]:this.constant.getEntityId(),[this.constants.key_cbsType]:this.constants.val_cbsTypeTcs,[this.constants.key_mobPlatform]:this.constants.val_mobPlatform,[this.constants.key_mobileAppVersion]:this.constants.val_mobileAppVersion,[this.constant.key_deviceId]:this.localStorage.getLocalStorage("deviceId"),[this.constants.key_OTP]:t,[this.constant.key_clientAppVersion]:this.constants.val_clientAppVersion,[this.constant.key_latitude]:this.constant.val_latitude,[this.constant.key_longitude]:this.constant.val_longitude,[this.constant.key_service_Type]:this.constant.val_REGISTRATION},this.constant.getEntityId()==this.constant.val_Desktop&&"/login"==e?o[this.constant.key_UserID]=this.localStorage.getLocalStorage("username"):o[this.constant.key_MobileNo]=this.localStorage.getLocalStorage("mobileNo"),console.log(o),console.log("mobStaticEncKey ",this.dataService.mobStaticEncKey),this.encryptService.encryptText(this.dataService.mobStaticEncKey,JSON.stringify(o))}}return t.\u0275fac=function(e){return new(e||t)(n.ic(i.a),n.ic(s.a),n.ic(i.a),n.ic(r.a),n.ic(a.a))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},TaOT:function(t,e,o){"use strict";o.d(e,"a",(function(){return s}));var n=o("fXoL"),i=o("fUdP");let s=(()=>{class t{constructor(t){this.customCurrencyPipe=t}markFormGroupTouched(t){Object.values(t.controls).forEach(t=>{t.markAsTouched(),t.controls&&t.controls.forEach(t=>this.markFormGroupTouched(t))})}markFormGroupUntouched(t){Object.values(t.controls).forEach(t=>{t.markAsUntouched(),t.controls&&t.controls.forEach(t=>this.markFormGroupUntouched(t))})}validationMessages(){return{required:"* This field is required",email:"* This email address is invalid",minlength:"* Length is too short",maxlength:"* Length is too long",invalid_characters:t=>{let e=t;return e=e.reduce((t,o,n)=>{let i=t;return i+=o,e.length!==n+1&&(i+=", "),i},""),"These characters are not allowed: "+e}}}validateForm(t,e,o){const n=t;for(const i in e)if(i){e[i]="";const t=n.get(i),s=this.validationMessages();if(t&&!t.valid&&(!o||t.dirty||t.touched))for(const o in t.errors)console.log("======>inside",o),e[i]=o&&"invalid_characters"!==o?e[i]||s[o]:e[i]||s[o](t.errors[o])}return e}formatCurrency(t,e,o){if("0"!=t)if(""!=t){let o=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==o.trim().replace(/[^.0-9]+/g,"")?e.contains("amount")&&e.get("amount").reset():"0"==o.trim().replace(/[^.0-9]+/g,"")?e.get("amount").reset():(console.log(o),e.patchValue({amount:o}))}else e.get("amount").reset("");else e.contains("amount")&&e.get("amount").reset()}formatTransLimit(t,e){if("0"!=t)if(""!=t){let o=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==o?e.contains("transactionLimit")&&e.get("transactionLimit").reset():"0"==o.trim()?e.get("transactionLimit").reset():(console.log(o),e.patchValue({transactionLimit:o}))}else e.get("transactionLimit").reset("");else e.contains("transactionLimit")&&e.get("transactionLimit").reset()}formatDynamicCurrency(t,e){$("#"+t).val()&&"\u20b9 0.00"!=$("#"+t).val()?e.patchValue({amount:$("#"+t).val()}):e.get("amount").reset("")}deFormatValue(t,e){e.patchValue({amount:t.replace(/[^0-9.]+/g,"")})}formatAmtCurrency(t,e,o){if("0"!=t)if(""!=t){let n=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==n?e.contains(o)&&e.get(o).reset():"0"==n.trim()?e.get(o).reset():e.controls[o].patchValue("\u20b9"+n)}else e.get(o).reset("");else e.contains(o)&&e.get(o).reset()}}return t.\u0275fac=function(e){return new(e||t)(n.ic(i.a))},t.\u0275prov=n.Ub({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},sJWB:function(t,e,o){"use strict";o.r(e),o.d(e,"OtpModule",(function(){return k}));var n=o("ofXK"),i=o("3Pt+"),s=o("fXoL"),r=o("TaOT"),a=o("tyNb"),c=o("EnSQ"),l=o("au7T"),u=o("L7Xq"),h=o("QrBj"),d=o("5IsW"),m=o("H9Rt"),p=o("OXpz"),g=o("Geda"),v=o("25X+"),b=o("Eioz");function f(t,e){1&t&&(s.ec(0,"span",36),s.Sc(1),s.qc(2,"translate"),s.dc()),2&t&&(s.Mb(1),s.Tc(s.rc(2,1,"PLEASE_ENTER_OTP")))}const S=[{path:"",component:(()=>{class t{constructor(t,e,o,n,i,s,r,a,c,l,u){this.form=t,this.formValidation=e,this.router=o,this.chRef=n,this.DataService=i,this.commonMethod=s,this.psbApiService=r,this.otpService=a,this.constant=c,this.localStorage=l,this.storage=u,this.formErrors={otpnumber:""},this.commonPageComponent={headerType:"none",sidebarNAv:!1,footer:"none"}}onBlur(){this.formErrors=this.formValidation.validateForm(this.otpForm,this.formErrors,!0)}ngOnInit(){this.initialization()}ngAfterViewInit(){this.resendotp()}initialization(){this.DataService.changeMessage(this.commonPageComponent),this.mobNumber=this.commonMethod.maskMobileNumber(this.storage.getLocalStorage(this.constant.storage_mobileNo)),this.buildForm()}buildForm(){this.otpForm=new i.j({otpnumber:new i.g("",[i.G.required,i.G.pattern("^[0-9]*$"),i.G.minLength(4),i.G.maxLength(4),i.G.maxLength(4)])})}validateForm(){if(this.otpForm.invalid)return this.otpForm.get("otpnumber").markAsTouched(),void this.otpForm.valueChanges.subscribe(t=>{this.formErrors=this.formValidation.validateForm(this.otpForm,this.formErrors,!0)})}otpcancel(){this.DataService.loginData.mobnumber="",this.DataService.loginData.tab="user",this.router.navigate([this.DataService.otpPreviousPage])}resendotp(){console.log("resendotp"),this.otpForm.reset();var t=this.otpService.getResendOTPReq(this.DataService.otpPreviousPage);console.log(this.localStorage.getLocalStorage("deviceId"),t),this.invokeBankingService(t,this.localStorage.getLocalStorage("deviceId"),this.constant.serviceName_RESENDOTP)}invokeBankingService(t,e,o){this.psbApiService.callBankingAPIService(t,e,o).subscribe(t=>{if(console.log(t),"00"==t.responseParameter.opstatus)switch(!0){case o==this.constant.serviceName_RESENDOTP:showToastMessage(t.responseParameter.Result,"success");break;case o==this.constant.serviceName_VALIDATEOTP:if(t.hasOwnProperty("set")){let e=t.responseParameter;this.DataService.customerAccountList=t.set.records,this.DataService.customerAccountList.forEach(t=>{"SAVING"!=t.accountCategory&&"CURRENT"!=t.accountCategory||this.DataService.customerCanTransferAccountList.push(t)}),this.DataService.themeName=e.themeName,this.DataService.setTheme(e.themeName),this.DataService.setThemeDetails({themeName:e.themeName,sideBarColor:e.themeSideColor,sideBarBg:e.themeSideBackground,menuOption:e.themeMenuOption})}"/login"!=this.DataService.otpPreviousPage&&"/loginMobile"!=this.DataService.otpPreviousPage||(this.DataService.userDetails=t.responseParameter,this.DataService.userDetails.totalAssets=t.responseParameter.totalAssets,this.DataService.userDetails.totalLiabilities=t.responseParameter.totalLiabilities,this.storage.setSessionStorage("isLoggedIn","true"),this.DataService.loginData.mobnumber=t.responseParameter.MobileNo),"/registrationMobCheck"==this.DataService.otpPreviousPage&&"N"==t.responseParameter.ISCBS&&(this.DataService.otpNextPage="/nonRegistered"),this.router.navigate([this.DataService.otpNextPage])}else""!=t.responseParameter.Result&&showToastMessage(t.responseParameter.Result)})}sendotp(){if(this.validateForm(),this.otpForm.valid){console.log(this.otpForm.value);var t=this.otpService.getSendOTPReq(this.otpForm.value.otpnumber,this.DataService.otpPreviousPage);this.invokeBankingService(t,this.localStorage.getLocalStorage("deviceId"),this.constant.serviceName_VALIDATEOTP)}}}return t.\u0275fac=function(e){return new(e||t)(s.Yb(i.f),s.Yb(r.a),s.Yb(a.c),s.Yb(s.i),s.Yb(c.a),s.Yb(l.a),s.Yb(u.a),s.Yb(h.a),s.Yb(d.a),s.Yb(m.a),s.Yb(m.a))},t.\u0275cmp=s.Sb({type:t,selectors:[["app-otp"]],hostBindings:function(t,e){1&t&&s.lc("focusout",(function(){return e.onBlur()}))},decls:77,vars:39,consts:[[1,"prelogin-page"],[1,"full-container","full"],[1,"login-container"],[1,"central-box"],[1,"banner-container"],[1,"left-image"],["src","./assets/images/background/login_image.png","alt","login image"],[1,"left-content"],[1,"vspacer10"],["role","button",1,"ux-button","sm","primary","ml-0"],[1,"keyboard-section"],[1,"keyboard-inner"],[1,"loginform-container"],[1,"login-form"],[1,"login-heading"],[1,"brand-logo"],["src","./assets/images/logo/logo1.png","alt","kiya-logo"],[1,"vspacer5"],[1,"ml-3"],[3,"formGroup","ngSubmit"],[1,"row1"],[1,"col-12"],[1,"ux-input"],["for","otp"],["type","password","formControlName","otpnumber","numbersOnly","","limit-to","4",1,"otpinput",3,"placeholder"],["class","errormsg",4,"ngIf"],[1,"col-12","col-md-6"],[1,"text-left"],[1,"text-right"],["href","javascript:;",1,"reg-txt",3,"click"],[1,"vspacer20"],["Class","col-6"],[1,"formfooter"],["type","button","role","button",1,"ux-button","sm","secondary","d-block","w-100","m-0",3,"click"],["type","submit","role","button",1,"ux-button","sm","primary","d-block","w-100","m-0"],[1,"vspacer40"],[1,"errormsg"]],template:function(t,e){1&t&&(s.ec(0,"div",0),s.ec(1,"div",1),s.ec(2,"div",2),s.ec(3,"div",3),s.ec(4,"div",4),s.ec(5,"div",5),s.Zb(6,"img",6),s.dc(),s.ec(7,"div",7),s.ec(8,"h5"),s.Sc(9),s.qc(10,"translate"),s.dc(),s.Zb(11,"div",8),s.ec(12,"p"),s.Sc(13),s.qc(14,"translate"),s.Zb(15,"br"),s.Sc(16),s.qc(17,"translate"),s.Zb(18,"br"),s.Sc(19),s.qc(20,"translate"),s.dc(),s.Zb(21,"div",8),s.ec(22,"button",9),s.Sc(23),s.qc(24,"translate"),s.dc(),s.dc(),s.ec(25,"div",10),s.Zb(26,"div",11),s.dc(),s.dc(),s.ec(27,"div",12),s.ec(28,"div",13),s.ec(29,"div",14),s.ec(30,"div",15),s.Zb(31,"img",16),s.dc(),s.Zb(32,"div",17),s.ec(33,"h3"),s.Sc(34),s.qc(35,"translate"),s.dc(),s.ec(36,"h5"),s.Sc(37),s.qc(38,"translate"),s.Zb(39,"br"),s.Sc(40),s.Zb(41,"span",18),s.dc(),s.dc(),s.Zb(42,"div",8),s.ec(43,"form",19),s.lc("ngSubmit",(function(){return e.sendotp()})),s.ec(44,"div",20),s.ec(45,"div",21),s.ec(46,"div",22),s.ec(47,"label",23),s.Sc(48),s.qc(49,"translate"),s.dc(),s.Zb(50,"input",24),s.qc(51,"translate"),s.Rc(52,f,3,3,"span",25),s.dc(),s.dc(),s.dc(),s.ec(53,"div",20),s.ec(54,"div",26),s.Zb(55,"div",27),s.dc(),s.ec(56,"div",26),s.ec(57,"div",28),s.ec(58,"a",29),s.lc("click",(function(){return e.resendotp()})),s.Sc(59),s.qc(60,"translate"),s.dc(),s.dc(),s.dc(),s.dc(),s.Zb(61,"div",30),s.ec(62,"div",20),s.ec(63,"div",31),s.ec(64,"div",32),s.ec(65,"button",33),s.lc("click",(function(){return e.otpcancel()})),s.Sc(66),s.qc(67,"translate"),s.dc(),s.dc(),s.dc(),s.ec(68,"div",31),s.ec(69,"div",32),s.ec(70,"button",34),s.Sc(71),s.qc(72,"translate"),s.dc(),s.dc(),s.dc(),s.dc(),s.dc(),s.Zb(73,"div",35),s.Zb(74,"div",35),s.Zb(75,"div",35),s.dc(),s.Zb(76,"app-footer-mobile"),s.dc(),s.dc(),s.dc(),s.dc(),s.dc()),2&t&&(s.Mb(9),s.Tc(s.rc(10,15,"IMP_SECURITY_INFO")),s.Mb(4),s.Uc(" ",s.rc(14,17,"BEST_VIEW_IN_IE"),""),s.Mb(3),s.Uc(" ",s.rc(17,19,"YOUR_LOGIN_PWD"),""),s.Mb(3),s.Uc(" ",s.rc(20,21,"ACCESS_TO_DATA")," "),s.Mb(4),s.Tc(s.rc(24,23,"SEQ_TIPS")),s.Mb(11),s.Tc(s.rc(35,25,"OTP_AUTH")),s.Mb(3),s.Uc("",s.rc(38,27,"ENTER_4_DIGIT")," "),s.Mb(3),s.Uc(" ",e.mobNumber," "),s.Mb(3),s.uc("formGroup",e.otpForm),s.Mb(5),s.Tc(s.rc(49,29,"OTP")),s.Mb(2),s.vc("placeholder",s.rc(51,31,"ENTER_4_DIGIT_OTP")),s.Mb(2),s.uc("ngIf",e.otpForm.controls.otpnumber.touched&&e.otpForm.controls.otpnumber.hasError("required")),s.Mb(7),s.Tc(s.rc(60,33,"RESEND")),s.Mb(7),s.Tc(s.rc(67,35,"CANCEL")),s.Mb(5),s.Tc(s.rc(72,37,"SUBMIT_BTN")))},directives:[i.I,i.t,i.k,i.c,i.s,i.i,p.d,g.a,n.t,v.a],pipes:[b.a],styles:["input.password_number[_ngcontent-%COMP%]{-webkit-text-security:disc;outline:0;-webkit-appearance:none}input[type=password].otpinput[_ngcontent-%COMP%]{text-align:center;letter-spacing:30px;border:1px solid rgba(0,0,0,.4);height:39px;border-radius:4px}[_ngcontent-%COMP%]::placeholder{letter-spacing:2px}"]}),t})()}];let y=(()=>{class t{}return t.\u0275mod=s.Wb({type:t}),t.\u0275inj=s.Vb({factory:function(e){return new(e||t)},imports:[[a.g.forChild(S)],a.g]}),t})();var T=o("PCNd"),_=o("AvjH");let k=(()=>{class t{}return t.\u0275mod=s.Wb({type:t}),t.\u0275inj=s.Vb({factory:function(e){return new(e||t)},imports:[[n.c,y,i.m,i.C,T.a,_.a]]}),t})()}}]);