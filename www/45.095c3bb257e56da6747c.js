(window.webpackJsonp=window.webpackJsonp||[]).push([[45,65,109,349],{Geda:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var i=a("fXoL"),c=a("3Pt+"),n=a("au7T");let s=(()=>{class t{constructor(t,e){this.control=t,this.commonMethods=e,this.specialKeys=["Backspace","Tab"]}ngOnChanges(t){const e=+this.limitTo;if(-1===this.specialKeys.indexOf(t.key)&&!this.commonMethods.validateEmpty(this.control.value)&&this.control.value.length>=e){let t=this.control.value.substring(0,e);this.control.control.setValue(t)}}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(c.r),i.Yb(n.a))},t.\u0275dir=i.Tb({type:t,selectors:[["","limit-to",""]],hostBindings:function(t,e){1&t&&i.lc("input",(function(t){return e.ngOnChanges(t)}))},inputs:{limitTo:["limit-to","limitTo"]},features:[i.Kb]}),t})()},OXpz:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return o}));var i=a("fXoL"),c=a("3Pt+");let n=(()=>{class t{constructor(t){this.control=t,this.specialKeys=["Backspace","Tab"]}ngOnChanges(t){if(-1===this.specialKeys.indexOf(t.key)&&!/^[0-9]*$/.test(this.control.value)){let t=this.control.value.replace(/[^0-9]/g,"");this.control.control.setValue(t)}}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(c.r))},t.\u0275dir=i.Tb({type:t,selectors:[["","numbersOnly",""]],hostBindings:function(t,e){1&t&&i.lc("input",(function(t){return e.ngOnChanges(t)}))},features:[i.Kb]}),t})(),s=(()=>{class t{constructor(t){this.control=t,this.specialKeys=["Backspace","Tab"]}ngOnChanges(t){if(-1===this.specialKeys.indexOf(t.key)&&this.control.value){let t=this.control.value.replace(/[^.0-9]+/g,"");this.control.control.setValue(t)}}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(c.r))},t.\u0275dir=i.Tb({type:t,selectors:[["","digitOnly",""]],hostBindings:function(t,e){1&t&&i.lc("input",(function(t){return e.ngOnChanges(t)}))},features:[i.Kb]}),t})(),r=(()=>{class t{constructor(t){this.el=t,this.regex=new RegExp(/^\d*\.?\d{0,2}$/g),this.specialKeys=["Backspace","Tab","End","Home","-","ArrowLeft","ArrowRight","Del","Delete"]}onKeyDown(t){if(console.log(this.el.nativeElement.value),-1!==this.specialKeys.indexOf(t.key))return;let e=this.el.nativeElement.value;const a=this.el.nativeElement.selectionStart,i=[e.slice(0,a),"Decimal"==t.key?".":t.key,e.slice(a)].join("");i&&!String(i).match(this.regex)&&t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.o))},t.\u0275dir=i.Tb({type:t,selectors:[["","amountOnly",""]],hostBindings:function(t,e){1&t&&i.lc("keydown",(function(t){return e.onKeyDown(t)}))}}),t})(),o=(()=>{class t{constructor(t){this._el=t}onInputChange(t){const e=this._el.nativeElement.value;this._el.nativeElement.value=e.replace(/[^0-9]*/g,""),e!==this._el.nativeElement.value&&t.stopPropagation()}}return t.\u0275fac=function(e){return new(e||t)(i.Yb(i.o))},t.\u0275dir=i.Tb({type:t,selectors:[["input","numericOnly",""]],hostBindings:function(t,e){1&t&&i.lc("input",(function(t){return e.onInputChange(t)}))}}),t})()},Sr1p:function(t,e,a){"use strict";a.r(e),a.d(e,"ScanQrPaymentModule",(function(){return H}));var i=a("ofXK"),c=a("3Pt+"),n=a("XNiG"),s=a("wd/R"),r=a("fXoL"),o=a("tyNb"),u=a("EnSQ"),l=a("5IsW"),d=a("L7Xq"),m=a("H9Rt"),p=a("TaOT"),h=a("au7T"),v=a("aa7p"),S=a("Eioz"),A=a("TiA8"),f=a("Ygbc"),y=a("4bKs"),b=a("Geda"),D=a("OXpz"),g=a("RZqO");function R(t,e){if(1&t&&(r.ec(0,"h5"),r.ec(1,"span"),r.Sc(2),r.qc(3,"translate"),r.dc(),r.dc()),2&t){const t=r.pc(2);r.Mb(2),r.Vc("",r.rc(3,2,"UPI_ID")," : ",t.DataService.ScanQrCodeData.pa?t.DataService.ScanQrCodeData.pa:t.DataService.ScanQrCodeData.qrPaymentAddress,"")}}function M(t,e){if(1&t&&(r.ec(0,"h5"),r.ec(1,"span"),r.Sc(2),r.dc(),r.dc()),2&t){const t=r.pc(2);r.Mb(2),r.Vc("",t.DataService.ScanQrCodeData.qrIfsc," / ",t.DataService.ScanQrCodeData.qrAccountNo,"")}}function Q(t,e){if(1&t&&(r.ec(0,"div",39),r.ec(1,"h5"),r.Sc(2),r.qc(3,"translate"),r.dc(),r.Rc(4,R,4,4,"h5",21),r.Rc(5,M,3,2,"h5",21),r.dc()),2&t){const t=r.pc();r.Mb(2),r.Vc("",r.rc(3,4,"PAYMENT_TO")," ",t.DataService.validateAddressResp.MASKNAME?t.DataService.validateAddressResp.MASKNAME:t.DataService.ScanQrCodeData.pn||t.DataService.ScanQrCodeData.qrMerchantName," "),r.Mb(2),r.uc("ngIf","UPI_ID"==t.DataService.ScanQrCodeData.payType),r.Mb(1),r.uc("ngIf","BNK_ACT"==t.DataService.ScanQrCodeData.payType)}}function q(t,e){1&t&&(r.ec(0,"label"),r.Sc(1),r.qc(2,"translate"),r.dc()),2&t&&(r.Mb(1),r.Tc(r.rc(2,1,"SINGAPORE_DOLLAR_(SGD)")))}function T(t,e){1&t&&(r.ec(0,"p",28),r.Sc(1),r.qc(2,"translate"),r.dc()),2&t&&(r.Mb(1),r.Uc(" ",r.rc(2,1,"ENTER_AMOUNT_ERROR")," "))}function O(t,e){1&t&&(r.ec(0,"p",28),r.Sc(1),r.qc(2,"translate"),r.dc()),2&t&&(r.Mb(1),r.Tc(r.rc(2,1,"ENTER_NUMBER_ERROR")))}function I(t,e){1&t&&(r.ec(0,"p",28),r.Sc(1),r.qc(2,"translate"),r.dc()),2&t&&(r.Mb(1),r.Tc(r.rc(2,1,"ENTER_AMOUNT_ERROR")))}function N(t,e){1&t&&(r.ec(0,"p",28),r.Sc(1),r.qc(2,"translate"),r.dc()),2&t&&(r.Mb(1),r.Tc(r.rc(2,1,"ENTER_ALPHABET_NUMBER_ERROR")))}function P(t,e){if(1&t){const t=r.fc();r.ec(0,"div",10),r.ec(1,"div",19),r.ec(2,"div",20),r.ec(3,"label"),r.Sc(4),r.qc(5,"translate"),r.dc(),r.ec(6,"input",40),r.lc("blur",(function(e){return r.Hc(t),r.pc().onEnTipAmtInput(e.target.value,"enTipAmount")})),r.dc(),r.Rc(7,I,3,3,"p",23),r.Rc(8,N,3,3,"p",23),r.dc(),r.dc(),r.dc()}if(2&t){const t=r.pc();r.Mb(4),r.Tc(r.rc(5,3,"ENTER_TIP_AMOUNT")),r.Mb(3),r.uc("ngIf",t.scanQrAmountForm.controls.enTipAmount.hasError("required")&&t.scanQrAmountForm.controls.enTipAmount.touched),r.Mb(1),r.uc("ngIf",t.scanQrAmountForm.controls.enTipAmount.hasError("pattern"))}}function F(t,e){1&t&&(r.ec(0,"div"),r.ec(1,"div",41),r.ec(2,"div",10),r.ec(3,"div",42),r.ec(4,"div",43),r.ec(5,"div",13),r.ec(6,"em"),r.Sc(7),r.qc(8,"translate"),r.dc(),r.ec(9,"em"),r.ec(10,"span"),r.Sc(11,"1SGD = 0.0193"),r.dc(),r.dc(),r.dc(),r.ec(12,"div",15),r.ec(13,"em"),r.Sc(14,"INR Value"),r.dc(),r.ec(15,"em"),r.Zb(16,"img",44),r.ec(17,"span"),r.Sc(18,"5181.35"),r.dc(),r.dc(),r.dc(),r.ec(19,"div",17),r.ec(20,"em"),r.Sc(21),r.qc(22,"translate"),r.dc(),r.ec(23,"em"),r.ec(24,"span"),r.Sc(25,"3.50%"),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc()),2&t&&(r.Mb(7),r.Tc(r.rc(8,2,"CONVERSION_RATE")),r.Mb(14),r.Tc(r.rc(22,4,"MARKUP_RATE")))}function E(t,e){1&t&&(r.ec(0,"p",28),r.Sc(1),r.qc(2,"translate"),r.dc()),2&t&&(r.Mb(1),r.Tc(r.rc(2,1,"ENTER_SPECIAL_CHARACTOR_ERROR")))}function C(t,e){if(1&t&&(r.ec(0,"div",50),r.ec(1,"em"),r.Sc(2),r.qc(3,"translate"),r.dc(),r.ec(4,"em"),r.ec(5,"span"),r.Sc(6),r.dc(),r.dc(),r.dc()),2&t){const t=r.pc(2);r.Mb(2),r.Tc(r.rc(3,2,"INVOICE_NUMBER")),r.Mb(4),r.Tc(t.QRScanData.invoiceNo)}}function V(t,e){if(1&t&&(r.ec(0,"div",50),r.ec(1,"em"),r.Sc(2),r.qc(3,"translate"),r.dc(),r.ec(4,"em"),r.ec(5,"span"),r.Sc(6),r.dc(),r.dc(),r.dc()),2&t){const t=r.pc(2);r.Mb(2),r.Tc(r.rc(3,2,"INVOICE_NAME")),r.Mb(4),r.Tc(t.QRScanData.invoiceName)}}function k(t,e){if(1&t&&(r.ec(0,"div",50),r.ec(1,"em"),r.Sc(2),r.qc(3,"translate"),r.dc(),r.ec(4,"em"),r.ec(5,"span"),r.Sc(6),r.qc(7,"date"),r.dc(),r.dc(),r.dc()),2&t){const t=r.pc(2);r.Mb(2),r.Tc(r.rc(3,2,"INVOICE_DATE")),r.Mb(4),r.Tc(r.rc(7,4,t.QRScanData.invoiceDate))}}function w(t,e){if(1&t){const t=r.fc();r.ec(0,"div",15),r.ec(1,"em"),r.Sc(2),r.qc(3,"translate"),r.dc(),r.ec(4,"em",51),r.lc("click",(function(){r.Hc(t);const e=r.pc(2);return e.viewInvoice(e.QRScanData.url)})),r.ec(5,"span"),r.Sc(6),r.dc(),r.dc(),r.dc()}if(2&t){const t=r.pc(2);r.Mb(2),r.Tc(r.rc(3,2,"INVOICE_URL")),r.Mb(4),r.Tc(t.QRScanData.url)}}function _(t,e){if(1&t&&(r.ec(0,"div",11),r.ec(1,"div",10),r.ec(2,"div",42),r.ec(3,"div",45),r.Rc(4,C,7,4,"div",46),r.Rc(5,V,7,4,"div",46),r.Rc(6,k,8,6,"div",46),r.dc(),r.dc(),r.dc(),r.ec(7,"div",47),r.ec(8,"div",42),r.ec(9,"div",48),r.Rc(10,w,7,4,"div",49),r.dc(),r.dc(),r.dc(),r.dc()),2&t){const t=r.pc();r.Mb(4),r.uc("ngIf",t.QRScanData.invoiceNo),r.Mb(1),r.uc("ngIf",t.QRScanData.invoiceName),r.Mb(1),r.uc("ngIf",t.QRScanData.invoiceDate),r.Mb(4),r.uc("ngIf",t.QRScanData.url)}}function j(t,e){1&t&&(r.ec(0,"div",10),r.ec(1,"div",32),r.ec(2,"div",7),r.ec(3,"div",52),r.ec(4,"div"),r.ec(5,"div",53),r.ec(6,"label"),r.Sc(7),r.qc(8,"translate"),r.Zb(9,"input",54),r.Zb(10,"span",55),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc()),2&t&&(r.Mb(7),r.Uc("",r.rc(8,1,"I_AGREE_TO_SHARE_MY_PAN_AADHAR_DETAILS_MSG")," "))}function L(t,e){if(1&t){const t=r.fc();r.ec(0,"div",63),r.ec(1,"div",9),r.ec(2,"h5"),r.Sc(3),r.qc(4,"translate"),r.dc(),r.ec(5,"h6"),r.Sc(6),r.dc(),r.ec(7,"em"),r.Sc(8),r.dc(),r.dc(),r.ec(9,"div",64),r.ec(10,"div"),r.ec(11,"a",65),r.lc("click",(function(){return r.Hc(t),r.pc(4).routePage("scanQRIdList")})),r.Sc(12),r.qc(13,"translate"),r.dc(),r.dc(),r.dc(),r.ec(14,"div",66),r.ec(15,"em",67),r.ec(16,"span"),r.Sc(17,"*"),r.dc(),r.Sc(18),r.qc(19,"translate"),r.dc(),r.dc(),r.dc()}if(2&t){const t=e.$implicit,a=r.pc(2).$implicit;r.uc("hidden",!(null!=t&&t.isSelected)),r.Mb(3),r.Vc("",r.rc(4,8,"UPI_ID")," : ",a.paymentAddress,""),r.Mb(3),r.Vc("",t.accType," ",t.maskedAccountNumber," "),r.Mb(2),r.Tc(t.bankName),r.Mb(4),r.Tc(r.rc(13,10,"CHANGE_AC")),r.Mb(6),r.Uc(" ",r.rc(19,12,"NPCI_CIRCULAR_PAYMENT_MSG")," ")}}function U(t,e){if(1&t&&(r.ec(0,"div"),r.Rc(1,L,20,14,"div",62),r.dc()),2&t){const t=r.pc().$implicit;r.Mb(1),r.uc("ngForOf",t.accounts)}}function Y(t,e){if(1&t&&(r.ec(0,"div",57),r.ec(1,"div",10),r.ec(2,"div",9),r.ec(3,"h4"),r.Sc(4),r.qc(5,"translate"),r.dc(),r.dc(),r.dc(),r.Rc(6,U,2,1,"div",21),r.ec(7,"div",31),r.ec(8,"div",37),r.ec(9,"button",58),r.Sc(10),r.qc(11,"translate"),r.dc(),r.dc(),r.dc(),r.ec(12,"div",10),r.ec(13,"div",59),r.ec(14,"div",60),r.Zb(15,"img",61),r.dc(),r.dc(),r.dc(),r.dc()),2&t){const t=e.$implicit,a=r.pc(2);r.uc("hidden",!(null!=t&&t.isSelected)),r.Mb(4),r.Tc(r.rc(5,5,"FROM_UPI_ID")),r.Mb(2),r.uc("ngIf",t.isSelected),r.Mb(3),r.uc("disabled",a.scanQrAmountForm.invalid&&a.DataService.upiPayVpaList.length>0),r.Mb(1),r.Tc(r.rc(11,7,"CONFIRM"))}}function x(t,e){if(1&t&&(r.ec(0,"div"),r.Rc(1,Y,16,9,"div",56),r.dc()),2&t){const t=r.pc();r.Mb(1),r.uc("ngForOf",t.DataService.upiPayVpaList)}}const B=[{path:"",component:(()=>{class t{constructor(t,e,a,i,c,n,r,o,u,l,d,m,p,h){this.router=t,this.DataService=e,this.constant=a,this.http=i,this.localStorage=c,this.formValidation=n,this.commonMethod=r,this.scanQrAmtService=o,this.translate=u,this.npciAndroidService=l,this.npciIosService=d,this.location=m,this.ngZone=p,this.loaderService=h,this.vpaAddressList=[],this.showDetails=!1,this.currentDate=s().format("YYYY-MM-DD"),this.currentTime=s.duration(s().format("HH:mm"),"minutes"),this.NPCICredData=[],this.amtEditable=!0,this.headerdata={headerType:"backUpiIdHeader",titleName:"SCAN_PAY",footertype:"none"}}ngOnInit(){this.DataService.changeMessage(this.headerdata),createGlobalNavMore(),this.initialize()}initialize(){this.buildForm(),this.payDate=this.DataService.upiPayRequest.date,this.payTime=this.DataService.upiPayRequest.time,history.pushState({},"upiDashboard",this.location.prepareExternalUrl("upiDashboard")),history.pushState({},"self",this.location.prepareExternalUrl(this.router.url)),this.QRScanData=this.DataService.ScanQrCodeData,console.log("<==== this.QRScanData ====>"),console.log(this.QRScanData);let t=JSON.parse(JSON.stringify(this.DataService.vpaAddressList));console.log(JSON.stringify(t)),0==this.DataService.upiPayVpaList.length&&(console.log("selectedVpaDetailsPay",this.DataService.selectedVpaDetailsPay),this.DataService.upiPayVpaList=t.map(t=>(t.isSelected=!(!t.isSelected&&"Y"!=t.default),t.accounts.map(t=>(t.isSelected=!(!t.isSelected&&"Y"!=t.isDefaultAccount),t)),t))),console.log(JSON.stringify(this.DataService.vpaAddressList)),this.payeeObj={},"upi"==this.QRScanData.qrMode?(this.qrAmount=this.nullified(this.QRScanData.am?this.QRScanData.am:"").replace(/[^.0-9]/g,""),this.qrMinAmount=this.nullified(this.QRScanData.mam?this.QRScanData.mam:"").replace(/[^.0-9]/g,""),this.qrGstCheck=!(!this.QRScanData.gstIn||!this.QRScanData.gstBrkUp),this.qrAmount===this.qrMinAmount&&this.qrAmount>"0"&&this.qrMinAmount>"0"?(this.scanQrAmountForm.get("amount").setValue(this.qrAmount),this.amtEditable=!1,this.onInput(this.qrAmount,"AMT")):!this.qrAmount||"0"!=this.qrMinAmount&&""!=this.qrMinAmount&&"null"!=this.qrMinAmount?this.qrAmount&&this.qrMinAmount?(this.scanQrAmountForm.get("amount").setValue(this.qrAmount),this.amtEditable=!0,this.onInput(this.qrAmount,"AMT")):(this.scanQrAmountForm.get("amount").setValue(this.qrAmount),this.amtEditable=!0,this.formValidation.formatCurrency(this.qrAmount,this.scanQrAmountForm)):(this.scanQrAmountForm.get("amount").setValue(this.qrAmount),this.formValidation.formatCurrency(this.qrAmount,this.scanQrAmountForm),this.amtEditable=!1),this.QRScanData.tn?(this.scanQrAmountForm.get("remarks").setValue(this.QRScanData.tn),this.QRScanData.qrRemarkEditable=!1):this.QRScanData.qrRemarkEditable=!0,this.payeeObj.payeeName=this.DataService.validateAddressResp.MASKNAME?this.DataService.validateAddressResp.MASKNAME:this.DataService.ScanQrCodeData.pn||this.DataService.ScanQrCodeData.qrMerchantName,this.payeeObj.payeeUpiAddress=this.QRScanData.pa?this.QRScanData.pa:"",this.payeeObj.payeeIfsc=this.DataService.validateAddressResp.IFSC?this.DataService.validateAddressResp.IFSC:"",this.payeeObj.payMode=this.constant.val_upi_PAYMENTADDRESS):(this.qrAmount=this.nullified(this.QRScanData.qrAmount?this.QRScanData.qrAmount:"").replace(/[^.0-9]/g,""),this.qrMinAmount=this.nullified(this.QRScanData.qrMinAmount?this.QRScanData.qrMinAmount:"").replace(/[^.0-9]/g,""),this.qrGstCheck=!(!this.QRScanData.gstIn||!this.QRScanData.gstBrkUp),this.qrAmount===this.qrMinAmount&&this.qrAmount>"0"&&this.qrMinAmount>"0"?(this.scanQrAmountForm.get("amount").setValue(this.qrAmount),this.formValidation.formatCurrency(this.qrAmount,this.scanQrAmountForm),this.amtEditable=!1,this.onInput(this.qrAmount,"AMT")):!this.qrAmount||"0"!=this.qrMinAmount&&""!=this.qrMinAmount&&"null"!=this.qrMinAmount?this.qrAmount&&this.qrMinAmount?(this.scanQrAmountForm.get("amount").setValue(this.qrAmount),this.amtEditable=!0,this.onInput(this.qrAmount,"AMT")):(this.scanQrAmountForm.get("amount").setValue(this.qrAmount),this.formValidation.formatCurrency(this.qrAmount,this.scanQrAmountForm),this.amtEditable=!0):(this.scanQrAmountForm.get("amount").setValue(this.qrAmount),this.formValidation.formatCurrency(this.qrAmount,this.scanQrAmountForm),this.amtEditable=!1),this.payeeObj.payeeName=this.DataService.validateAddressResp.MASKNAME?this.DataService.validateAddressResp.MASKNAME:this.DataService.ScanQrCodeData.pn||this.DataService.ScanQrCodeData.qrMerchantName,this.payeeObj.payeeUpiAddress=this.QRScanData.qrPaymentAddress?this.QRScanData.qrPaymentAddress:"",this.payeeObj.payeeBankName=this.QRScanData.rrn?this.QRScanData.rrn:"",this.payeeObj.payeeIfsc=this.QRScanData.qrIfsc?this.QRScanData.qrIfsc:"",this.payeeObj.payeeActNo=this.QRScanData.qrAccountNo?this.QRScanData.qrAccountNo:"",this.payeeObj.payMode=this.constant.val_upi_PAYMENTADDRESS,this.QRScanData.qrRemark&&this.scanQrAmountForm.get("remarks").setValue(this.QRScanData.qrRemark)),this.DataService.upiPayRequest.remarks&&this.scanQrAmountForm.get("remarks").setValue(this.DataService.upiPayRequest.remarks),this.DataService.upiPayRequest.amount&&this.scanQrAmountForm.get("amount").setValue(this.DataService.upiPayRequest.amount),this.DataService.upiPayRequest.enTipAmount&&this.scanQrAmountForm.get("enTipAmount").setValue(this.DataService.upiPayRequest.enTipAmount),this.DataService.upiPayRequest.consentFlag&&this.scanQrAmountForm.get("consentFlag").setValue(this.DataService.upiPayRequest.consentFlag),this.DataService.payeeObj=this.payeeObj,this.scanQrAmtService.payeeObj=this.payeeObj,console.log(this.DataService.upiPayVpaList),this.DataService.selectedVpaDetailsPay=this.getSelectedVpaAccountDetails(),console.log("selectedVpaDetailsPay",this.DataService.selectedVpaDetailsPay)}buildForm(){this.scanQrAmountForm=new c.j({amount:new c.g("",[c.G.required,c.G.pattern(/(^[0-9.\u20b9, ]*$)/)]),remarks:new c.g("",[c.G.pattern(/(^[a-z0-9A-Z.',\- ]*$)/)]),enTipAmount:new c.g("",[c.G.pattern(/(^[0-9.\u20b9, ]*$)/)]),consentFlag:new c.g("")})}onInput(t,e){parseFloat(t)>=parseFloat(this.qrMinAmount)&&parseFloat(t)>=parseFloat(this.qrAmount)?this.formValidation.formatCurrency(t,this.scanQrAmountForm):this.showPopup("amountalert",t)}onAmtMamCheck(t,e){this.maxAmount=this.qrAmount?this.qrAmount:"100000",this.minAmount=this.qrMinAmount?this.qrMinAmount:"1",parseFloat(t)>=parseFloat(this.minAmount)&&parseFloat(t)<=parseFloat(this.maxAmount)?this.formValidation.formatCurrency(t,this.scanQrAmountForm):(this.scanQrAmountForm.get("amount").setValue(""),this.showPopup("amountalert",t))}nullified(t){return null==t||""==t||"null"==t||"0.00"==t||"0"==t||"0.0"==t?"":t}onFocus(t){this.formValidation.deFormatValue(t,this.scanQrAmountForm)}onEnTipAmtInput(t,e){this.formValidation.formatAmtCurrency(t,this.scanQrAmountForm,e)}showPopup(t,e){this.commonMethod.openPopup("div.popup-bottom."+t),this.popupData=e||{},console.log("this.popupData",this.popupData)}closePopup(t){this.commonMethod.closePopup("div.popup-bottom."+t)}viewInvoice(t){cordova.InAppBrowser.open(t,"_blank","location=no")}onClickPayAmount(){if(this.formValidation.markFormGroupTouched(this.scanQrAmountForm),this.scanQrAmountForm.valid){let e=this.DataService.selectedVpaDetailsPay.accountDetails;var t=(this.scanQrAmountForm.value.amount.trim().replace(/[^.0-9]+/g,"")?parseFloat(this.scanQrAmountForm.value.amount.trim().replace(/[^.0-9]+/g,"")):0)+(this.scanQrAmountForm.value.enTipAmount.trim().replace(/[^.0-9]+/g,"")?parseFloat(this.scanQrAmountForm.value.enTipAmount.trim().replace(/[^.0-9]+/g,"")):0);this.DataService.validateAddressResp.payAmount=this.scanQrAmountForm.value.amount.trim().replace(/[^.0-9]+/g,""),this.DataService.upiPayModelObj.payerAddr=this.DataService.selectedVpaDetailsPay.vpaDetails.paymentAddress?this.DataService.selectedVpaDetailsPay.vpaDetails.paymentAddress:"",this.DataService.upiPayModelObj.payeeAddr=this.payeeObj.payeeUpiAddress?this.payeeObj.payeeUpiAddress:"",this.DataService.upiPayModelObj.txnAmount=t.toFixed(2),this.DataService.upiPayModelObj.payeeName=this.payeeObj.payeeName?this.payeeObj.payeeName:"",this.DataService.upiPayModelObj.payeeIfsc=this.DataService.validateAddressResp.IFSC?this.payeeObj.payeeIfsc:"",this.scanQrAmtService.scanQrFormValues=this.scanQrAmountForm.value,this.DataService.upiPayRequest.amount=this.scanQrAmountForm.get("amount").value,this.DataService.upiPayRequest.enTipAmount=this.scanQrAmountForm.get("enTipAmount").value,this.DataService.upiPayRequest.remarks=this.scanQrAmountForm.get("remarks").value,this.DataService.upiPayRequest.consentFlag=this.scanQrAmountForm.get("consentFlag").value,this.QRScanData.tid?(this.npciAndroidService.transactionId=this.QRScanData.tid,this.DataService.payReceiptTransId=this.QRScanData.tid):this.npciAndroidService.getTransactionId().subscribe(t=>{this.npciAndroidService.transactionId=t,this.DataService.payReceiptTransId=t}),e.isSelected&&e.ifsc.includes("PSIB")?(this.DataService.preApprovedFlowIdentifier="scanQr",this.DataService.preApprovedBankName=e.bankName,this.DataService.preApprovedAccNo=e.maskedAccountNumber,this.DataService.preApprovedAmount=this.DataService.upiPayModelObj.txnAmount,this.DataService.preApprovedPreviousPageUrl=this.router.url,this.router.navigateByUrl("/transactionPin")):(console.log("SCAN QR PAYMENT => this.DataService.selectedFlow = ",this.DataService.selectedFlow),this.callNpciLibrary(e,this.DataService.selectedFlow))}}callNpciLibrary(t,e){if(console.log("calling npci library..."),this.loaderService.showLoader(),window.hasOwnProperty("cordova"))if(this.DataService.platform.toLowerCase()==this.constant.val_android){console.log("Calling NPCI Android service..."),this.npciAndroidService.initData(),this.npciAndroidService.selectedFlow=e;var a=new n.a;this.npciAndroidService.androidStartCLLibrary(t,this.constant.val_npci_flow_sendMoney_android,a).subscribe(t=>{console.log("Android StartCLLibrary Success => ",t),this.payAmount(t)},t=>{console.log("Android StartCLLibrary error => ",t)})}else if(this.DataService.platform.toLowerCase()==this.constant.val_ios){console.log("Calling NPCI iOS service..."),this.npciIosService.initData(),this.npciIosService.selectedFlow=e;let a=new n.a;this.QRScanData.tid?(this.npciIosService.txnId=this.QRScanData.tid,this.DataService.payReceiptTransId=this.QRScanData.tid):this.npciIosService.getTransactionId().subscribe(e=>{this.npciIosService.txnId=e,this.DataService.payReceiptTransId=e,this.npciIosService.iosStartCLLibrary(t,this.constant.val_npci_flow_sendMoney_ios,a).subscribe(t=>{console.log("iOS StartCLLibrary Success => ",t),t&&t.credkey?this.payAmount(t):console.log("NPCI flow cancelled...")},t=>{console.log("iOS StartCLLibrary error => ",t)})})}else showToastMessage("Unsupported Platform Try After Some Time!","error"),console.log("unknown platform = ",this.DataService.platform);else console.log("Cordova not available... unable to start NPCI Library on web")}payAmount(t){var e=s().format("YYYY-MM-DD"),a=s.duration(s().format("HH:mm"),"minutes"),i=s.duration(s(this.DataService.upiPayRequest.time).format("HH:mm"),"minutes"),c=s(this.DataService.upiPayRequest.date).format("YYYY-MM-DD"),n=s(c).diff(e,"minutes"),r=s.duration(i,"minutes").subtract(a).minutes();this.DataService.upiPayRequest.expiryTime=(n+r).toString();let o=this.getSelectedVpaAccountDetails();var u=this.scanQrAmtService.setPaymentRequest(o,this.payeeObj,t,this.QRScanData);this.UpiApiCall(u)}UpiApiCall(t){this.http.callBankingAPIService(t,this.localStorage.getLocalStorage(this.constant.storage_deviceId),this.constant.upiserviceName_PROCESSUPISERVICESESSION,!0).subscribe(t=>{let e=t.responseParameter.upiResponse;if("00"==e.status)switch(e.subActionId){case this.constant.upiserviceName_FUNDSTRANSFER:this.DataService.payReceiptObj=e;let{remarks:t}=this.scanQrAmountForm.value;this.DataService.payReceiptObj.remarks=t,this.DataService.payReceiptObj.amount=this.DataService.upiPayModelObj.txnAmount,this.DataService.payReceiptObj.payeeName=this.payeeObj.payeeName,this.DataService.payReceiptObj.payeeUpiAddress=this.payeeObj.payeeUpiAddress,this.DataService.payReceiptObj.payeeBankName=this.payeeObj.payeeBankName,this.DataService.payReceiptObj.payeeIfsc=this.payeeObj.payeeIfsc,this.DataService.payReceiptObj.payeeActNo=this.payeeObj.payeeActNo,this.DataService.payReceiptObj.selectedVpa=this.DataService.selectedVpaDetailsPay,this.routePage("/scanQRSuccess")}else if("01"==e.status)switch(e.subActionId){case this.constant.upiserviceName_FUNDSTRANSFER:this.DataService.payReceiptObj=e;let{remarks:t}=this.scanQrAmountForm.value;this.DataService.payReceiptObj.remarks=t,this.DataService.payReceiptObj.amount=this.DataService.upiPayModelObj.txnAmount,this.DataService.payReceiptObj.payeeName=this.payeeObj.payeeName,this.DataService.payReceiptObj.payeeUpiAddress=this.payeeObj.payeeUpiAddress,this.DataService.payReceiptObj.payeeBankName=this.payeeObj.payeeBankName,this.DataService.payReceiptObj.payeeIfsc=this.payeeObj.payeeIfsc,this.DataService.payReceiptObj.payeeActNo=this.payeeObj.payeeActNo,this.DataService.payReceiptObj.selectedVpa=this.DataService.selectedVpaDetailsPay,this.routePage("/scanQRSuccess")}},t=>{console.log("ERROR!",t)})}routePage(t){this.DataService.upiPayRequest.amount=this.scanQrAmountForm.get("amount").value,this.DataService.upiPayRequest.enTipAmount=this.scanQrAmountForm.get("enTipAmount").value,this.DataService.upiPayRequest.remarks=this.scanQrAmountForm.get("remarks").value,this.DataService.upiPayRequest.consentFlag=this.scanQrAmountForm.get("consentFlag").value,this.ngZone.run(()=>{this.router.navigateByUrl(t)})}getSelectedVpaAccountDetails(){let t=this.DataService.upiPayVpaList.find(t=>1==t.isSelected);if(t){let e=this.getSelectedAccountNoByVpa(t.accounts);return this.scanQrAmtService.selectedVpa={vpaDetails:t,accountDetails:e},{vpaDetails:t,accountDetails:e}}}getSelectedAccountNoByVpa(t){if(t.length>0)return t.find(t=>1==t.isSelected)}showCommonToastMsgWithKey(t,e){showToastMessage(this.translate.transform(t),e)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(o.c),r.Yb(u.a),r.Yb(l.a),r.Yb(d.a),r.Yb(m.a),r.Yb(p.a),r.Yb(h.a),r.Yb(v.a),r.Yb(S.a),r.Yb(A.a),r.Yb(f.a),r.Yb(i.n),r.Yb(r.H),r.Yb(y.a))},t.\u0275cmp=r.Sb({type:t,selectors:[["app-scan-qr-payment"]],decls:69,vars:36,consts:[[1,"main","main-bg2"],[1,"right-main-column","mar-custom"],[1,"right-col-container","pad-b"],[1,"body-page-container"],[1,"vspacer5","d-sm-block","d-none"],[1,"container-fluid"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"bg-section2"],[1,"col-12"],[1,"row1"],[1,"payee-info1"],[1,"info-inner"],[1,"info-lft"],[1,"yellow"],[1,"info-center"],["src","assets/images/svg/double-right-arrows.svg","alt","double-right-arrows-icon"],[1,"info-rit"],["class","col-12 col-md-12",4,"ngIf"],[1,"col-sm-12","col-12","col-md-12"],[1,"ux-input","white-input","mar-tb"],[4,"ngIf"],["type","text","inputmode","decimal","placeholder","\u20b9 0","autocomplete","off","formControlName","amount","limit-to","12","amountOnly","","id","amt","data-a-sign","Rs.",3,"readonly","focus","blur"],["class","text-center error-message",4,"ngIf"],["class","row1",4,"ngIf"],[1,"col-sm-5","col-5","col-md-3","m-auto"],[1,"ux-input","dark-input","mar-tb"],["type","text","formControlName","remarks","autocomplete","off","limit-to","100",3,"placeholder","readonly"],[1,"text-center","error-message"],["class","payee-info1",4,"ngIf"],[1,"info-bottom-container"],[1,"row1","mt-3"],[1,"col-sm-12","col-12","col-md-12","m-auto"],[1,"bottom-info"],[1,"popup-bottom","amountalert"],[1,"text-center"],[1,"row1","mt-2"],[1,"col-12","text-center"],[1,"ux-button","primary","md",3,"click"],[1,"col-12","col-md-12"],["type","tel","placeholder","\u20b9 0","autocomplete","off","formControlName","enTipAmount","limit-to","12","id","enTipamt","data-a-sign","Rs.",3,"blur"],[1,"payee-info1","mar-b","mb-1","mt-1"],[1,"calculate-amt","text-center","col-12"],[1,"info-inner3"],["src","assets/images/svg/rupee.svg","alt","rupees-icon"],[1,"info-inner3","row"],["class","info-center col-4",4,"ngIf"],[1,"row1",2,"text-align","center"],[1,"info-inner3","position-relative",2,"justify-content","center"],["class","info-center",4,"ngIf"],[1,"info-center","col-4"],[3,"click"],[1,"text-left"],[1,"ux-selection-custom","mar-rcustom"],["type","checkbox","formControlName","consentFlag","id","consent","name","consent"],[1,"checkmark"],[3,"hidden",4,"ngFor","ngForOf"],[3,"hidden"],[1,"ux-button","primary","submit","md",3,"disabled"],[1,"col-12","text-center","mt-4"],[1,"powered-logo"],["src","assets/images/logo/powered-upi-logo.svg","alt","powered-upi-logo"],["class","row1 mt-2",3,"hidden",4,"ngFor","ngForOf"],[1,"row1","mt-2",3,"hidden"],[1,"col-12","mt-1"],[1,"reg-txt",3,"click"],[1,"col-12","col-md-12","mt-4"],[1,"custom-t"]],template:function(t,e){1&t&&(r.ec(0,"div",0),r.ec(1,"div",1),r.ec(2,"div",2),r.ec(3,"div",3),r.Zb(4,"div",4),r.ec(5,"div",5),r.ec(6,"form",6),r.lc("ngSubmit",(function(){return e.routePage("/scanQrConfirm")})),r.ec(7,"div",7),r.ec(8,"div",8),r.ec(9,"div",9),r.ec(10,"div",10),r.ec(11,"div",11),r.ec(12,"div",7),r.ec(13,"div",12),r.ec(14,"div",13),r.ec(15,"span",14),r.ec(16,"h6"),r.Sc(17),r.qc(18,"firstLastChar"),r.dc(),r.dc(),r.dc(),r.ec(19,"div",15),r.ec(20,"a"),r.Zb(21,"img",16),r.dc(),r.dc(),r.ec(22,"div",17),r.ec(23,"span",14),r.ec(24,"h6"),r.Sc(25),r.qc(26,"firstLastChar"),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(27,"div",7),r.Rc(28,Q,6,6,"div",18),r.dc(),r.dc(),r.dc(),r.ec(29,"div",10),r.ec(30,"div",19),r.ec(31,"div",20),r.Rc(32,q,3,3,"label",21),r.ec(33,"input",22),r.lc("focus",(function(t){return e.amtEditable?e.onFocus(t.target.value):""}))("blur",(function(t){return e.amtEditable?e.onAmtMamCheck(t.target.value,"AMT"):""})),r.dc(),r.Rc(34,T,3,3,"p",23),r.Rc(35,O,3,3,"p",23),r.dc(),r.dc(),r.dc(),r.Rc(36,P,9,5,"div",24),r.Rc(37,F,26,6,"div",21),r.ec(38,"div",10),r.ec(39,"div",25),r.ec(40,"div",26),r.Zb(41,"input",27),r.qc(42,"translate"),r.Rc(43,E,3,3,"p",23),r.Zb(44,"p",28),r.dc(),r.dc(),r.dc(),r.Rc(45,_,11,4,"div",29),r.ec(46,"div",30),r.Rc(47,j,11,3,"div",24),r.ec(48,"div",31),r.ec(49,"div",32),r.ec(50,"div",33),r.Rc(51,x,2,1,"div",21),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(52,"div",34),r.ec(53,"div",7),r.ec(54,"div",9),r.ec(55,"h4",35),r.Sc(56),r.qc(57,"translate"),r.dc(),r.dc(),r.dc(),r.ec(58,"div",7),r.ec(59,"div",9),r.ec(60,"p"),r.Sc(61),r.qc(62,"translate"),r.qc(63,"translate"),r.dc(),r.dc(),r.dc(),r.ec(64,"div",36),r.ec(65,"div",37),r.ec(66,"button",38),r.lc("click",(function(){return e.closePopup("amountalert")})),r.Sc(67),r.qc(68,"translate"),r.dc(),r.dc(),r.dc(),r.dc()),2&t&&(r.Mb(6),r.uc("formGroup",e.scanQrAmountForm),r.Mb(11),r.Tc(r.rc(18,22,e.DataService.selectedVpaDetailsPay.accountDetails.custName)),r.Mb(8),r.Tc(r.rc(26,24,e.payeeObj.payeeName)),r.Mb(3),r.uc("ngIf",e.DataService.validateAddressResp.MASKNAME||e.DataService.ScanQrCodeData.pn||e.DataService.ScanQrCodeData.qrMerchantName),r.Mb(4),r.uc("ngIf","upiGlobal"==e.QRScanData.qrType),r.Mb(1),r.uc("readonly",!e.amtEditable),r.Mb(1),r.uc("ngIf",e.scanQrAmountForm.controls.amount.hasError("required")&&e.scanQrAmountForm.controls.amount.touched),r.Mb(1),r.uc("ngIf",e.scanQrAmountForm.controls.amount.hasError("pattern")),r.Mb(1),r.uc("ngIf","Y"==e.QRScanData.enTips),r.Mb(1),r.uc("ngIf","upiGlobal"==e.QRScanData.qrType),r.Mb(4),r.vc("placeholder",r.rc(42,26,"REMARKS")),r.uc("readonly",!e.QRScanData.qrRemarkEditable),r.Mb(2),r.uc("ngIf",e.scanQrAmountForm.controls.remarks.hasError("pattern")),r.Mb(2),r.uc("ngIf","0000"!=e.QRScanData.mc),r.Mb(2),r.uc("ngIf","GST"==e.QRScanData.qrType),r.Mb(4),r.uc("ngIf",e.DataService.upiPayVpaList.length>0),r.Mb(5),r.Tc(r.rc(57,28,"ALERT")),r.Mb(5),r.Xc(" ",r.rc(62,30,"AMOUNT_SHOULD_BE_GREATER_THAN")," ",e.minAmount," ",r.rc(63,32,"OR_SMALLER_THAN")," ",e.maxAmount," "),r.Mb(6),r.Tc(r.rc(68,34,"NO")))},directives:[c.I,c.t,c.k,i.t,c.c,c.s,c.i,b.a,D.a,c.a,i.s],pipes:[g.a,S.a,i.f],styles:[""]}),t})()}];let G=(()=>{class t{}return t.\u0275mod=r.Wb({type:t}),t.\u0275inj=r.Vb({factory:function(e){return new(e||t)},imports:[[o.g.forChild(B)],o.g]}),t})();var K=a("PCNd");let H=(()=>{class t{}return t.\u0275mod=r.Wb({type:t}),t.\u0275inj=r.Vb({factory:function(e){return new(e||t)},imports:[[i.c,K.a,c.m,c.C,G]]}),t})()},TaOT:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var i=a("fXoL"),c=a("fUdP");let n=(()=>{class t{constructor(t){this.customCurrencyPipe=t}markFormGroupTouched(t){Object.values(t.controls).forEach(t=>{t.markAsTouched(),t.controls&&t.controls.forEach(t=>this.markFormGroupTouched(t))})}markFormGroupUntouched(t){Object.values(t.controls).forEach(t=>{t.markAsUntouched(),t.controls&&t.controls.forEach(t=>this.markFormGroupUntouched(t))})}validationMessages(){return{required:"* This field is required",email:"* This email address is invalid",minlength:"* Length is too short",maxlength:"* Length is too long",invalid_characters:t=>{let e=t;return e=e.reduce((t,a,i)=>{let c=t;return c+=a,e.length!==i+1&&(c+=", "),c},""),"These characters are not allowed: "+e}}}validateForm(t,e,a){const i=t;for(const c in e)if(c){e[c]="";const t=i.get(c),n=this.validationMessages();if(t&&!t.valid&&(!a||t.dirty||t.touched))for(const a in t.errors)console.log("======>inside",a),e[c]=a&&"invalid_characters"!==a?e[c]||n[a]:e[c]||n[a](t.errors[a])}return e}formatCurrency(t,e,a){if("0"!=t)if(""!=t){let a=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==a.trim().replace(/[^.0-9]+/g,"")?e.contains("amount")&&e.get("amount").reset():"0"==a.trim().replace(/[^.0-9]+/g,"")?e.get("amount").reset():(console.log(a),e.patchValue({amount:a}))}else e.get("amount").reset("");else e.contains("amount")&&e.get("amount").reset()}formatTransLimit(t,e){if("0"!=t)if(""!=t){let a=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==a?e.contains("transactionLimit")&&e.get("transactionLimit").reset():"0"==a.trim()?e.get("transactionLimit").reset():(console.log(a),e.patchValue({transactionLimit:a}))}else e.get("transactionLimit").reset("");else e.contains("transactionLimit")&&e.get("transactionLimit").reset()}formatDynamicCurrency(t,e){$("#"+t).val()&&"\u20b9 0.00"!=$("#"+t).val()?e.patchValue({amount:$("#"+t).val()}):e.get("amount").reset("")}deFormatValue(t,e){e.patchValue({amount:t.replace(/[^0-9.]+/g,"")})}formatAmtCurrency(t,e,a){if("0"!=t)if(""!=t){let i=this.customCurrencyPipe.transform(t.trim(),"decimal");" 0.00"==i?e.contains(a)&&e.get(a).reset():"0"==i.trim()?e.get(a).reset():e.controls[a].patchValue("\u20b9"+i)}else e.get(a).reset("");else e.contains(a)&&e.get(a).reset()}}return t.\u0275fac=function(e){return new(e||t)(i.ic(c.a))},t.\u0275prov=i.Ub({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);