(window.webpackJsonp=window.webpackJsonp||[]).push([[242],{"7CwD":function(e,t,c){"use strict";c.r(t),c.d(t,"OpenDepositAccountAuthorizationModule",(function(){return k}));var o=c("ofXK"),i=c("3Pt+"),s=c("PqYM"),r=c("fXoL"),n=c("tyNb"),d=c("EnSQ"),a=c("L7Xq"),p=c("H9Rt"),u=c("5IsW"),l=c("fHQ/"),m=c("au7T"),h=c("CgMK"),v=c("goA9"),b=c("fUdP"),g=c("Eioz");const S=["openFDOTPRow"];function D(e,t){if(1&e){const e=r.fc();r.ec(0,"li"),r.ec(1,"a",70),r.lc("click",(function(){r.Hc(e);const c=t.$implicit;return r.pc().DataService.breadcrumroute(c.routeName)})),r.Sc(2),r.qc(3,"translate"),r.dc(),r.dc()}if(2&e){const e=t.$implicit;r.Mb(2),r.Tc(r.rc(3,1,e.currentRoute))}}function f(e,t){1&e&&(r.ec(0,"p",71),r.Sc(1),r.qc(2,"translate"),r.dc()),2&e&&(r.Mb(1),r.Uc(" ",r.rc(2,1,"VALID_OTP")," "))}function y(e,t){1&e&&(r.ec(0,"h5"),r.Sc(1,"Monthly"),r.dc())}function F(e,t){1&e&&(r.ec(0,"h5"),r.Sc(1,"Quarterly"),r.dc())}function R(e,t){1&e&&(r.ec(0,"h5"),r.Sc(1,"On Maturity"),r.dc())}const w=[{path:"",component:(()=>{class e{constructor(e,t,c,o,i,s,r,n){this.router=e,this.DataService=t,this.http=c,this.storage=o,this.constant=i,this.encryptDecryptService=s,this.commonMethod=r,this.nomineeAuthorizationService=n,this.counter=120,this.tick=1e3,this.invalidOtp=!1,this.otpInput=["otp1","otp2","otp3","otp4","otp5","otp6"]}ngOnInit(){this.buildForm(),this.DataService.setPageSettings("Open Deposit Account"),this.DataService.getBreadcrumb("AUTHORIZATION",this.router.url),this.DataService.setShowThemeObservable(!0),this.DataService.setShowsideNavObservable(!0),this.DataService.setShowNotificationObservable(!0),this.resendOTP(1),this.openFDReceiptObj=this.DataService.openFDReceiptObj,console.log("openFDReceiptObj: ",this.DataService.openFDReceiptObj),this.mobNumber=this.maskCharacter(this.storage.getLocalStorage(this.constant.storage_mobileNo),4)}buildForm(){this.otpForm=new i.j({otp1:new i.g("",[i.G.required,i.G.maxLength(1)]),otp2:new i.g("",[i.G.required,i.G.maxLength(1)]),otp3:new i.g("",[i.G.required,i.G.maxLength(1)]),otp4:new i.g("",[i.G.required,i.G.maxLength(1)]),otp5:new i.g("",[i.G.required,i.G.maxLength(1)]),otp6:new i.g("",[i.G.required,i.G.maxLength(1)])})}validateForm(){if(this.otpForm.invalid)return this.otpForm.get("otp1").markAsTouched(),this.otpForm.get("otp2").markAsTouched(),this.otpForm.get("otp3").markAsTouched(),this.otpForm.get("otp4").markAsTouched(),this.otpForm.get("otp5").markAsTouched(),void this.otpForm.get("otp6").markAsTouched()}onKeyUpEvent(e,t,c){var o;const i=t.which||t.keyCode;1===this.getSpasswordElement(e,c).value.length&&(7!==e?this.getSpasswordElement(e+1,c).focus():(this.getSpasswordElement(e,c).blur(),console.log("submit code "))),12===i&&1!==e&&this.getSpasswordElement(e-1,c).focus(),8!==i&&229!==i||"Unidentified"!=t.key&&("otp"==c&&(null===(o=this.otpForm.get(this.otpInput[e]))||void 0===o||o.setValue("")),this.getSpasswordElement(e-1,c).focus())}onFocusEvent(e,t){for(let c=1;c<e;c++){const e=this.getSpasswordElement(c,t);if(!e.value){e.focus();break}}}getSpasswordElement(e,t){if("otp"==t)return this.pmjjbyRows._results[e].nativeElement}goToPage(e,t){this.router.navigateByUrl("/"+e,{state:{openDepositTabSelection:t}})}openDepositSubmit(){let e;if(this.otpForm.valid){e=this.otpForm.value.otp1+this.otpForm.value.otp2+this.otpForm.value.otp3+this.otpForm.value.otp4+this.otpForm.value.otp5+this.otpForm.value.otp6;var t=this.nomineeAuthorizationService.getSendOTPSessionReq(e);this.submitOtpSession(t)}else this.validateForm()}submitOtpSession(e){console.log("this.DataService.request"+this.DataService.request),this.tempDecryptedReq=JSON.parse(this.encryptDecryptService.decryptText(this.storage.getSessionStorage(this.constant.val_sessionKey),this.DataService.request)),console.log("tempDecryptedReq: ",this.tempDecryptedReq),console.log(this.tempDecryptedReq),this.tempDecryptedReq.methodName=this.DataService.endPoint.split("/")[1],this.tempDecryptedReq.value=this.otpForm.value.otp1+this.otpForm.value.otp2+this.otpForm.value.otp3+this.otpForm.value.otp4+this.otpForm.value.otp5+this.otpForm.value.otp6,this.tempDecryptedReq.customerID=this.DataService.userDetails.customerId,console.log("FD RD Request params: ",this.tempDecryptedReq);let t=this.encryptDecryptService.encryptText(this.storage.getSessionStorage(this.constant.val_sessionKey),JSON.stringify(this.tempDecryptedReq));this.DataService.request=t,console.log(this.DataService.request),this.submitReq()}submitReq(){console.log("this.DataService.request"+this.DataService.request),this.http.callBankingAPIService(this.DataService.request,this.storage.getLocalStorage(this.constant.storage_deviceId),this.DataService.endPoint).subscribe(e=>{switch(console.log(e),this.otpForm.reset(),e.responseParameter.opstatus){case this.constant.val_InvalidCredentials:break;case"03":this.DataService.isOTPMaxAttempts=!0;break;case"11":this.invalidOtp=!0;break;case"12":this.DataService.isOTPMaxAttempts=!0,this.commonMethod.openPopup("div.popup-bottom.otp-attempt-expired");break;default:"00"==e.responseParameter.opstatus?(this.DataService.FDRDAccNumber=e.set.records[0].accountNumber,this.openFDReceiptObj.interestRate=e.set.records[0].roi,this.openFDReceiptObj.maturityAmount=e.set.records[0].maturityAmount,this.openFDReceiptObj.maturityDate=e.set.records[0].maturityDate,this.DataService.openFDReceiptObj.maturityAmount=e.set.records[0].maturityAmount,this.DataService.openFDReceiptObj.maturityDate=e.set.records[0].maturityDate,console.log(e),this.DataService.receiptType="Successful"):(this.DataService.FDRDAccNumber="",this.DataService.receiptType="Failed"),this.DataService.receiptmsg=e.responseParameter.Result,this.DataService.receipdRefID=""==e.RRN?"-":e.RRN,this.router.navigate(["/openDepositAccountSuccess"])}})}resendOTP(e){this.invalidOtp=!1,this.otpForm.reset();var t=this.nomineeAuthorizationService.getResendOTPSessionReq(this.constant.val_OPENFD);this.http.callBankingAPIService(t,this.storage.getLocalStorage(this.constant.storage_deviceId),this.constant.serviceName_RESENDOTPSESSION).subscribe(t=>{"00"==t.responseParameter.opstatus&&(this.startCounter(),2==e&&showToastMessage(t.responseParameter.Result,"success"))})}maskCharacter(e,t){return(""+e).slice(0,-t).replace(/./g,"*")+(""+e).slice(-t)}startCounter(){this.tick=1e3,this.counter=120,this.countDown&&!this.countDown.closed&&this.countDown.unsubscribe(),this.countDown=Object(s.a)(0,this.tick).subscribe(()=>{1==this.counter&&this.countDown.unsubscribe(),--this.counter})}closePopup(e){this.commonMethod.closePopup(e),this.router.navigateByUrl("/openDeposit")}}return e.\u0275fac=function(t){return new(t||e)(r.Yb(n.c),r.Yb(d.a),r.Yb(a.a),r.Yb(p.a),r.Yb(u.a),r.Yb(l.a),r.Yb(m.a),r.Yb(h.a))},e.\u0275cmp=r.Sb({type:e,selectors:[["app-open-deposit-account-authorization"]],viewQuery:function(e,t){var c;1&e&&r.Yc(S,!0),2&e&&r.Dc(c=r.mc())&&(t.pmjjbyRows=c)},decls:193,vars:25,consts:[[1,"main","bg-m"],[1,"nav-overlay"],[1,"right-main-column"],[1,"right-col-container","pad-b","full-width"],[1,"body-page-container","main-dashborad","manage-payee"],[1,"container-fluid"],[1,"row"],[1,"col-12","p-0"],[1,"breadcrumb"],[1,"lst-breadcrumb"],[4,"ngFor","ngForOf"],[1,"vspacer15","customize","d-none","d-md-block","d-lg-block","d-xl-block"],[1,"row","no-gutters"],[1,"col-12"],[1,"row1"],[1,"col-12","col-sm-12","col-md-12","col-lg-12","col-xl-9"],[1,"greencard2"],[1,"row1","hide-m"],[1,"col-md-8","col-12"],[1,"col-md-4","col-12"],[1,"col-sm-12","col-12","col-md-12"],[1,"white-box2","mar-t","pad-custom","custom-bor"],[1,"col-12","col-md-8","col-lg-9","col-xl-9"],[1,"col-12","col-md-12"],[1,"ux-input"],[1,"info-message2"],[1,"col-12","col-md-8","col-lg-8","col-xl-7"],[1,"col-12","pl-2","pr-2"],[3,"formGroup"],[1,"row3"],[1,"col-sm-2","col-2","col-md-2"],[1,"ux-input","password1","mb-1"],["id","otppassword1","type","password","maxlength","1","placeholder","\u25cf","formControlName","otp1",3,"keyup","focus"],["openFDOTPRow",""],["id","otppassword2","type","password","maxlength","1","placeholder","\u25cf","formControlName","otp2",3,"keyup","focus"],["id","otppassword3","type","password","maxlength","1","placeholder","\u25cf","formControlName","otp3",3,"keyup","focus"],["id","otppassword4","type","password","maxlength","1","placeholder","\u25cf","formControlName","otp4",3,"keyup","focus"],["id","otppassword5","type","password","maxlength","1","placeholder","\u25cf","formControlName","otp5",3,"keyup","focus"],["id","otppassword6","type","password","maxlength","1","placeholder","\u25cf","formControlName","otp6",3,"keyup","focus"],[1,"ux-input","password1","mt-0","mb-0"],["class","error-message",4,"ngIf"],[1,"col-6","col-md-6"],[1,"text-left"],[1,"success-text"],[1,"text-right"],[1,"ux-linkbutton","default-underline","mt3",3,"ngClass","click"],[1,"col-12","col-md-4","col-lg-3","col-xl-3","text-right","hide-m"],[1,"mobile-img"],["src","assets/images/icons/mobile.svg","alt","mobile-icon"],[1,"result-container1","mar-top"],[1,"info-bottom","pad-custom"],[1,"info-details","mt-3"],[1,"info-details"],[4,"ngIf"],[1,"info-message"],[1,"bottom-footer1"],[1,"btn-div"],[1,"ux-button","secondary","sm-mob",3,"click"],[1,"ux-button","primary","sm-mob",3,"click"],[1,"col-12","col-md-12","col-lg-12","col-xl-3","d-none","d-xl-block"],[1,"right-ads"],["src","assets/images/banner/my-card-banner.jpg"],[1,"vspacer30"],[1,"popup-bottom","sm-popup","otp-attempt-expired"],[1,"text-center"],["src","assets/images/svg/success.svg","alt","success-icon"],[1,"col-12","mb-4"],[1,"row1","mt-2"],[1,"col-12","text-center"],[1,"ux-button","primary","submit-btn",3,"click"],[3,"click"],[1,"error-message"]],template:function(e,t){1&e&&(r.ec(0,"div",0),r.Zb(1,"div",1),r.ec(2,"div",2),r.ec(3,"div",3),r.ec(4,"div",4),r.ec(5,"div",5),r.ec(6,"div",6),r.ec(7,"div",7),r.ec(8,"div",8),r.ec(9,"ul",9),r.Rc(10,D,4,3,"li",10),r.dc(),r.dc(),r.dc(),r.dc(),r.Zb(11,"div",11),r.ec(12,"div",12),r.ec(13,"div",13),r.ec(14,"div",14),r.ec(15,"div",15),r.ec(16,"div",16),r.ec(17,"div",17),r.ec(18,"div",18),r.ec(19,"h4"),r.Sc(20,"Enter OTP"),r.dc(),r.dc(),r.Zb(21,"div",19),r.dc(),r.ec(22,"div",14),r.ec(23,"div",20),r.ec(24,"div",21),r.ec(25,"div",14),r.ec(26,"div",22),r.ec(27,"div",14),r.ec(28,"div",23),r.ec(29,"div",24),r.ec(30,"em",25),r.Sc(31),r.dc(),r.dc(),r.dc(),r.ec(32,"div",26),r.ec(33,"div",6),r.ec(34,"div",27),r.ec(35,"form",28),r.ec(36,"div",29),r.ec(37,"div",30),r.ec(38,"div",31),r.ec(39,"input",32,33),r.lc("keyup",(function(e){return t.onKeyUpEvent(0,e,"otp")}))("focus",(function(){return t.onFocusEvent(1,"otp")})),r.dc(),r.dc(),r.dc(),r.ec(41,"div",30),r.ec(42,"div",31),r.ec(43,"input",34,33),r.lc("keyup",(function(e){return t.onKeyUpEvent(1,e,"otp")}))("focus",(function(){return t.onFocusEvent(2,"otp")})),r.dc(),r.dc(),r.dc(),r.ec(45,"div",30),r.ec(46,"div",31),r.ec(47,"input",35,33),r.lc("keyup",(function(e){return t.onKeyUpEvent(2,e,"otp")}))("focus",(function(){return t.onFocusEvent(3,"otp")})),r.dc(),r.dc(),r.dc(),r.ec(49,"div",30),r.ec(50,"div",31),r.ec(51,"input",36,33),r.lc("keyup",(function(e){return t.onKeyUpEvent(3,e,"otp")}))("focus",(function(){return t.onFocusEvent(4,"otp")})),r.dc(),r.dc(),r.dc(),r.ec(53,"div",30),r.ec(54,"div",31),r.ec(55,"input",37,33),r.lc("keyup",(function(e){return t.onKeyUpEvent(4,e,"otp")}))("focus",(function(){return t.onFocusEvent(5,"otp")})),r.dc(),r.dc(),r.dc(),r.ec(57,"div",30),r.ec(58,"div",31),r.ec(59,"input",38,33),r.lc("keyup",(function(e){return t.onKeyUpEvent(5,e,"otp")}))("focus",(function(){return t.onFocusEvent(6,"otp")})),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(61,"div",14),r.ec(62,"div",13),r.ec(63,"div",39),r.Rc(64,f,3,3,"p",40),r.dc(),r.dc(),r.dc(),r.ec(65,"div",29),r.ec(66,"div",41),r.ec(67,"div",42),r.ec(68,"p",42),r.ec(69,"span",43),r.Sc(70),r.qc(71,"formatTimer"),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(72,"div",41),r.ec(73,"div",44),r.ec(74,"button",45),r.lc("click",(function(){return t.resendOTP(2)})),r.Sc(75,"Resend"),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(76,"div",46),r.ec(77,"div",47),r.Zb(78,"img",48),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(79,"div",20),r.ec(80,"div",49),r.ec(81,"div",50),r.ec(82,"div",51),r.ec(83,"div",6),r.ec(84,"h6"),r.Sc(85,"Deposit Type"),r.dc(),r.ec(86,"h5"),r.Sc(87),r.dc(),r.dc(),r.dc(),r.ec(88,"div",52),r.ec(89,"div",6),r.ec(90,"h6"),r.Sc(91,"Deposit Scheme"),r.dc(),r.ec(92,"h5"),r.Sc(93),r.dc(),r.dc(),r.dc(),r.ec(94,"div",52),r.ec(95,"div",6),r.ec(96,"h6"),r.Sc(97,"Interest Payout"),r.dc(),r.Rc(98,y,2,0,"h5",53),r.Rc(99,F,2,0,"h5",53),r.Rc(100,R,2,0,"h5",53),r.dc(),r.dc(),r.ec(101,"div",52),r.ec(102,"div",6),r.ec(103,"h6"),r.Sc(104,"Depositor Type"),r.dc(),r.ec(105,"h5"),r.Sc(106),r.dc(),r.dc(),r.dc(),r.ec(107,"div",52),r.ec(108,"div",6),r.ec(109,"h6"),r.Sc(110,"Deposit Amount"),r.dc(),r.ec(111,"h5"),r.Sc(112),r.dc(),r.dc(),r.dc(),r.ec(113,"div",52),r.ec(114,"div",6),r.ec(115,"h6"),r.Sc(116,"Tenure"),r.dc(),r.ec(117,"h5"),r.Sc(118),r.dc(),r.dc(),r.dc(),r.ec(119,"div",52),r.ec(120,"div",6),r.ec(121,"h6"),r.Sc(122,"Estimated Interest Rate"),r.dc(),r.ec(123,"h5"),r.Sc(124),r.dc(),r.dc(),r.dc(),r.ec(125,"div",52),r.ec(126,"div",6),r.ec(127,"h6"),r.Sc(128,"Estimated Maturity Amount"),r.dc(),r.ec(129,"h5"),r.Sc(130),r.qc(131,"customcurrency"),r.dc(),r.dc(),r.dc(),r.ec(132,"div",52),r.ec(133,"div",6),r.ec(134,"h6"),r.Sc(135,"Maturity Date"),r.dc(),r.ec(136,"h5"),r.Sc(137),r.dc(),r.dc(),r.dc(),r.ec(138,"div",52),r.ec(139,"div",6),r.ec(140,"h6"),r.Sc(141,"Mode of Operation"),r.dc(),r.ec(142,"h5"),r.Sc(143),r.dc(),r.dc(),r.dc(),r.ec(144,"div",52),r.ec(145,"div",6),r.ec(146,"h6"),r.Sc(147,"Maturity Instruction"),r.dc(),r.ec(148,"h5"),r.Sc(149),r.dc(),r.dc(),r.dc(),r.ec(150,"div",52),r.ec(151,"div",6),r.ec(152,"h6"),r.Sc(153,"Maturity Payout Account"),r.dc(),r.ec(154,"h5"),r.Sc(155),r.dc(),r.dc(),r.dc(),r.ec(156,"div",52),r.ec(157,"div",6),r.ec(158,"h6"),r.Sc(159,"Nominee Name"),r.dc(),r.ec(160,"h5"),r.Sc(161),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(162,"div",24),r.ec(163,"p",54),r.Sc(164,"*The above values are estimated and for information only. The actual value may differ from estimated values"),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(165,"div",23),r.ec(166,"ul",55),r.ec(167,"li"),r.ec(168,"div",56),r.ec(169,"button",57),r.lc("click",(function(){return t.goToPage("openDeposit","fixed")})),r.Sc(170,"Cancel"),r.dc(),r.dc(),r.ec(171,"div",56),r.ec(172,"button",58),r.lc("click",(function(){return t.openDepositSubmit()})),r.Sc(173,"Continue"),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(174,"div",59),r.ec(175,"div",60),r.ec(176,"a"),r.Zb(177,"img",61),r.dc(),r.dc(),r.Zb(178,"div",62),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.dc(),r.ec(179,"div",63),r.ec(180,"div",14),r.ec(181,"div",13),r.ec(182,"h4",64),r.Zb(183,"img",65),r.Sc(184," Information "),r.dc(),r.dc(),r.dc(),r.ec(185,"div",14),r.ec(186,"div",66),r.ec(187,"p"),r.Sc(188," You have reached your maximum attempt.Please try again "),r.dc(),r.dc(),r.dc(),r.ec(189,"div",67),r.ec(190,"div",68),r.ec(191,"button",69),r.lc("click",(function(){return t.closePopup("div.popup-bottom.otp-attempt-expired")})),r.Sc(192,"OK"),r.dc(),r.dc(),r.dc(),r.dc()),2&e&&(r.Mb(10),r.uc("ngForOf",t.DataService.breadcrumblist),r.Mb(21),r.Uc("OTP sent on your registered Mobile number ending with ",t.mobNumber,""),r.Mb(4),r.uc("formGroup",t.otpForm),r.Mb(29),r.uc("ngIf",t.invalidOtp),r.Mb(6),r.Tc(r.rc(71,21,t.counter)),r.Mb(4),r.uc("ngClass",t.counter>0?"mydisabled":"resendActive"),r.Mb(13),r.Tc(t.openFDReceiptObj.depositType),r.Mb(6),r.Tc("G"==t.openFDReceiptObj.depositScheme?"General":"Tax Saver"),r.Mb(5),r.uc("ngIf","M"==t.openFDReceiptObj.interestPayout),r.Mb(1),r.uc("ngIf","Q"==t.openFDReceiptObj.interestPayout),r.Mb(1),r.uc("ngIf","C"==t.openFDReceiptObj.interestPayout),r.Mb(6),r.Tc(t.openFDReceiptObj.depositorType),r.Mb(6),r.Tc(t.openFDReceiptObj.depositAmount),r.Mb(6),r.Tc(t.openFDReceiptObj.tenure),r.Mb(6),r.Uc("",t.openFDReceiptObj.interestRate+" %"," "),r.Mb(6),r.Tc(r.rc(131,23,t.openFDReceiptObj.maturityAmount)),r.Mb(7),r.Tc(t.openFDReceiptObj.maturityDate),r.Mb(6),r.Tc(t.openFDReceiptObj.modeOfOperation),r.Mb(6),r.Tc(t.openFDReceiptObj.maturityInstruction),r.Mb(6),r.Tc(t.openFDReceiptObj.maturityPayoutAccount),r.Mb(6),r.Tc(t.openFDReceiptObj.nomineeName))},directives:[o.s,i.I,i.t,i.k,i.c,i.n,i.s,i.i,o.t,o.q],pipes:[v.c,b.a,g.a],styles:[""]}),e})()}];let O=(()=>{class e{}return e.\u0275mod=r.Wb({type:e}),e.\u0275inj=r.Vb({factory:function(t){return new(t||e)},imports:[[n.g.forChild(w)],n.g]}),e})();var T=c("PCNd");let k=(()=>{class e{}return e.\u0275mod=r.Wb({type:e}),e.\u0275inj=r.Vb({factory:function(t){return new(t||e)},imports:[[o.c,i.m,i.C,T.a,O]]}),e})()}}]);